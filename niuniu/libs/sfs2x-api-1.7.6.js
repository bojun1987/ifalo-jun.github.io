!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).SFS2X=e()}}(function(){return function e(t,r,n){function s(a,o){if(!r[a]){if(!t[a]){var u="function"==typeof require&&require;if(!o&&u)return u(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[a]={exports:{}};t[a][0].call(c.exports,function(e){var r=t[a][1][e];return s(r||e)},c,c.exports,e,t,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)s(n[a]);return s}({1:[function(e,t,r){t.exports={default:e("core-js/library/fn/array/from"),__esModule:!0}},{"core-js/library/fn/array/from":24}],2:[function(e,t,r){t.exports={default:e("core-js/library/fn/get-iterator"),__esModule:!0}},{"core-js/library/fn/get-iterator":25}],3:[function(e,t,r){t.exports={default:e("core-js/library/fn/map"),__esModule:!0}},{"core-js/library/fn/map":26}],4:[function(e,t,r){t.exports={default:e("core-js/library/fn/number/is-finite"),__esModule:!0}},{"core-js/library/fn/number/is-finite":27}],5:[function(e,t,r){t.exports={default:e("core-js/library/fn/number/is-integer"),__esModule:!0}},{"core-js/library/fn/number/is-integer":28}],6:[function(e,t,r){t.exports={default:e("core-js/library/fn/number/is-safe-integer"),__esModule:!0}},{"core-js/library/fn/number/is-safe-integer":29}],7:[function(e,t,r){t.exports={default:e("core-js/library/fn/number/max-safe-integer"),__esModule:!0}},{"core-js/library/fn/number/max-safe-integer":30}],8:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/create"),__esModule:!0}},{"core-js/library/fn/object/create":31}],9:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":32}],10:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/freeze"),__esModule:!0}},{"core-js/library/fn/object/freeze":33}],11:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/get-own-property-descriptor"),__esModule:!0}},{"core-js/library/fn/object/get-own-property-descriptor":34}],12:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/get-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/get-prototype-of":35}],13:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/seal"),__esModule:!0}},{"core-js/library/fn/object/seal":36}],14:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/set-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/set-prototype-of":37}],15:[function(e,t,r){t.exports={default:e("core-js/library/fn/set"),__esModule:!0}},{"core-js/library/fn/set":38}],16:[function(e,t,r){t.exports={default:e("core-js/library/fn/symbol"),__esModule:!0}},{"core-js/library/fn/symbol":39}],17:[function(e,t,r){t.exports={default:e("core-js/library/fn/symbol/iterator"),__esModule:!0}},{"core-js/library/fn/symbol/iterator":40}],18:[function(e,t,r){"use strict";r.__esModule=!0,r.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},{}],19:[function(e,t,r){"use strict";r.__esModule=!0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("../core-js/object/define-property"));r.default=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),(0,n.default)(e,s.key,s)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}()},{"../core-js/object/define-property":9}],20:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var s=n(e("../core-js/object/get-prototype-of")),i=n(e("../core-js/object/get-own-property-descriptor"));r.default=function e(t,r,n){null===t&&(t=Function.prototype);var a=(0,i.default)(t,r);if(void 0===a){var o=(0,s.default)(t);return null===o?void 0:e(o,r,n)}if("value"in a)return a.value;var u=a.get;if(void 0!==u)return u.call(n)}},{"../core-js/object/get-own-property-descriptor":11,"../core-js/object/get-prototype-of":12}],21:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var s=n(e("../core-js/object/set-prototype-of")),i=n(e("../core-js/object/create")),a=n(e("../helpers/typeof"));r.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,a.default)(t)));e.prototype=(0,i.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(s.default?(0,s.default)(e,t):e.__proto__=t)}},{"../core-js/object/create":8,"../core-js/object/set-prototype-of":14,"../helpers/typeof":23}],22:[function(e,t,r){"use strict";r.__esModule=!0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("../helpers/typeof"));r.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,n.default)(t))&&"function"!=typeof t?e:t}},{"../helpers/typeof":23}],23:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var s=n(e("../core-js/symbol/iterator")),i=n(e("../core-js/symbol")),a="function"==typeof i.default&&"symbol"==typeof s.default?function(e){return typeof e}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":typeof e};r.default="function"==typeof i.default&&"symbol"===a(s.default)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":void 0===e?"undefined":a(e)}},{"../core-js/symbol":16,"../core-js/symbol/iterator":17}],24:[function(e,t,r){e("../../modules/es6.string.iterator"),e("../../modules/es6.array.from"),t.exports=e("../../modules/_core").Array.from},{"../../modules/_core":55,"../../modules/es6.array.from":118,"../../modules/es6.string.iterator":134}],25:[function(e,t,r){e("../modules/web.dom.iterable"),e("../modules/es6.string.iterator"),t.exports=e("../modules/core.get-iterator")},{"../modules/core.get-iterator":117,"../modules/es6.string.iterator":134,"../modules/web.dom.iterable":140}],26:[function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.map"),e("../modules/es7.map.to-json"),t.exports=e("../modules/_core").Map},{"../modules/_core":55,"../modules/es6.map":120,"../modules/es6.object.to-string":132,"../modules/es6.string.iterator":134,"../modules/es7.map.to-json":136,"../modules/web.dom.iterable":140}],27:[function(e,t,r){e("../../modules/es6.number.is-finite"),t.exports=e("../../modules/_core").Number.isFinite},{"../../modules/_core":55,"../../modules/es6.number.is-finite":121}],28:[function(e,t,r){e("../../modules/es6.number.is-integer"),t.exports=e("../../modules/_core").Number.isInteger},{"../../modules/_core":55,"../../modules/es6.number.is-integer":122}],29:[function(e,t,r){e("../../modules/es6.number.is-safe-integer"),t.exports=e("../../modules/_core").Number.isSafeInteger},{"../../modules/_core":55,"../../modules/es6.number.is-safe-integer":123}],30:[function(e,t,r){e("../../modules/es6.number.max-safe-integer"),t.exports=9007199254740991},{"../../modules/es6.number.max-safe-integer":124}],31:[function(e,t,r){e("../../modules/es6.object.create");var n=e("../../modules/_core").Object;t.exports=function(e,t){return n.create(e,t)}},{"../../modules/_core":55,"../../modules/es6.object.create":125}],32:[function(e,t,r){e("../../modules/es6.object.define-property");var n=e("../../modules/_core").Object;t.exports=function(e,t,r){return n.defineProperty(e,t,r)}},{"../../modules/_core":55,"../../modules/es6.object.define-property":126}],33:[function(e,t,r){e("../../modules/es6.object.freeze"),t.exports=e("../../modules/_core").Object.freeze},{"../../modules/_core":55,"../../modules/es6.object.freeze":127}],34:[function(e,t,r){e("../../modules/es6.object.get-own-property-descriptor");var n=e("../../modules/_core").Object;t.exports=function(e,t){return n.getOwnPropertyDescriptor(e,t)}},{"../../modules/_core":55,"../../modules/es6.object.get-own-property-descriptor":128}],35:[function(e,t,r){e("../../modules/es6.object.get-prototype-of"),t.exports=e("../../modules/_core").Object.getPrototypeOf},{"../../modules/_core":55,"../../modules/es6.object.get-prototype-of":129}],36:[function(e,t,r){e("../../modules/es6.object.seal"),t.exports=e("../../modules/_core").Object.seal},{"../../modules/_core":55,"../../modules/es6.object.seal":130}],37:[function(e,t,r){e("../../modules/es6.object.set-prototype-of"),t.exports=e("../../modules/_core").Object.setPrototypeOf},{"../../modules/_core":55,"../../modules/es6.object.set-prototype-of":131}],38:[function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.set"),e("../modules/es7.set.to-json"),t.exports=e("../modules/_core").Set},{"../modules/_core":55,"../modules/es6.object.to-string":132,"../modules/es6.set":133,"../modules/es6.string.iterator":134,"../modules/es7.set.to-json":137,"../modules/web.dom.iterable":140}],39:[function(e,t,r){e("../../modules/es6.symbol"),e("../../modules/es6.object.to-string"),e("../../modules/es7.symbol.async-iterator"),e("../../modules/es7.symbol.observable"),t.exports=e("../../modules/_core").Symbol},{"../../modules/_core":55,"../../modules/es6.object.to-string":132,"../../modules/es6.symbol":135,"../../modules/es7.symbol.async-iterator":138,"../../modules/es7.symbol.observable":139}],40:[function(e,t,r){e("../../modules/es6.string.iterator"),e("../../modules/web.dom.iterable"),t.exports=e("../../modules/_wks-ext").f("iterator")},{"../../modules/_wks-ext":114,"../../modules/es6.string.iterator":134,"../../modules/web.dom.iterable":140}],41:[function(e,t,r){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],42:[function(e,t,r){t.exports=function(){}},{}],43:[function(e,t,r){t.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},{}],44:[function(e,t,r){var n=e("./_is-object");t.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":75}],45:[function(e,t,r){var n=e("./_for-of");t.exports=function(e,t){var r=[];return n(e,!1,r.push,r,t),r}},{"./_for-of":65}],46:[function(e,t,r){var n=e("./_to-iobject"),s=e("./_to-length"),i=e("./_to-index");t.exports=function(e){return function(t,r,a){var o,u=n(t),l=s(u.length),c=i(a,l);if(e&&r!=r){for(;l>c;)if((o=u[c++])!=o)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===r)return e||c||0;return!e&&-1}}},{"./_to-index":106,"./_to-iobject":108,"./_to-length":109}],47:[function(e,t,r){var n=e("./_ctx"),s=e("./_iobject"),i=e("./_to-object"),a=e("./_to-length"),o=e("./_array-species-create");t.exports=function(e,t){var r=1==e,u=2==e,l=3==e,c=4==e,f=6==e,h=5==e||f,d=t||o;return function(t,o,_){for(var b,p,m=i(t),y=s(m),g=n(o,_,3),v=a(y.length),S=0,R=r?d(t,v):u?d(t,0):void 0;v>S;S++)if((h||S in y)&&(b=y[S],p=g(b,S,m),e))if(r)R[S]=p;else if(p)switch(e){case 3:return!0;case 5:return b;case 6:return S;case 2:R.push(b)}else if(c)return!1;return f?-1:l||c?c:R}}},{"./_array-species-create":49,"./_ctx":57,"./_iobject":71,"./_to-length":109,"./_to-object":110}],48:[function(e,t,r){var n=e("./_is-object"),s=e("./_is-array"),i=e("./_wks")("species");t.exports=function(e){var t;return s(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!s(t.prototype)||(t=void 0),n(t)&&null===(t=t[i])&&(t=void 0)),void 0===t?Array:t}},{"./_is-array":73,"./_is-object":75,"./_wks":115}],49:[function(e,t,r){var n=e("./_array-species-constructor");t.exports=function(e,t){return new(n(e))(t)}},{"./_array-species-constructor":48}],50:[function(e,t,r){var n=e("./_cof"),s=e("./_wks")("toStringTag"),i="Arguments"==n(function(){return arguments}());t.exports=function(e){var t,r,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),s))?r:i?n(t):"Object"==(a=n(t))&&"function"==typeof t.callee?"Arguments":a}},{"./_cof":51,"./_wks":115}],51:[function(e,t,r){var n={}.toString;t.exports=function(e){return n.call(e).slice(8,-1)}},{}],52:[function(e,t,r){"use strict";var n=e("./_object-dp").f,s=e("./_object-create"),i=e("./_redefine-all"),a=e("./_ctx"),o=e("./_an-instance"),u=e("./_defined"),l=e("./_for-of"),c=e("./_iter-define"),f=e("./_iter-step"),h=e("./_set-species"),d=e("./_descriptors"),_=e("./_meta").fastKey,b=d?"_s":"size",p=function(e,t){var r,n=_(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};t.exports={getConstructor:function(e,t,r,c){var f=e(function(e,n){o(e,f,t,"_i"),e._i=s(null),e._f=void 0,e._l=void 0,e[b]=0,void 0!=n&&l(n,r,e[c],e)});return i(f.prototype,{clear:function(){for(var e=this._i,t=this._f;t;t=t.n)t.r=!0,t.p&&(t.p=t.p.n=void 0),delete e[t.i];this._f=this._l=void 0,this[b]=0},delete:function(e){var t=p(this,e);if(t){var r=t.n,n=t.p;delete this._i[t.i],t.r=!0,n&&(n.n=r),r&&(r.p=n),this._f==t&&(this._f=r),this._l==t&&(this._l=n),this[b]--}return!!t},forEach:function(e){o(this,f,"forEach");for(var t,r=a(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.n:this._f;)for(r(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!p(this,e)}}),d&&n(f.prototype,"size",{get:function(){return u(this[b])}}),f},def:function(e,t,r){var n,s,i=p(e,t);return i?i.v=r:(e._l=i={i:s=_(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=i),n&&(n.n=i),e[b]++,"F"!==s&&(e._i[s]=i)),e},getEntry:p,setStrong:function(e,t,r){c(e,t,function(e,t){this._t=e,this._k=t,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?"keys"==e?f(0,t.k):"values"==e?f(0,t.v):f(0,[t.k,t.v]):(this._t=void 0,f(1))},r?"entries":"values",!r,!0),h(t)}}},{"./_an-instance":43,"./_ctx":57,"./_defined":58,"./_descriptors":59,"./_for-of":65,"./_iter-define":78,"./_iter-step":80,"./_meta":84,"./_object-create":85,"./_object-dp":86,"./_redefine-all":98,"./_set-species":101}],53:[function(e,t,r){var n=e("./_classof"),s=e("./_array-from-iterable");t.exports=function(e){return function(){if(n(this)!=e)throw TypeError(e+"#toJSON isn't generic");return s(this)}}},{"./_array-from-iterable":45,"./_classof":50}],54:[function(e,t,r){"use strict";var n=e("./_global"),s=e("./_export"),i=e("./_meta"),a=e("./_fails"),o=e("./_hide"),u=e("./_redefine-all"),l=e("./_for-of"),c=e("./_an-instance"),f=e("./_is-object"),h=e("./_set-to-string-tag"),d=e("./_object-dp").f,_=e("./_array-methods")(0),b=e("./_descriptors");t.exports=function(e,t,r,p,m,y){var g=n[e],v=g,S=m?"set":"add",R=v&&v.prototype,E={};return b&&"function"==typeof v&&(y||R.forEach&&!a(function(){(new v).entries().next()}))?(v=t(function(t,r){c(t,v,e,"_c"),t._c=new g,void 0!=r&&l(r,m,t[S],t)}),_("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in R&&(!y||"clear"!=e)&&o(v.prototype,e,function(r,n){if(c(this,v,e),!t&&y&&!f(r))return"get"==e&&void 0;var s=this._c[e](0===r?0:r,n);return t?this:s})}),"size"in R&&d(v.prototype,"size",{get:function(){return this._c.size}})):(v=p.getConstructor(t,e,m,S),u(v.prototype,r),i.NEED=!0),h(v,e),E[e]=v,s(s.G+s.W+s.F,E),y||p.setStrong(v,e,m),v}},{"./_an-instance":43,"./_array-methods":47,"./_descriptors":59,"./_export":63,"./_fails":64,"./_for-of":65,"./_global":66,"./_hide":68,"./_is-object":75,"./_meta":84,"./_object-dp":86,"./_redefine-all":98,"./_set-to-string-tag":102}],55:[function(e,t,r){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},{}],56:[function(e,t,r){"use strict";var n=e("./_object-dp"),s=e("./_property-desc");t.exports=function(e,t,r){t in e?n.f(e,t,s(0,r)):e[t]=r}},{"./_object-dp":86,"./_property-desc":97}],57:[function(e,t,r){var n=e("./_a-function");t.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,s){return e.call(t,r,n,s)}}return function(){return e.apply(t,arguments)}}},{"./_a-function":41}],58:[function(e,t,r){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],59:[function(e,t,r){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":64}],60:[function(e,t,r){var n=e("./_is-object"),s=e("./_global").document,i=n(s)&&n(s.createElement);t.exports=function(e){return i?s.createElement(e):{}}},{"./_global":66,"./_is-object":75}],61:[function(e,t,r){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],62:[function(e,t,r){var n=e("./_object-keys"),s=e("./_object-gops"),i=e("./_object-pie");t.exports=function(e){var t=n(e),r=s.f;if(r)for(var a,o=r(e),u=i.f,l=0;o.length>l;)u.call(e,a=o[l++])&&t.push(a);return t}},{"./_object-gops":91,"./_object-keys":94,"./_object-pie":95}],63:[function(e,t,r){var n=e("./_global"),s=e("./_core"),i=e("./_ctx"),a=e("./_hide"),o="prototype",u=function(e,t,r){var l,c,f,h=e&u.F,d=e&u.G,_=e&u.S,b=e&u.P,p=e&u.B,m=e&u.W,y=d?s:s[t]||(s[t]={}),g=y[o],v=d?n:_?n[t]:(n[t]||{})[o];d&&(r=t);for(l in r)(c=!h&&v&&void 0!==v[l])&&l in y||(f=c?v[l]:r[l],y[l]=d&&"function"!=typeof v[l]?r[l]:p&&c?i(f,n):m&&v[l]==f?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t[o]=e[o],t}(f):b&&"function"==typeof f?i(Function.call,f):f,b&&((y.virtual||(y.virtual={}))[l]=f,e&u.R&&g&&!g[l]&&a(g,l,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},{"./_core":55,"./_ctx":57,"./_global":66,"./_hide":68}],64:[function(e,t,r){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],65:[function(e,t,r){var n=e("./_ctx"),s=e("./_iter-call"),i=e("./_is-array-iter"),a=e("./_an-object"),o=e("./_to-length"),u=e("./core.get-iterator-method"),l={},c={};(r=t.exports=function(e,t,r,f,h){var d,_,b,p,m=h?function(){return e}:u(e),y=n(r,f,t?2:1),g=0;if("function"!=typeof m)throw TypeError(e+" is not iterable!");if(i(m)){for(d=o(e.length);d>g;g++)if((p=t?y(a(_=e[g])[0],_[1]):y(e[g]))===l||p===c)return p}else for(b=m.call(e);!(_=b.next()).done;)if((p=s(b,y,_.value,t))===l||p===c)return p}).BREAK=l,r.RETURN=c},{"./_an-object":44,"./_ctx":57,"./_is-array-iter":72,"./_iter-call":76,"./_to-length":109,"./core.get-iterator-method":116}],66:[function(e,t,r){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},{}],67:[function(e,t,r){var n={}.hasOwnProperty;t.exports=function(e,t){return n.call(e,t)}},{}],68:[function(e,t,r){var n=e("./_object-dp"),s=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,r){return n.f(e,t,s(1,r))}:function(e,t,r){return e[t]=r,e}},{"./_descriptors":59,"./_object-dp":86,"./_property-desc":97}],69:[function(e,t,r){t.exports=e("./_global").document&&document.documentElement},{"./_global":66}],70:[function(e,t,r){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":59,"./_dom-create":60,"./_fails":64}],71:[function(e,t,r){var n=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},{"./_cof":51}],72:[function(e,t,r){var n=e("./_iterators"),s=e("./_wks")("iterator"),i=Array.prototype;t.exports=function(e){return void 0!==e&&(n.Array===e||i[s]===e)}},{"./_iterators":81,"./_wks":115}],73:[function(e,t,r){var n=e("./_cof");t.exports=Array.isArray||function(e){return"Array"==n(e)}},{"./_cof":51}],74:[function(e,t,r){var n=e("./_is-object"),s=Math.floor;t.exports=function(e){return!n(e)&&isFinite(e)&&s(e)===e}},{"./_is-object":75}],75:[function(e,t,r){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],76:[function(e,t,r){var n=e("./_an-object");t.exports=function(e,t,r,s){try{return s?t(n(r)[0],r[1]):t(r)}catch(t){var i=e.return;throw void 0!==i&&n(i.call(e)),t}}},{"./_an-object":44}],77:[function(e,t,r){"use strict";var n=e("./_object-create"),s=e("./_property-desc"),i=e("./_set-to-string-tag"),a={};e("./_hide")(a,e("./_wks")("iterator"),function(){return this}),t.exports=function(e,t,r){e.prototype=n(a,{next:s(1,r)}),i(e,t+" Iterator")}},{"./_hide":68,"./_object-create":85,"./_property-desc":97,"./_set-to-string-tag":102,"./_wks":115}],78:[function(e,t,r){"use strict";var n=e("./_library"),s=e("./_export"),i=e("./_redefine"),a=e("./_hide"),o=e("./_has"),u=e("./_iterators"),l=e("./_iter-create"),c=e("./_set-to-string-tag"),f=e("./_object-gpo"),h=e("./_wks")("iterator"),d=!([].keys&&"next"in[].keys()),_=function(){return this};t.exports=function(e,t,r,b,p,m,y){l(r,t,b);var g,v,S,R=function(e){if(!d&&e in k)return k[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},E=t+" Iterator",O="values"==p,A=!1,k=e.prototype,j=k[h]||k["@@iterator"]||p&&k[p],M=j||R(p),I=p?O?R("entries"):M:void 0,T="Array"==t?k.entries||j:j;if(T&&(S=f(T.call(new e)))!==Object.prototype&&(c(S,E,!0),n||o(S,h)||a(S,h,_)),O&&j&&"values"!==j.name&&(A=!0,M=function(){return j.call(this)}),n&&!y||!d&&!A&&k[h]||a(k,h,M),u[t]=M,u[E]=_,p)if(g={values:O?M:R("values"),keys:m?M:R("keys"),entries:I},y)for(v in g)v in k||i(k,v,g[v]);else s(s.P+s.F*(d||A),t,g);return g}},{"./_export":63,"./_has":67,"./_hide":68,"./_iter-create":77,"./_iterators":81,"./_library":83,"./_object-gpo":92,"./_redefine":99,"./_set-to-string-tag":102,"./_wks":115}],79:[function(e,t,r){var n=e("./_wks")("iterator"),s=!1;try{var i=[7][n]();i.return=function(){s=!0},Array.from(i,function(){throw 2})}catch(e){}t.exports=function(e,t){if(!t&&!s)return!1;var r=!1;try{var i=[7],a=i[n]();a.next=function(){return{done:r=!0}},i[n]=function(){return a},e(i)}catch(e){}return r}},{"./_wks":115}],80:[function(e,t,r){t.exports=function(e,t){return{value:t,done:!!e}}},{}],81:[function(e,t,r){t.exports={}},{}],82:[function(e,t,r){var n=e("./_object-keys"),s=e("./_to-iobject");t.exports=function(e,t){for(var r,i=s(e),a=n(i),o=a.length,u=0;o>u;)if(i[r=a[u++]]===t)return r}},{"./_object-keys":94,"./_to-iobject":108}],83:[function(e,t,r){t.exports=!0},{}],84:[function(e,t,r){var n=e("./_uid")("meta"),s=e("./_is-object"),i=e("./_has"),a=e("./_object-dp").f,o=0,u=Object.isExtensible||function(){return!0},l=!e("./_fails")(function(){return u(Object.preventExtensions({}))}),c=function(e){a(e,n,{value:{i:"O"+ ++o,w:{}}})},f=t.exports={KEY:n,NEED:!1,fastKey:function(e,t){if(!s(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,n)){if(!u(e))return"F";if(!t)return"E";c(e)}return e[n].i},getWeak:function(e,t){if(!i(e,n)){if(!u(e))return!0;if(!t)return!1;c(e)}return e[n].w},onFreeze:function(e){return l&&f.NEED&&u(e)&&!i(e,n)&&c(e),e}}},{"./_fails":64,"./_has":67,"./_is-object":75,"./_object-dp":86,"./_uid":112}],85:[function(e,t,r){var n=e("./_an-object"),s=e("./_object-dps"),i=e("./_enum-bug-keys"),a=e("./_shared-key")("IE_PROTO"),o=function(){},u=function(){var t,r=e("./_dom-create")("iframe"),n=i.length;for(r.style.display="none",e("./_html").appendChild(r),r.src="javascript:",(t=r.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;n--;)delete u.prototype[i[n]];return u()};t.exports=Object.create||function(e,t){var r;return null!==e?(o.prototype=n(e),r=new o,o.prototype=null,r[a]=e):r=u(),void 0===t?r:s(r,t)}},{"./_an-object":44,"./_dom-create":60,"./_enum-bug-keys":61,"./_html":69,"./_object-dps":87,"./_shared-key":103}],86:[function(e,t,r){var n=e("./_an-object"),s=e("./_ie8-dom-define"),i=e("./_to-primitive"),a=Object.defineProperty;r.f=e("./_descriptors")?Object.defineProperty:function(e,t,r){if(n(e),t=i(t,!0),n(r),s)try{return a(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},{"./_an-object":44,"./_descriptors":59,"./_ie8-dom-define":70,"./_to-primitive":111}],87:[function(e,t,r){var n=e("./_object-dp"),s=e("./_an-object"),i=e("./_object-keys");t.exports=e("./_descriptors")?Object.defineProperties:function(e,t){s(e);for(var r,a=i(t),o=a.length,u=0;o>u;)n.f(e,r=a[u++],t[r]);return e}},{"./_an-object":44,"./_descriptors":59,"./_object-dp":86,"./_object-keys":94}],88:[function(e,t,r){var n=e("./_object-pie"),s=e("./_property-desc"),i=e("./_to-iobject"),a=e("./_to-primitive"),o=e("./_has"),u=e("./_ie8-dom-define"),l=Object.getOwnPropertyDescriptor;r.f=e("./_descriptors")?l:function(e,t){if(e=i(e),t=a(t,!0),u)try{return l(e,t)}catch(e){}if(o(e,t))return s(!n.f.call(e,t),e[t])}},{"./_descriptors":59,"./_has":67,"./_ie8-dom-define":70,"./_object-pie":95,"./_property-desc":97,"./_to-iobject":108,"./_to-primitive":111}],89:[function(e,t,r){var n=e("./_to-iobject"),s=e("./_object-gopn").f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(e){return a&&"[object Window]"==i.call(e)?function(e){try{return s(e)}catch(e){return a.slice()}}(e):s(n(e))}},{"./_object-gopn":90,"./_to-iobject":108}],90:[function(e,t,r){var n=e("./_object-keys-internal"),s=e("./_enum-bug-keys").concat("length","prototype");r.f=Object.getOwnPropertyNames||function(e){return n(e,s)}},{"./_enum-bug-keys":61,"./_object-keys-internal":93}],91:[function(e,t,r){r.f=Object.getOwnPropertySymbols},{}],92:[function(e,t,r){var n=e("./_has"),s=e("./_to-object"),i=e("./_shared-key")("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=s(e),n(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},{"./_has":67,"./_shared-key":103,"./_to-object":110}],93:[function(e,t,r){var n=e("./_has"),s=e("./_to-iobject"),i=e("./_array-includes")(!1),a=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var r,o=s(e),u=0,l=[];for(r in o)r!=a&&n(o,r)&&l.push(r);for(;t.length>u;)n(o,r=t[u++])&&(~i(l,r)||l.push(r));return l}},{"./_array-includes":46,"./_has":67,"./_shared-key":103,"./_to-iobject":108}],94:[function(e,t,r){var n=e("./_object-keys-internal"),s=e("./_enum-bug-keys");t.exports=Object.keys||function(e){return n(e,s)}},{"./_enum-bug-keys":61,"./_object-keys-internal":93}],95:[function(e,t,r){r.f={}.propertyIsEnumerable},{}],96:[function(e,t,r){var n=e("./_export"),s=e("./_core"),i=e("./_fails");t.exports=function(e,t){var r=(s.Object||{})[e]||Object[e],a={};a[e]=t(r),n(n.S+n.F*i(function(){r(1)}),"Object",a)}},{"./_core":55,"./_export":63,"./_fails":64}],97:[function(e,t,r){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],98:[function(e,t,r){var n=e("./_hide");t.exports=function(e,t,r){for(var s in t)r&&e[s]?e[s]=t[s]:n(e,s,t[s]);return e}},{"./_hide":68}],99:[function(e,t,r){t.exports=e("./_hide")},{"./_hide":68}],100:[function(e,t,r){var n=e("./_is-object"),s=e("./_an-object"),i=function(e,t){if(s(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,r,n){try{(n=e("./_ctx")(Function.call,e("./_object-gopd").f(Object.prototype,"__proto__").set,2))(t,[]),r=!(t instanceof Array)}catch(e){r=!0}return function(e,t){return i(e,t),r?e.__proto__=t:n(e,t),e}}({},!1):void 0),check:i}},{"./_an-object":44,"./_ctx":57,"./_is-object":75,"./_object-gopd":88}],101:[function(e,t,r){"use strict";var n=e("./_global"),s=e("./_core"),i=e("./_object-dp"),a=e("./_descriptors"),o=e("./_wks")("species");t.exports=function(e){var t="function"==typeof s[e]?s[e]:n[e];a&&t&&!t[o]&&i.f(t,o,{configurable:!0,get:function(){return this}})}},{"./_core":55,"./_descriptors":59,"./_global":66,"./_object-dp":86,"./_wks":115}],102:[function(e,t,r){var n=e("./_object-dp").f,s=e("./_has"),i=e("./_wks")("toStringTag");t.exports=function(e,t,r){e&&!s(e=r?e:e.prototype,i)&&n(e,i,{configurable:!0,value:t})}},{"./_has":67,"./_object-dp":86,"./_wks":115}],103:[function(e,t,r){var n=e("./_shared")("keys"),s=e("./_uid");t.exports=function(e){return n[e]||(n[e]=s(e))}},{"./_shared":104,"./_uid":112}],104:[function(e,t,r){var n=e("./_global"),s="__core-js_shared__",i=n[s]||(n[s]={});t.exports=function(e){return i[e]||(i[e]={})}},{"./_global":66}],105:[function(e,t,r){var n=e("./_to-integer"),s=e("./_defined");t.exports=function(e){return function(t,r){var i,a,o=String(s(t)),u=n(r),l=o.length;return u<0||u>=l?e?"":void 0:(i=o.charCodeAt(u))<55296||i>56319||u+1===l||(a=o.charCodeAt(u+1))<56320||a>57343?e?o.charAt(u):i:e?o.slice(u,u+2):a-56320+(i-55296<<10)+65536}}},{"./_defined":58,"./_to-integer":107}],106:[function(e,t,r){var n=e("./_to-integer"),s=Math.max,i=Math.min;t.exports=function(e,t){return(e=n(e))<0?s(e+t,0):i(e,t)}},{"./_to-integer":107}],107:[function(e,t,r){var n=Math.ceil,s=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?s:n)(e)}},{}],108:[function(e,t,r){var n=e("./_iobject"),s=e("./_defined");t.exports=function(e){return n(s(e))}},{"./_defined":58,"./_iobject":71}],109:[function(e,t,r){var n=e("./_to-integer"),s=Math.min;t.exports=function(e){return e>0?s(n(e),9007199254740991):0}},{"./_to-integer":107}],110:[function(e,t,r){var n=e("./_defined");t.exports=function(e){return Object(n(e))}},{"./_defined":58}],111:[function(e,t,r){var n=e("./_is-object");t.exports=function(e,t){if(!n(e))return e;var r,s;if(t&&"function"==typeof(r=e.toString)&&!n(s=r.call(e)))return s;if("function"==typeof(r=e.valueOf)&&!n(s=r.call(e)))return s;if(!t&&"function"==typeof(r=e.toString)&&!n(s=r.call(e)))return s;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":75}],112:[function(e,t,r){var n=0,s=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+s).toString(36))}},{}],113:[function(e,t,r){var n=e("./_global"),s=e("./_core"),i=e("./_library"),a=e("./_wks-ext"),o=e("./_object-dp").f;t.exports=function(e){var t=s.Symbol||(s.Symbol=i?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||o(t,e,{value:a.f(e)})}},{"./_core":55,"./_global":66,"./_library":83,"./_object-dp":86,"./_wks-ext":114}],114:[function(e,t,r){r.f=e("./_wks")},{"./_wks":115}],115:[function(e,t,r){var n=e("./_shared")("wks"),s=e("./_uid"),i=e("./_global").Symbol,a="function"==typeof i;(t.exports=function(e){return n[e]||(n[e]=a&&i[e]||(a?i:s)("Symbol."+e))}).store=n},{"./_global":66,"./_shared":104,"./_uid":112}],116:[function(e,t,r){var n=e("./_classof"),s=e("./_wks")("iterator"),i=e("./_iterators");t.exports=e("./_core").getIteratorMethod=function(e){if(void 0!=e)return e[s]||e["@@iterator"]||i[n(e)]}},{"./_classof":50,"./_core":55,"./_iterators":81,"./_wks":115}],117:[function(e,t,r){var n=e("./_an-object"),s=e("./core.get-iterator-method");t.exports=e("./_core").getIterator=function(e){var t=s(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},{"./_an-object":44,"./_core":55,"./core.get-iterator-method":116}],118:[function(e,t,r){"use strict";var n=e("./_ctx"),s=e("./_export"),i=e("./_to-object"),a=e("./_iter-call"),o=e("./_is-array-iter"),u=e("./_to-length"),l=e("./_create-property"),c=e("./core.get-iterator-method");s(s.S+s.F*!e("./_iter-detect")(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,s,f,h=i(e),d="function"==typeof this?this:Array,_=arguments.length,b=_>1?arguments[1]:void 0,p=void 0!==b,m=0,y=c(h);if(p&&(b=n(b,_>2?arguments[2]:void 0,2)),void 0==y||d==Array&&o(y))for(r=new d(t=u(h.length));t>m;m++)l(r,m,p?b(h[m],m):h[m]);else for(f=y.call(h),r=new d;!(s=f.next()).done;m++)l(r,m,p?a(f,b,[s.value,m],!0):s.value);return r.length=m,r}})},{"./_create-property":56,"./_ctx":57,"./_export":63,"./_is-array-iter":72,"./_iter-call":76,"./_iter-detect":79,"./_to-length":109,"./_to-object":110,"./core.get-iterator-method":116}],119:[function(e,t,r){"use strict";var n=e("./_add-to-unscopables"),s=e("./_iter-step"),i=e("./_iterators"),a=e("./_to-iobject");t.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,s(1)):"keys"==t?s(0,r):"values"==t?s(0,e[r]):s(0,[r,e[r]])},"values"),i.Arguments=i.Array,n("keys"),n("values"),n("entries")},{"./_add-to-unscopables":42,"./_iter-define":78,"./_iter-step":80,"./_iterators":81,"./_to-iobject":108}],120:[function(e,t,r){"use strict";var n=e("./_collection-strong");t.exports=e("./_collection")("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=n.getEntry(this,e);return t&&t.v},set:function(e,t){return n.def(this,0===e?0:e,t)}},n,!0)},{"./_collection":54,"./_collection-strong":52}],121:[function(e,t,r){var n=e("./_export"),s=e("./_global").isFinite;n(n.S,"Number",{isFinite:function(e){return"number"==typeof e&&s(e)}})},{"./_export":63,"./_global":66}],122:[function(e,t,r){var n=e("./_export");n(n.S,"Number",{isInteger:e("./_is-integer")})},{"./_export":63,"./_is-integer":74}],123:[function(e,t,r){var n=e("./_export"),s=e("./_is-integer"),i=Math.abs;n(n.S,"Number",{isSafeInteger:function(e){return s(e)&&i(e)<=9007199254740991}})},{"./_export":63,"./_is-integer":74}],124:[function(e,t,r){var n=e("./_export");n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},{"./_export":63}],125:[function(e,t,r){var n=e("./_export");n(n.S,"Object",{create:e("./_object-create")})},{"./_export":63,"./_object-create":85}],126:[function(e,t,r){var n=e("./_export");n(n.S+n.F*!e("./_descriptors"),"Object",{defineProperty:e("./_object-dp").f})},{"./_descriptors":59,"./_export":63,"./_object-dp":86}],127:[function(e,t,r){var n=e("./_is-object"),s=e("./_meta").onFreeze;e("./_object-sap")("freeze",function(e){return function(t){return e&&n(t)?e(s(t)):t}})},{"./_is-object":75,"./_meta":84,"./_object-sap":96}],128:[function(e,t,r){var n=e("./_to-iobject"),s=e("./_object-gopd").f;e("./_object-sap")("getOwnPropertyDescriptor",function(){return function(e,t){return s(n(e),t)}})},{"./_object-gopd":88,"./_object-sap":96,"./_to-iobject":108}],129:[function(e,t,r){var n=e("./_to-object"),s=e("./_object-gpo");e("./_object-sap")("getPrototypeOf",function(){return function(e){return s(n(e))}})},{"./_object-gpo":92,"./_object-sap":96,"./_to-object":110}],130:[function(e,t,r){var n=e("./_is-object"),s=e("./_meta").onFreeze;e("./_object-sap")("seal",function(e){return function(t){return e&&n(t)?e(s(t)):t}})},{"./_is-object":75,"./_meta":84,"./_object-sap":96}],131:[function(e,t,r){var n=e("./_export");n(n.S,"Object",{setPrototypeOf:e("./_set-proto").set})},{"./_export":63,"./_set-proto":100}],132:[function(e,t,r){},{}],133:[function(e,t,r){"use strict";var n=e("./_collection-strong");t.exports=e("./_collection")("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return n.def(this,e=0===e?0:e,e)}},n)},{"./_collection":54,"./_collection-strong":52}],134:[function(e,t,r){"use strict";var n=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},{"./_iter-define":78,"./_string-at":105}],135:[function(e,t,r){"use strict";var n=e("./_global"),s=e("./_has"),i=e("./_descriptors"),a=e("./_export"),o=e("./_redefine"),u=e("./_meta").KEY,l=e("./_fails"),c=e("./_shared"),f=e("./_set-to-string-tag"),h=e("./_uid"),d=e("./_wks"),_=e("./_wks-ext"),b=e("./_wks-define"),p=e("./_keyof"),m=e("./_enum-keys"),y=e("./_is-array"),g=e("./_an-object"),v=e("./_to-iobject"),S=e("./_to-primitive"),R=e("./_property-desc"),E=e("./_object-create"),O=e("./_object-gopn-ext"),A=e("./_object-gopd"),k=e("./_object-dp"),j=e("./_object-keys"),M=A.f,I=k.f,T=O.f,C=n.Symbol,w=n.JSON,U=w&&w.stringify,D="prototype",B=d("_hidden"),F=d("toPrimitive"),N={}.propertyIsEnumerable,L=c("symbol-registry"),P=c("symbols"),q=c("op-symbols"),Y=Object[D],x="function"==typeof C,V=n.QObject,K=!V||!V[D]||!V[D].findChild,G=i&&l(function(){return 7!=E(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=M(Y,t);n&&delete Y[t],I(e,t,r),n&&e!==Y&&I(Y,t,n)}:I,z=function(e){var t=P[e]=E(C[D]);return t._k=e,t},H=x&&"symbol"==typeof C.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof C},J=function(e,t,r){return e===Y&&J(q,t,r),g(e),t=S(t,!0),g(r),s(P,t)?(r.enumerable?(s(e,B)&&e[B][t]&&(e[B][t]=!1),r=E(r,{enumerable:R(0,!1)})):(s(e,B)||I(e,B,R(1,{})),e[B][t]=!0),G(e,t,r)):I(e,t,r)},X=function(e,t){g(e);for(var r,n=m(t=v(t)),s=0,i=n.length;i>s;)J(e,r=n[s++],t[r]);return e},W=function(e){var t=N.call(this,e=S(e,!0));return!(this===Y&&s(P,e)&&!s(q,e))&&(!(t||!s(this,e)||!s(P,e)||s(this,B)&&this[B][e])||t)},Q=function(e,t){if(e=v(e),t=S(t,!0),e!==Y||!s(P,t)||s(q,t)){var r=M(e,t);return!r||!s(P,t)||s(e,B)&&e[B][t]||(r.enumerable=!0),r}},Z=function(e){for(var t,r=T(v(e)),n=[],i=0;r.length>i;)s(P,t=r[i++])||t==B||t==u||n.push(t);return n},$=function(e){for(var t,r=e===Y,n=T(r?q:v(e)),i=[],a=0;n.length>a;)!s(P,t=n[a++])||r&&!s(Y,t)||i.push(P[t]);return i};x||(o((C=function(){if(this instanceof C)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(r){this===Y&&t.call(q,r),s(this,B)&&s(this[B],e)&&(this[B][e]=!1),G(this,e,R(1,r))};return i&&K&&G(Y,e,{configurable:!0,set:t}),z(e)})[D],"toString",function(){return this._k}),A.f=Q,k.f=J,e("./_object-gopn").f=O.f=Z,e("./_object-pie").f=W,e("./_object-gops").f=$,i&&!e("./_library")&&o(Y,"propertyIsEnumerable",W,!0),_.f=function(e){return z(d(e))}),a(a.G+a.W+a.F*!x,{Symbol:C});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)d(ee[te++]);for(var ee=j(d.store),te=0;ee.length>te;)b(ee[te++]);a(a.S+a.F*!x,"Symbol",{for:function(e){return s(L,e+="")?L[e]:L[e]=C(e)},keyFor:function(e){if(H(e))return p(L,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){K=!0},useSimple:function(){K=!1}}),a(a.S+a.F*!x,"Object",{create:function(e,t){return void 0===t?E(e):X(E(e),t)},defineProperty:J,defineProperties:X,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:$}),w&&a(a.S+a.F*(!x||l(function(){var e=C();return"[null]"!=U([e])||"{}"!=U({a:e})||"{}"!=U(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!H(e)){for(var t,r,n=[e],s=1;arguments.length>s;)n.push(arguments[s++]);return"function"==typeof(t=n[1])&&(r=t),!r&&y(t)||(t=function(e,t){if(r&&(t=r.call(this,e,t)),!H(t))return t}),n[1]=t,U.apply(w,n)}}}),C[D][F]||e("./_hide")(C[D],F,C[D].valueOf),f(C,"Symbol"),f(Math,"Math",!0),f(n.JSON,"JSON",!0)},{"./_an-object":44,"./_descriptors":59,"./_enum-keys":62,"./_export":63,"./_fails":64,"./_global":66,"./_has":67,"./_hide":68,"./_is-array":73,"./_keyof":82,"./_library":83,"./_meta":84,"./_object-create":85,"./_object-dp":86,"./_object-gopd":88,"./_object-gopn":90,"./_object-gopn-ext":89,"./_object-gops":91,"./_object-keys":94,"./_object-pie":95,"./_property-desc":97,"./_redefine":99,"./_set-to-string-tag":102,"./_shared":104,"./_to-iobject":108,"./_to-primitive":111,"./_uid":112,"./_wks":115,"./_wks-define":113,"./_wks-ext":114}],136:[function(e,t,r){var n=e("./_export");n(n.P+n.R,"Map",{toJSON:e("./_collection-to-json")("Map")})},{"./_collection-to-json":53,"./_export":63}],137:[function(e,t,r){var n=e("./_export");n(n.P+n.R,"Set",{toJSON:e("./_collection-to-json")("Set")})},{"./_collection-to-json":53,"./_export":63}],138:[function(e,t,r){e("./_wks-define")("asyncIterator")},{"./_wks-define":113}],139:[function(e,t,r){e("./_wks-define")("observable")},{"./_wks-define":113}],140:[function(e,t,r){e("./es6.array.iterator");for(var n=e("./_global"),s=e("./_hide"),i=e("./_iterators"),a=e("./_wks")("toStringTag"),o=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],u=0;u<5;u++){var l=o[u],c=n[l],f=c&&c.prototype;f&&!f[a]&&s(f,a,l),i[l]=i.Array}},{"./_global":66,"./_hide":68,"./_iterators":81,"./_wks":115,"./es6.array.iterator":119}],141:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SFSRoom=r.SetBuddyVariablesRequest=r.RemoveBuddyRequest=r.InitBuddyListRequest=r.GoOnlineRequest=r.BuddyMessageRequest=r.BlockBuddyRequest=r.AddBuddyRequest=r.SetUserPositionRequest=r.QuickJoinGameRequest=r.JoinRoomInvitationRequest=r.InviteUsersRequest=r.InvitationReplyRequest=r.CreateSFSGameRequest=r.BanUserRequest=r.KickUserRequest=r.ExtensionRequest=r.FindUsersRequest=r.FindRoomsRequest=r.PlayerToSpectatorRequest=r.SpectatorToPlayerRequest=r.UnsubscribeRoomGroupRequest=r.SubscribeRoomGroupRequest=r.SetUserVariablesRequest=r.SetRoomVariablesRequest=r.AdminMessageRequest=r.ModeratorMessageRequest=r.ObjectMessageRequest=r.PrivateMessageRequest=r.PublicMessageRequest=r.ChangeRoomCapacityRequest=r.ChangeRoomPasswordStateRequest=r.ChangeRoomNameRequest=r.LeaveRoomRequest=r.CreateRoomRequest=r.JoinRoomRequest=r.LogoutRequest=r.LoginRequest=r.ClientDisconnectionReason=r.LoggerEvent=r.LogLevel=r.SFSErrorCodes=r.MessageRecipientMode=r.BanMode=r.MapLimits=r.RoomExtension=r.RoomEvents=r.RoomPermissions=r.MMORoomSettings=r.SFSGameSettings=r.RoomSettings=r.UserProperties=r.RoomProperties=r.StringMatch=r.NumberMatch=r.BoolMatch=r.LogicOperator=r.MatchExpression=r.MMOItemVariable=r.ReservedBuddyVariables=r.SFSBuddyVariable=r.ReservedRoomVariables=r.SFSRoomVariable=r.SFSUserVariable=r.VariableType=r.UserPrivileges=r.InvitationReply=r.Vec3D=r.SFSArray=r.SFSObject=r.SFSDataType=r.SFSBuddyEvent=r.SFSEvent=r.SmartFox=void 0;var n=e("./SmartFox");Object.defineProperty(r,"SmartFox",{enumerable:!0,get:function(){return n.SmartFox}});var s=e("./core/Events");Object.defineProperty(r,"SFSEvent",{enumerable:!0,get:function(){return s.SFSEvent}}),Object.defineProperty(r,"SFSBuddyEvent",{enumerable:!0,get:function(){return s.SFSBuddyEvent}});var i=e("./entities/Data");Object.defineProperty(r,"SFSDataType",{enumerable:!0,get:function(){return i.SFSDataType}}),Object.defineProperty(r,"SFSObject",{enumerable:!0,get:function(){return i.SFSObject}}),Object.defineProperty(r,"SFSArray",{enumerable:!0,get:function(){return i.SFSArray}}),Object.defineProperty(r,"Vec3D",{enumerable:!0,get:function(){return i.Vec3D}});var a=e("./entities/Invitation");Object.defineProperty(r,"InvitationReply",{enumerable:!0,get:function(){return a.InvitationReply}});var o=e("./entities/objects/User");Object.defineProperty(r,"UserPrivileges",{enumerable:!0,get:function(){return o.UserPrivileges}});var u=e("./entities/variables/Variable");Object.defineProperty(r,"VariableType",{enumerable:!0,get:function(){return u.VariableType}});var l=e("./entities/variables/UserVariable");Object.defineProperty(r,"SFSUserVariable",{enumerable:!0,get:function(){return l.SFSUserVariable}});var c=e("./entities/variables/RoomVariable");Object.defineProperty(r,"SFSRoomVariable",{enumerable:!0,get:function(){return c.SFSRoomVariable}}),Object.defineProperty(r,"ReservedRoomVariables",{enumerable:!0,get:function(){return c.ReservedRoomVariables}});var f=e("./entities/variables/BuddyVariable");Object.defineProperty(r,"SFSBuddyVariable",{enumerable:!0,get:function(){return f.SFSBuddyVariable}}),Object.defineProperty(r,"ReservedBuddyVariables",{enumerable:!0,get:function(){return f.ReservedBuddyVariables}});var h=e("./entities/variables/ItemVariable");Object.defineProperty(r,"MMOItemVariable",{enumerable:!0,get:function(){return h.MMOItemVariable}});var d=e("./entities/match/MatchExpression");Object.defineProperty(r,"MatchExpression",{enumerable:!0,get:function(){return d.MatchExpression}}),Object.defineProperty(r,"LogicOperator",{enumerable:!0,get:function(){return d.LogicOperator}});var _=e("./entities/match/Conditions");Object.defineProperty(r,"BoolMatch",{enumerable:!0,get:function(){return _.BoolMatch}}),Object.defineProperty(r,"NumberMatch",{enumerable:!0,get:function(){return _.NumberMatch}}),Object.defineProperty(r,"StringMatch",{enumerable:!0,get:function(){return _.StringMatch}});var b=e("./entities/match/Properties");Object.defineProperty(r,"RoomProperties",{enumerable:!0,get:function(){return b.RoomProperties}}),Object.defineProperty(r,"UserProperties",{enumerable:!0,get:function(){return b.UserProperties}});var p=e("./requests/Settings");Object.defineProperty(r,"RoomSettings",{enumerable:!0,get:function(){return p.RoomSettings}}),Object.defineProperty(r,"SFSGameSettings",{enumerable:!0,get:function(){return p.SFSGameSettings}}),Object.defineProperty(r,"MMORoomSettings",{enumerable:!0,get:function(){return p.MMORoomSettings}}),Object.defineProperty(r,"RoomPermissions",{enumerable:!0,get:function(){return p.RoomPermissions}}),Object.defineProperty(r,"RoomEvents",{enumerable:!0,get:function(){return p.RoomEvents}}),Object.defineProperty(r,"RoomExtension",{enumerable:!0,get:function(){return p.RoomExtension}}),Object.defineProperty(r,"MapLimits",{enumerable:!0,get:function(){return p.MapLimits}}),Object.defineProperty(r,"BanMode",{enumerable:!0,get:function(){return p.BanMode}}),Object.defineProperty(r,"MessageRecipientMode",{enumerable:!0,get:function(){return p.MessageRecipientMode}});var m=e("./utils/ErrorCodes");Object.defineProperty(r,"SFSErrorCodes",{enumerable:!0,get:function(){return m.SFSErrorCodes}});var y=e("./utils/Logging");Object.defineProperty(r,"LogLevel",{enumerable:!0,get:function(){return y.LogLevel}}),Object.defineProperty(r,"LoggerEvent",{enumerable:!0,get:function(){return y.LoggerEvent}});var g=e("./utils/Miscellanea");Object.defineProperty(r,"ClientDisconnectionReason",{enumerable:!0,get:function(){return g.ClientDisconnectionReason}});var v=e("./requests/system/Login");Object.defineProperty(r,"LoginRequest",{enumerable:!0,get:function(){return v.LoginRequest}});var S=e("./requests/system/Logout");Object.defineProperty(r,"LogoutRequest",{enumerable:!0,get:function(){return S.LogoutRequest}});var R=e("./requests/system/JoinRoom");Object.defineProperty(r,"JoinRoomRequest",{enumerable:!0,get:function(){return R.JoinRoomRequest}});var E=e("./requests/system/CreateRoom");Object.defineProperty(r,"CreateRoomRequest",{enumerable:!0,get:function(){return E.CreateRoomRequest}});var O=e("./requests/system/LeaveRoom");Object.defineProperty(r,"LeaveRoomRequest",{enumerable:!0,get:function(){return O.LeaveRoomRequest}});var A=e("./requests/system/ChangeRoomName");Object.defineProperty(r,"ChangeRoomNameRequest",{enumerable:!0,get:function(){return A.ChangeRoomNameRequest}});var k=e("./requests/system/ChangeRoomPasswordState");Object.defineProperty(r,"ChangeRoomPasswordStateRequest",{enumerable:!0,get:function(){return k.ChangeRoomPasswordStateRequest}});var j=e("./requests/system/ChangeRoomCapacity");Object.defineProperty(r,"ChangeRoomCapacityRequest",{enumerable:!0,get:function(){return j.ChangeRoomCapacityRequest}});var M=e("./requests/system/Message");Object.defineProperty(r,"PublicMessageRequest",{enumerable:!0,get:function(){return M.PublicMessageRequest}}),Object.defineProperty(r,"PrivateMessageRequest",{enumerable:!0,get:function(){return M.PrivateMessageRequest}}),Object.defineProperty(r,"ObjectMessageRequest",{enumerable:!0,get:function(){return M.ObjectMessageRequest}}),Object.defineProperty(r,"ModeratorMessageRequest",{enumerable:!0,get:function(){return M.ModeratorMessageRequest}}),Object.defineProperty(r,"AdminMessageRequest",{enumerable:!0,get:function(){return M.AdminMessageRequest}});var I=e("./requests/system/SetRoomVariables");Object.defineProperty(r,"SetRoomVariablesRequest",{enumerable:!0,get:function(){return I.SetRoomVariablesRequest}});var T=e("./requests/system/SetUserVariables");Object.defineProperty(r,"SetUserVariablesRequest",{enumerable:!0,get:function(){return T.SetUserVariablesRequest}});var C=e("./requests/system/SubscribeRoomGroup");Object.defineProperty(r,"SubscribeRoomGroupRequest",{enumerable:!0,get:function(){return C.SubscribeRoomGroupRequest}});var w=e("./requests/system/UnsubscribeRoomGroup");Object.defineProperty(r,"UnsubscribeRoomGroupRequest",{enumerable:!0,get:function(){return w.UnsubscribeRoomGroupRequest}});var U=e("./requests/system/SpectatorToPlayer");Object.defineProperty(r,"SpectatorToPlayerRequest",{enumerable:!0,get:function(){return U.SpectatorToPlayerRequest}});var D=e("./requests/system/PlayerToSpectator");Object.defineProperty(r,"PlayerToSpectatorRequest",{enumerable:!0,get:function(){return D.PlayerToSpectatorRequest}});var B=e("./requests/system/FindRooms");Object.defineProperty(r,"FindRoomsRequest",{enumerable:!0,get:function(){return B.FindRoomsRequest}});var F=e("./requests/system/FindUsers");Object.defineProperty(r,"FindUsersRequest",{enumerable:!0,get:function(){return F.FindUsersRequest}});var N=e("./requests/system/Extension");Object.defineProperty(r,"ExtensionRequest",{enumerable:!0,get:function(){return N.ExtensionRequest}});var L=e("./requests/system/KickUser");Object.defineProperty(r,"KickUserRequest",{enumerable:!0,get:function(){return L.KickUserRequest}});var P=e("./requests/system/BanUser");Object.defineProperty(r,"BanUserRequest",{enumerable:!0,get:function(){return P.BanUserRequest}});var q=e("./requests/game/CreateSFSGame");Object.defineProperty(r,"CreateSFSGameRequest",{enumerable:!0,get:function(){return q.CreateSFSGameRequest}});var Y=e("./requests/game/InvitationReply");Object.defineProperty(r,"InvitationReplyRequest",{enumerable:!0,get:function(){return Y.InvitationReplyRequest}});var x=e("./requests/game/InviteUsers");Object.defineProperty(r,"InviteUsersRequest",{enumerable:!0,get:function(){return x.InviteUsersRequest}});var V=e("./requests/game/JoinRoomInvitation");Object.defineProperty(r,"JoinRoomInvitationRequest",{enumerable:!0,get:function(){return V.JoinRoomInvitationRequest}});var K=e("./requests/game/QuickJoinGame");Object.defineProperty(r,"QuickJoinGameRequest",{enumerable:!0,get:function(){return K.QuickJoinGameRequest}});var G=e("./requests/mmo/SetUserPosition");Object.defineProperty(r,"SetUserPositionRequest",{enumerable:!0,get:function(){return G.SetUserPositionRequest}});var z=e("./requests/buddylist/AddBuddy");Object.defineProperty(r,"AddBuddyRequest",{enumerable:!0,get:function(){return z.AddBuddyRequest}});var H=e("./requests/buddylist/BlockBuddy");Object.defineProperty(r,"BlockBuddyRequest",{enumerable:!0,get:function(){return H.BlockBuddyRequest}});var J=e("./requests/buddylist/BuddyMessage");Object.defineProperty(r,"BuddyMessageRequest",{enumerable:!0,get:function(){return J.BuddyMessageRequest}});var X=e("./requests/buddylist/GoOnline");Object.defineProperty(r,"GoOnlineRequest",{enumerable:!0,get:function(){return X.GoOnlineRequest}});var W=e("./requests/buddylist/InitBuddyList");Object.defineProperty(r,"InitBuddyListRequest",{enumerable:!0,get:function(){return W.InitBuddyListRequest}});var Q=e("./requests/buddylist/RemoveBuddy");Object.defineProperty(r,"RemoveBuddyRequest",{enumerable:!0,get:function(){return Q.RemoveBuddyRequest}});var Z=e("./requests/buddylist/SetBuddyVariables");Object.defineProperty(r,"SetBuddyVariablesRequest",{enumerable:!0,get:function(){return Z.SetBuddyVariablesRequest}});var $=e("./entities/objects/Room");Object.defineProperty(r,"SFSRoom",{enumerable:!0,get:function(){return $.SFSRoom}}),e("./utils/Helper")},{"./SmartFox":142,"./core/Events":146,"./entities/Data":149,"./entities/Invitation":150,"./entities/match/Conditions":151,"./entities/match/MatchExpression":152,"./entities/match/Properties":153,"./entities/objects/Room":156,"./entities/objects/User":157,"./entities/variables/BuddyVariable":158,"./entities/variables/ItemVariable":159,"./entities/variables/RoomVariable":160,"./entities/variables/UserVariable":161,"./entities/variables/Variable":162,"./requests/Settings":167,"./requests/buddylist/AddBuddy":168,"./requests/buddylist/BlockBuddy":169,"./requests/buddylist/BuddyMessage":170,"./requests/buddylist/GoOnline":171,"./requests/buddylist/InitBuddyList":172,"./requests/buddylist/RemoveBuddy":173,"./requests/buddylist/SetBuddyVariables":174,"./requests/game/CreateSFSGame":175,"./requests/game/InvitationReply":176,"./requests/game/InviteUsers":177,"./requests/game/JoinRoomInvitation":178,"./requests/game/QuickJoinGame":179,"./requests/mmo/SetUserPosition":181,"./requests/system/BanUser":182,"./requests/system/ChangeRoomCapacity":183,"./requests/system/ChangeRoomName":184,"./requests/system/ChangeRoomPasswordState":185,"./requests/system/CreateRoom":186,"./requests/system/Extension":187,"./requests/system/FindRooms":188,"./requests/system/FindUsers":189,"./requests/system/JoinRoom":191,"./requests/system/KickUser":192,"./requests/system/LeaveRoom":193,"./requests/system/Login":194,"./requests/system/Logout":195,"./requests/system/Message":196,"./requests/system/PlayerToSpectator":198,"./requests/system/SetRoomVariables":199,"./requests/system/SetUserVariables":200,"./requests/system/SpectatorToPlayer":201,"./requests/system/SubscribeRoomGroup":202,"./requests/system/UnsubscribeRoomGroup":203,"./utils/ErrorCodes":204,"./utils/Helper":205,"./utils/Logging":206,"./utils/Miscellanea":207}],142:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.SmartFox=void 0;var s=n(e("babel-runtime/core-js/object/seal")),i=n(e("babel-runtime/core-js/object/get-prototype-of")),a=n(e("babel-runtime/helpers/classCallCheck")),o=n(e("babel-runtime/helpers/createClass")),u=n(e("babel-runtime/helpers/possibleConstructorReturn")),l=n(e("babel-runtime/helpers/inherits")),c=e("./controllers/SystemController"),f=e("./controllers/ExtensionController"),h=e("./core/Events"),d=e("./core/Exceptions"),_=e("./core/SocketEngine"),b=e("./managers/UserManager"),p=e("./managers/RoomManager"),m=e("./managers/BuddyManager"),y=e("./requests/Base"),g=e("./requests/system/Handshake"),v=e("./utils/ErrorCodes"),S=e("./utils/Logging"),R=e("./utils/Monitoring"),E=e("./utils/Miscellanea"),O=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,a.default)(this,t);var r=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this));return r._majVersion=1,r._minVersion=7,r._subVersion=6,r._configData=e,r._logger=S.Logger.instance,r._sessionToken=null,r._socketEngine=new _.SocketEngine(r),r._socketEngine.addEventListener(_.SocketEvent.CONNECT,r._onSocketConnect,r),r._socketEngine.addEventListener(_.SocketEvent.DISCONNECT,r._onSocketDisconnect,r),r._socketEngine.addEventListener(_.SocketEvent.DATA,r._onSocketData,r),r._socketEngine.addEventListener(_.SocketEvent.IOERROR,r._onSocketIOError,r),r.connect=r.connect.bind(r),r._controllers={},r._controllers[0]=new c.SystemController(r),r._controllers[1]=new f.ExtensionController(r),r._reset(),r._clientDetails="JavaScript",r.debug=null!=r.config&&r.config.debug,r.debug&&(r._logger.info("SmartFox instance ready"),r._logger.info("SFS2X JavaScript API v"+r.version)),(0,s.default)(r),r}return(0,l.default)(t,e),(0,o.default)(t,[{key:"setClientDetails",value:function(e,t){if(this.isConnected)this._logger.warn("Method setClientDetails must be called before the connection is started");else{e=null!=e?e.replace(":"," "):"",t=null!=t?t.replace(":"," "):"",this._clientDetails=e+":"+t}}},{key:"connect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this.debug&&this._logger.info("Attempting connection to server"),this.isConnected)this._logger.warn("Connection attempt interrupted: already connected");else if(this._socketEngine.isConnecting)this._logger.warn("Connection attempt interrupted: another attempt is already in progress");else{var n=null!=this.config&&null!=this.config.host?this.config.host:null,s=null!=this.config&&null!=this.config.port?this.config.port:null,i=null!=this.config&&this.config.useSSL;null!=e&&(n=e),t>-1&&(s=t),null!=r&&(i=r),null!=n&&"string"==typeof n&&0!==n.length?"number"!=typeof s||s<0||s>65535?this._logger.error("Invalid TCP connection port: "+s):("boolean"!=typeof i&&(i=!1),this._socketEngine.connect(n,s,i)):this._logger.error("Invalid connection host/address")}}},{key:"disconnect",value:function(){this.isConnected&&this._handleClientDisconnection(E.ClientDisconnectionReason.MANUAL)}},{key:"enableLagMonitor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;null!=this.mySelf?(null!=this._lagMonitor&&this._lagMonitor.destroy(),e&&(this._lagMonitor=new R.LagMonitor(this,t,r),this._lagMonitor.start())):this._logger.warn("Lag monitoring requires that you are logged in a Zone; please retry after completing the login process")}},{key:"send",value:function(e){if(this.isConnected){if(null!=e.validate&&null!=e.execute){this.debug&&this._logger.info("Sending request '"+e.constructor.name+"' to server");try{e.validate(this),e.execute(this)}catch(e){if(!(e instanceof d.SFSValidationError&&null!=e.message))throw e;var t=e.message;if(null!=e.errors){t+=":";for(var r=0;r<e.errors.length;r++)e.errors.length>1&&(t+=" "+(r+1)+")"),t+=" "+e.errors[r]}return this._logger.error("Request failed | "+t),!1}return this._socketEngine.send(e.getMessage()),!0}this._logger.error("An invalid request was passed: "+e)}else this._logger.error("You are not connected. Request cannot be sent: "+y.Requests.getNameFromId(e.id))}},{key:"getRoomById",value:function(e){return this.roomManager.getRoomById(e)}},{key:"getRoomByName",value:function(e){return this.roomManager.getRoomByName(e)}},{key:"getRoomList",value:function(){return this.roomManager.getRoomList()}},{key:"getRoomListFromGroup",value:function(e){return this.roomManager.getRoomListFromGroup(e)}},{key:"getJoinedRooms",value:function(){return this.roomManager.getJoinedRooms()}},{key:"_reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null!=this._buddyManager&&(this._buddyManager._clearAll(),this._buddyManager._inited=!1),this._userManager=new b.GlobalUserManager(this),this._roomManager=new p.SFSRoomManager(this),this._buddyManager=new m.SFSBuddyManager(this),null!=this._lagMonitor&&this._lagMonitor.destroy(),this._lagMonitor=null,this._isJoining=!1,this._currentZone=null,this._lastJoinedRoom=null,this._mySelf=null,e&&(this._sessionToken=null)}},{key:"_onSocketConnect",value:function(e){e.success?this.send(new g.HandshakeRequest(this.version,this._clientDetails)):this.dispatchEvent(h.SFSEvent.CONNECTION,{success:!1})}},{key:"_onSocketDisconnect",value:function(e){this.dispatchEvent(h.SFSEvent.CONNECTION_LOST,{reason:e.reason}),this._reset(!0)}},{key:"_onSocketData",value:function(e){var t=e.targetController,r=e.id,n=e.content;null!=t?null!=r?this._controllers[t].handleMessage(n,r):this._logger.error("Incoming message rejected: Command ID is missing"):this._logger.error("Incoming message rejected: Controller ID is missing")}},{key:"_onSocketIOError",value:function(e){this.dispatchEvent(h.SFSEvent.SOCKET_ERROR,{message:e})}},{key:"_handleHandShake",value:function(e){var t=e.get(y.BaseRequest.KEY_ERROR_CODE);if(null==t)this._sessionToken=e.get(g.HandshakeRequest.KEY_SESSION_TOKEN),this._socketEngine.maxMessageSize=e.get(g.HandshakeRequest.KEY_MAX_MESSAGE_SIZE),this._socketEngine.compressionThreshold=e.get(g.HandshakeRequest.KEY_COMPRESSION_THRESHOLD),this.dispatchEvent(h.SFSEvent.CONNECTION,{success:!0});else{var r={success:!1,errorMessage:v.SFSErrorCodes.getErrorMessage(t,e.get(y.BaseRequest.KEY_ERROR_PARAMS)),errorCode:t};this.dispatchEvent(h.SFSEvent.CONNECTION,r)}}},{key:"_handleLogout",value:function(){this._reset()}},{key:"_handleClientDisconnection",value:function(e){this.isConnected&&this._socketEngine.disconnect(e)}},{key:"version",get:function(){return this._majVersion+"."+this._minVersion+"."+this._subVersion}},{key:"config",get:function(){return this._configData}},{key:"logger",get:function(){return this._logger}},{key:"sessionToken",get:function(){return this._sessionToken}},{key:"roomManager",get:function(){return this._roomManager}},{key:"userManager",get:function(){return this._userManager}},{key:"buddyManager",get:function(){return this._buddyManager}},{key:"mySelf",get:function(){return this._mySelf}},{key:"lastJoinedRoom",get:function(){return this._lastJoinedRoom}},{key:"isConnected",get:function(){return null!=this._socketEngine&&this._socketEngine.isConnected}},{key:"maxMessageSize",get:function(){return null!=this._socketEngine?this._socketEngine.maxMessageSize:0}}]),t}(h.EventDispatcher);r.SmartFox=O},{"./controllers/ExtensionController":143,"./controllers/SystemController":144,"./core/Events":146,"./core/Exceptions":147,"./core/SocketEngine":148,"./managers/BuddyManager":163,"./managers/RoomManager":164,"./managers/UserManager":165,"./requests/Base":166,"./requests/system/Handshake":190,"./utils/ErrorCodes":204,"./utils/Logging":206,"./utils/Miscellanea":207,"./utils/Monitoring":208,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],143:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.ExtensionController=void 0;var s=n(e("babel-runtime/core-js/object/freeze")),i=n(e("babel-runtime/helpers/classCallCheck")),a=n(e("babel-runtime/helpers/createClass")),o=e("../core/Events"),u=e("../requests/system/Extension"),l=function(){function e(t){(0,i.default)(this,e),this._sfs=t,this._logger=t.logger,this._id=1,(0,s.default)(this)}return(0,a.default)(e,[{key:"handleMessage",value:function(e,t){this._sfs.debug&&this._logger.info("Handling Extension response");var r={};r.cmd=e.get(u.ExtensionRequest.KEY_CMD),r.params=e.get(u.ExtensionRequest.KEY_PARAMS);var n=e.get(u.ExtensionRequest.KEY_ROOM);null!=n&&(r.room=this._sfs.roomManager.getRoomById(n)),this._sfs.dispatchEvent(o.SFSEvent.EXTENSION_RESPONSE,r)}},{key:"id",get:function(){return this._id}}]),e}();r.ExtensionController=l},{"../core/Events":146,"../requests/system/Extension":187,"babel-runtime/core-js/object/freeze":10,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19}],144:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.SystemController=void 0;var s=n(e("babel-runtime/core-js/get-iterator")),i=n(e("babel-runtime/core-js/array/from")),a=n(e("babel-runtime/core-js/set")),o=n(e("babel-runtime/core-js/object/freeze")),u=n(e("babel-runtime/core-js/map")),l=n(e("babel-runtime/helpers/classCallCheck")),c=n(e("babel-runtime/helpers/createClass")),f=e("../requests/Base"),h=e("../core/Events"),d=e("../utils/ErrorCodes"),_=e("../entities/Data"),b=e("../entities/objects/Room"),p=e("../entities/objects/User"),m=e("../entities/objects/Item"),y=e("../entities/objects/Buddy"),g=e("../entities/Invitation"),v=e("../entities/variables/UserVariable"),S=e("../entities/variables/RoomVariable"),R=e("../entities/variables/ItemVariable"),E=e("../entities/variables/BuddyVariable"),O=e("../utils/Miscellanea"),A=e("../requests/system/Login"),k=e("../requests/system/Logout"),j=e("../requests/system/JoinRoom"),M=e("../requests/system/CreateRoom"),I=e("../requests/system/ChangeRoomName"),T=e("../requests/system/ChangeRoomPasswordState"),C=e("../requests/system/ChangeRoomCapacity"),w=e("../requests/system/Message"),U=e("../requests/system/SetRoomVariables"),D=e("../requests/system/SetUserVariables"),B=e("../requests/system/SubscribeRoomGroup"),F=e("../requests/system/UnsubscribeRoomGroup"),N=e("../requests/system/SpectatorToPlayer"),L=e("../requests/system/PlayerToSpectator"),P=e("../requests/system/FindRooms"),q=e("../requests/system/FindUsers"),Y=e("../requests/game/InviteUsers"),x=e("../requests/mmo/SetMMOItemVariables"),V=e("../requests/mmo/SetUserPosition"),K=e("../requests/buddylist/InitBuddyList"),G=e("../requests/buddylist/AddBuddy"),z=e("../requests/buddylist/RemoveBuddy"),H=e("../requests/buddylist/BlockBuddy"),J=e("../requests/buddylist/GoOnline"),X=e("../requests/buddylist/SetBuddyVariables"),W=function(){function e(t){(0,l.default)(this,e),this._sfs=t,this._logger=t.logger,this._id=0,this._messageHandlers=new u.default,this._initMessageHandlers(),(0,o.default)(this)}return(0,c.default)(e,null,[{key:"KEY_ERROR_CODE",get:function(){return"ec"}},{key:"KEY_ERROR_PARAMS",get:function(){return"ep"}},{key:"ROOM_PARAM",get:function(){return"r"}},{key:"USER_PARAM",get:function(){return"u"}},{key:"USER_COUNT_PARAM",get:function(){return"uc"}},{key:"SPECT_COUNT_PARAM",get:function(){return"sc"}},{key:"DISCONNECTION_REASON_PARAM",get:function(){return"dr"}}]),(0,c.default)(e,[{key:"handleMessage",value:function(e,t){var r=this._messageHandlers.get(t);null!=r?(this._sfs.debug&&this._logger.info("Handling server event: "+r.name+" ("+t+")"),r.handler.call(this,e)):this._logger.warn("Unknown server event received; id: "+t)}},{key:"_initMessageHandlers",value:function(){this._setHandler(f.Requests.Handshake,this._fnHandshake),this._setHandler(f.Requests.Login,this._fnLogin),this._setHandler(f.Requests.Logout,this._fnLogout),this._setHandler(f.Requests.JoinRoom,this._fnJoinRoom),this._setHandler(f.Requests.CreateRoom,this._fnCreateRoom),this._setHandler(f.Requests.ChangeRoomName,this._fnChangeRoomName),this._setHandler(f.Requests.ChangeRoomPassword,this._fnChangeRoomPassword),this._setHandler(f.Requests.ChangeRoomCapacity,this._fnChangeRoomCapacity),this._setHandler(f.Requests.GenericMessage,this._fnGenericMessage),this._setHandler(f.Requests.SetRoomVariables,this._fnSetRoomVariables),this._setHandler(f.Requests.SetUserVariables,this._fnSetUserVariables),this._setHandler(f.Requests.SubscribeRoomGroup,this._fnSubscribeRoomGroup),this._setHandler(f.Requests.UnsubscribeRoomGroup,this._fnUnsubscribeRoomGroup),this._setHandler(f.Requests.SpectatorToPlayer,this._fnSpectatorToPlayer),this._setHandler(f.Requests.PlayerToSpectator,this._fnPlayerToSpectator),this._setHandler(f.Requests.FindRooms,this._fnFindRooms),this._setHandler(f.Requests.FindUsers,this._fnFindUsers),this._setHandler(f.Requests.PingPong,this._fnPingPong),this._setHandler(f.Requests.InitBuddyList,this._fnInitBuddyList),this._setHandler(f.Requests.AddBuddy,this._fnAddBuddy),this._setHandler(f.Requests.RemoveBuddy,this._fnRemoveBuddy),this._setHandler(f.Requests.BlockBuddy,this._fnBlockBuddy),this._setHandler(f.Requests.GoOnline,this._fnGoOnline),this._setHandler(f.Requests.SetBuddyVariables,this._fnSetBuddyVariables),this._setHandler(f.Requests.QuickJoinGame,this._fnQuickJoinGame),this._setHandler(f.Requests.InviteUsers,this._fnInviteUsers),this._setHandler(f.Requests.InvitationReply,this._fnInvitationReply),this._setHandler(f.Requests.SetUserPosition,this._fnSetUserPosition),this._setHandler(1e3,this._fnUserEnterRoom,"UserEnterRoom"),this._setHandler(1001,this._fnUserCountChange,"UserCountChange"),this._setHandler(1002,this._fnUserLost,"UserLost"),this._setHandler(1003,this._fnRoomLost,"RoomLost"),this._setHandler(1004,this._fnUserExitRoom,"UserExitRoom"),this._setHandler(1005,this._fnClientDisconnection,"ClientDisconnection"),this._setHandler(1007,this._fnSetMMOItemVariables,"SetMMOItemVariables")}},{key:"_setHandler",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null==r&&(r=f.Requests.getNameFromId(e)),this._messageHandlers.set(e,{name:r,handler:t})}},{key:"_fnHandshake",value:function(e){this._sfs._handleHandShake(e)}},{key:"_fnLogin",value:function(t){if(null==t.get(e.KEY_ERROR_CODE)){this._populateRoomList(t.get(A.LoginRequest.KEY_ROOMLIST)),this._sfs._mySelf=new p.SFSUser(t.get(A.LoginRequest.KEY_ID),t.get(A.LoginRequest.KEY_USER_NAME),!0),this._sfs.mySelf._setUserManager(this._sfs.userManager),this._sfs.mySelf._privilegeId=t.get(A.LoginRequest.KEY_PRIVILEGE_ID),this._sfs.userManager._addUser(this._sfs.mySelf);var r={};r.zone=t.get(A.LoginRequest.KEY_ZONE_NAME),r.user=this._sfs.mySelf,r.data=t.get(A.LoginRequest.KEY_PARAMS),this._sfs.dispatchEvent(h.SFSEvent.LOGIN,r)}else this._dispatchError(h.SFSEvent.LOGIN_ERROR,t)}},{key:"_fnLogout",value:function(e){this._sfs._handleLogout();var t={};t.zone=e.get(k.LogoutRequest.KEY_ZONE_NAME),this._sfs.dispatchEvent(h.SFSEvent.LOGOUT,t)}},{key:"_fnJoinRoom",value:function(t){if(this._sfs._isJoining=!1,null==t.get(e.KEY_ERROR_CODE)){var r=t.get(j.JoinRoomRequest.KEY_ROOM),n=t.get(j.JoinRoomRequest.KEY_USER_LIST),s=this._sfs.roomManager,i=b.SFSRoom.fromSFSArray(r);i=s._replaceRoom(i,s.containsGroup(i.groupId));for(var a=0;a<n.size();a++){var o=n.get(a),u=this._getOrCreateUser(o,!0,i);i._addUser(u)}i._isJoined=!0,this._sfs._lastJoinedRoom=i;var l={};l.room=i,this._sfs.dispatchEvent(h.SFSEvent.ROOM_JOIN,l)}else this._dispatchError(h.SFSEvent.ROOM_JOIN_ERROR,t)}},{key:"_fnCreateRoom",value:function(t){if(null==t.get(e.KEY_ERROR_CODE)){var r=b.SFSRoom.fromSFSArray(t.get(M.CreateRoomRequest.KEY_ROOM));this._sfs.roomManager._addRoom(r);var n={};n.room=r,this._sfs.dispatchEvent(h.SFSEvent.ROOM_ADD,n)}else this._dispatchError(h.SFSEvent.ROOM_CREATION_ERROR,t)}},{key:"_fnChangeRoomName",value:function(t){if(null==t.get(e.KEY_ERROR_CODE)){var r=t.get(I.ChangeRoomNameRequest.KEY_ROOM),n=this._sfs.roomManager.getRoomById(r);if(null!=n){var s=n.name;this._sfs.roomManager._changeRoomName(n,t.get(I.ChangeRoomNameRequest.KEY_NAME));var i={};i.oldName=s,i.room=n,this._sfs.dispatchEvent(h.SFSEvent.ROOM_NAME_CHANGE,i)}else this._logger.warn("Unexpected RoomNameChange event error; unknown Room id: "+r)}else this._dispatchError(h.SFSEvent.ROOM_NAME_CHANGE_ERROR,t)}},{key:"_fnChangeRoomPassword",value:function(t){if(null==t.get(e.KEY_ERROR_CODE)){var r=t.get(T.ChangeRoomPasswordStateRequest.KEY_ROOM),n=this._sfs.roomManager.getRoomById(r);if(null!=n){this._sfs.roomManager._changeRoomPasswordState(n,t.get(T.ChangeRoomPasswordStateRequest.KEY_PASS));var s={};s.room=n,this._sfs.dispatchEvent(h.SFSEvent.ROOM_PASSWORD_STATE_CHANGE,s)}else this._logger.warn("Unexpected RoomPasswordChange event error; unknown Room id: "+r)}else this._dispatchError(h.SFSEvent.ROOM_PASSWORD_STATE_CHANGE_ERROR,t)}},{key:"_fnChangeRoomCapacity",value:function(t){if(null==t.get(e.KEY_ERROR_CODE)){var r=t.get(C.ChangeRoomCapacityRequest.KEY_ROOM),n=this._sfs.roomManager.getRoomById(r);if(null!=n){this._sfs.roomManager._changeRoomCapacity(n,t.get(C.ChangeRoomCapacityRequest.KEY_USER_SIZE),t.get(C.ChangeRoomCapacityRequest.KEY_SPEC_SIZE));var s={};s.room=n,this._sfs.dispatchEvent(h.SFSEvent.ROOM_CAPACITY_CHANGE,s)}else this._logger.warn("Unexpected RoomCapacityChange event error; unknown Room id: "+r)}else this._dispatchError(h.SFSEvent.ROOM_CAPACITY_CHANGE_ERROR,t)}},{key:"_fnGenericMessage",value:function(e){switch(e.get(w.GenericMessageRequest.KEY_MESSAGE_TYPE)){case w.GenericMessageType.PUBLIC_MSG:this._handlePublicMessage(e);break;case w.GenericMessageType.PRIVATE_MSG:this._handlePrivateMessage(e);break;case w.GenericMessageType.BUDDY_MSG:this._handleBuddyMessage(e);break;case w.GenericMessageType.MODERATOR_MSG:this._handleModMessage(e);break;case w.GenericMessageType.ADMING_MSG:this._handleAdminMessage(e);break;case w.GenericMessageType.OBJECT_MSG:this._handleObjectMessage(e)}}},{key:"_handlePublicMessage",value:function(e){var t=e.get(w.GenericMessageRequest.KEY_ROOM_ID),r=this._sfs.roomManager.getRoomById(t);if(null!=r){var n={};n.room=r,n.sender=this._sfs.userManager.getUserById(e.get(w.GenericMessageRequest.KEY_USER_ID)),n.message=e.get(w.GenericMessageRequest.KEY_MESSAGE),n.data=e.get(w.GenericMessageRequest.KEY_XTRA_PARAMS),this._sfs.dispatchEvent(h.SFSEvent.PUBLIC_MESSAGE,n)}else this._logger.warn("Unexpected PublicMessage event error; unknown Room id: "+t)}},{key:"_handlePrivateMessage",value:function(e){var t=e.get(w.GenericMessageRequest.KEY_USER_ID),r=this._sfs.userManager.getUserById(t);if(null==r){if(null==e.get(w.GenericMessageRequest.KEY_SENDER_DATA))return void this._logger.warn("Unexpected PublicMessage event error; missing sender details");r=p.SFSUser.fromSFSArray(e.get(w.GenericMessageRequest.KEY_SENDER_DATA))}var n={};n.sender=r,n.message=e.get(w.GenericMessageRequest.KEY_MESSAGE),n.data=e.get(w.GenericMessageRequest.KEY_XTRA_PARAMS),this._sfs.dispatchEvent(h.SFSEvent.PRIVATE_MESSAGE,n)}},{key:"_handleBuddyMessage",value:function(e){var t=e.get(w.GenericMessageRequest.KEY_USER_ID),r=this._sfs.buddyManager.getBuddyById(t),n={};n.isItMe=this._sfs.mySelf.id===t,n.buddy=r,n.message=e.get(w.GenericMessageRequest.KEY_MESSAGE),n.data=e.get(w.GenericMessageRequest.KEY_XTRA_PARAMS),this._sfs.dispatchEvent(h.SFSBuddyEvent.BUDDY_MESSAGE,n)}},{key:"_handleObjectMessage",value:function(e){var t={};t.sender=this._sfs.userManager.getUserById(e.get(w.GenericMessageRequest.KEY_USER_ID)),t.message=e.get(w.GenericMessageRequest.KEY_XTRA_PARAMS),this._sfs.dispatchEvent(h.SFSEvent.OBJECT_MESSAGE,t)}},{key:"_handleModMessage",value:function(e){var t={};t.sender=p.SFSUser.fromSFSArray(e.get(w.GenericMessageRequest.KEY_SENDER_DATA)),t.message=e.get(w.GenericMessageRequest.KEY_MESSAGE),t.data=e.get(w.GenericMessageRequest.KEY_XTRA_PARAMS),this._sfs.dispatchEvent(h.SFSEvent.MODERATOR_MESSAGE,t)}},{key:"_handleAdminMessage",value:function(e){var t={};t.sender=p.SFSUser.fromSFSArray(e.get(w.GenericMessageRequest.KEY_SENDER_DATA)),t.message=e.get(w.GenericMessageRequest.KEY_MESSAGE),t.data=e.get(w.GenericMessageRequest.KEY_XTRA_PARAMS),this._sfs.dispatchEvent(h.SFSEvent.ADMIN_MESSAGE,t)}},{key:"_fnSetRoomVariables",value:function(e){var t=e.get(U.SetRoomVariablesRequest.KEY_VAR_ROOM),r=e.get(U.SetRoomVariablesRequest.KEY_VAR_LIST),n=this._sfs.roomManager.getRoomById(t),s=new a.default;if(null!=n){for(var o=0;o<r.size();o++){var u=S.SFSRoomVariable.fromSFSArray(r.get(o));n._setVariable(u),s.add(u.name)}var l={};l.changedVars=(0,i.default)(s),l.room=n,this._sfs.dispatchEvent(h.SFSEvent.ROOM_VARIABLES_UPDATE,l)}else this._logger.warn("Unexpected RoomVariablesUpdate event error; unknown Room id: "+t)}},{key:"_fnSetUserVariables",value:function(e){var t=e.get(D.SetUserVariablesRequest.KEY_USER),r=e.get(D.SetUserVariablesRequest.KEY_VAR_LIST),n=this._sfs.userManager.getUserById(t),s=new a.default;if(null!=n){for(var o=0;o<r.size();o++){var u=v.SFSUserVariable.fromSFSArray(r.get(o));n._setVariable(u),s.add(u.name)}var l={};l.changedVars=(0,i.default)(s),l.user=n,this._sfs.dispatchEvent(h.SFSEvent.USER_VARIABLES_UPDATE,l)}else this._logger.warn("Unexpected UserVariablesUpdate event error; unknown User id: "+t)}},{key:"_fnSubscribeRoomGroup",value:function(t){if(null==t.get(e.KEY_ERROR_CODE)){var r=t.get(B.SubscribeRoomGroupRequest.KEY_GROUP_ID),n=t.get(B.SubscribeRoomGroupRequest.KEY_ROOM_LIST);this._sfs.roomManager.containsGroup(r)&&this._logger.warn("Unexpected SubscribeRoomGroup event error; group already subscribed: "+r),this._populateRoomList(n);var s={};s.groupId=r,s.newRooms=this._sfs.roomManager.getRoomListFromGroup(r),this._sfs.dispatchEvent(h.SFSEvent.ROOM_GROUP_SUBSCRIBE,s)}else this._dispatchError(h.SFSEvent.ROOM_GROUP_SUBSCRIBE_ERROR,t)}},{key:"_fnUnsubscribeRoomGroup",value:function(t){if(null==t.get(e.KEY_ERROR_CODE)){var r=t.get(F.UnsubscribeRoomGroupRequest.KEY_GROUP_ID);this._sfs.roomManager.containsGroup(r)||this._logger.warn("Unexpected UnsubscribeRoomGroup event error; group not found: "+r+" (maybe never subscribed, or the Room Manager doesn't contain Rooms belonging to that Group)"),this._sfs.roomManager._removeGroup(r);var n={};n.groupId=r,this._sfs.dispatchEvent(h.SFSEvent.ROOM_GROUP_UNSUBSCRIBE,n)}else this._dispatchError(h.SFSEvent.ROOM_GROUP_UNSUBSCRIBE_ERROR,t)}},{key:"_fnSpectatorToPlayer",value:function(t){if(null==t.get(e.KEY_ERROR_CODE)){var r=t.get(N.SpectatorToPlayerRequest.KEY_ROOM_ID),n=t.get(N.SpectatorToPlayerRequest.KEY_USER_ID),s=t.get(N.SpectatorToPlayerRequest.KEY_PLAYER_ID),i=this._sfs.userManager.getUserById(n),a=this._sfs.roomManager.getRoomById(r);if(null!=a)if(null!=i)if(i.isJoinedInRoom(a)){i._setPlayerId(s,a);var o={};o.room=a,o.user=i,o.playerId=s,this._sfs.dispatchEvent(h.SFSEvent.SPECTATOR_TO_PLAYER,o)}else this._logger.warn("Unexpected SpectatorToPlayer event error; User "+i+" not in Room "+a);else this._logger.warn("Unexpected SpectatorToPlayer event error; unknown User id: "+n);else this._logger.warn("Unexpected SpectatorToPlayer event error; unknown Room id: "+r)}else this._dispatchError(h.SFSEvent.SPECTATOR_TO_PLAYER_ERROR,t)}},{key:"_fnPlayerToSpectator",value:function(t){if(null==t.get(e.KEY_ERROR_CODE)){var r=t.get(L.PlayerToSpectatorRequest.KEY_ROOM_ID),n=t.get(L.PlayerToSpectatorRequest.KEY_USER_ID),s=this._sfs.userManager.getUserById(n),i=this._sfs.roomManager.getRoomById(r);if(null!=i)if(null!=s)if(s.isJoinedInRoom(i)){s._setPlayerId(-1,i);var a={};a.room=i,a.user=s,this._sfs.dispatchEvent(h.SFSEvent.PLAYER_TO_SPECTATOR,a)}else this._logger.warn("Unexpected PlayerToSpectator event error; User "+s+" not in Room "+i);else this._logger.warn("Unexpected SpectatorToPlayer event error; unknown User id: "+n);else this._logger.warn("Unexpected SpectatorToPlayer event error; unknown Room id: "+r)}else this._dispatchError(h.SFSEvent.PLAYER_TO_SPECTATOR_ERROR,t)}},{key:"_fnPingPong",value:function(e){var t={};t.lagValue=this._sfs._lagMonitor._onPingPong(),this._sfs.dispatchEvent(h.SFSEvent.PING_PONG,t)}},{key:"_fnFindRooms",value:function(e){for(var t=e.get(P.FindRoomsRequest.KEY_FILTERED_ROOMS),r=[],n=0;n<t.size();n++){var s=t.get(n),i=b.SFSRoom.fromSFSArray(s),a=this._sfs.roomManager.getRoomById(i.id);null!=a&&(i._isJoined=a._isJoined),r.push(i)}var o={};o.rooms=r,this._sfs.dispatchEvent(h.SFSEvent.ROOM_FIND_RESULT,o)}},{key:"_fnFindUsers",value:function(e){for(var t=e.get(q.FindUsersRequest.KEY_FILTERED_USERS),r=[],n=this._sfs.mySelf,s=0;s<t.size();s++){var i=t.get(s),a=p.SFSUser.fromSFSArray(i);a.id===n.id&&(a=n),r.push(a)}var o={};o.users=r,this._sfs.dispatchEvent(h.SFSEvent.USER_FIND_RESULT,o)}},{key:"_fnQuickJoinGame",value:function(t){null!=t.get(e.KEY_ERROR_CODE)&&this._dispatchError(h.SFSEvent.ROOM_JOIN_ERROR,t)}},{key:"_fnInviteUsers",value:function(e){var t=null;t=null!=e.get(Y.InviteUsersRequest.KEY_USER_ID)?this._sfs.userManager.getUserById(e.get(Y.InviteUsersRequest.KEY_USER_ID)):p.SFSUser.fromSFSArray(e.get(Y.InviteUsersRequest.KEY_USER));var r=e.get(Y.InviteUsersRequest.KEY_TIME),n=e.get(Y.InviteUsersRequest.KEY_INVITATION_ID),s=e.get(Y.InviteUsersRequest.KEY_PARAMS),i=new g.SFSInvitation(t,this._sfs.mySelf,r,s);i._id=n;var a={};a.invitation=i,this._sfs.dispatchEvent(h.SFSEvent.INVITATION,a)}},{key:"_fnInvitationReply",value:function(t){if(null==t.get(e.KEY_ERROR_CODE)){var r=null;r=null!=t.get(Y.InviteUsersRequest.KEY_USER_ID)?this._sfs.userManager.getUserById(t.get(Y.InviteUsersRequest.KEY_USER_ID)):p.SFSUser.fromSFSArray(t.get(Y.InviteUsersRequest.KEY_USER));var n=t.get(Y.InviteUsersRequest.KEY_REPLY_ID),s=t.get(Y.InviteUsersRequest.KEY_PARAMS),i={};i.invitee=r,i.reply=n,i.data=s,this._sfs.dispatchEvent(h.SFSEvent.INVITATION_REPLY,i)}else this._dispatchError(h.SFSEvent.INVITATION_REPLY_ERROR,t)}},{key:"_fnSetUserPosition",value:function(e){var t=e.get(V.SetUserPositionRequest.KEY_ROOM),r=this._sfs.roomManager.getRoomById(t),n=e.get(V.SetUserPositionRequest.KEY_MINUS_USER_LIST),i=e.get(V.SetUserPositionRequest.KEY_PLUS_USER_LIST),a=e.get(V.SetUserPositionRequest.KEY_MINUS_ITEM_LIST),o=e.get(V.SetUserPositionRequest.KEY_PLUS_ITEM_LIST),u=[],l=[],c=[],f=[];if(null!=n){var d=!0,b=!1,p=void 0;try{for(var y,g=(0,s.default)(n);!(d=(y=g.next()).done);d=!0){var v=y.value,S=r.getUserById(v);null!=S&&(r._removeUser(S),l.push(S))}}catch(e){b=!0,p=e}finally{try{!d&&g.return&&g.return()}finally{if(b)throw p}}}if(null!=i)for(var R=0;R<i.size();R++){var E=i.get(R),O=this._getOrCreateUser(E,!0,r);u.push(O),r._addUser(O);var A=E.get(5);null!=A&&(O._aoiEntryPoint=_.Vec3D.fromArray(A))}if(null!=a){var k=!0,j=!1,M=void 0;try{for(var I,T=(0,s.default)(a);!(k=(I=T.next()).done);k=!0){var C=I.value,w=r.getMMOItem(C);null!=w&&(r._removeItem(w),f.push(w))}}catch(e){j=!0,M=e}finally{try{!k&&T.return&&T.return()}finally{if(j)throw M}}}if(null!=o)for(var U=0;U<o.size();U++){var D=o.get(U),B=m.MMOItem.fromSFSArray(D);c.push(B),r._addMMOItem(B);var F=D.get(2);null!=F&&(B._aoiEntryPoint=_.Vec3D.fromArray(F))}var N={};N.addedItems=c,N.removedItems=f,N.removedUsers=l,N.addedUsers=u,N.room=r,this._sfs.dispatchEvent(h.SFSEvent.PROXIMITY_LIST_UPDATE,N)}},{key:"_fnInitBuddyList",value:function(t){if(null==t.get(e.KEY_ERROR_CODE)){var r=t.get(K.InitBuddyListRequest.KEY_BLIST),n=t.get(K.InitBuddyListRequest.KEY_MY_VARS),s=t.get(K.InitBuddyListRequest.KEY_BUDDY_STATES);this._sfs.buddyManager._clearAll();for(var i=0;i<r.size();i++){var a=y.SFSBuddy.fromSFSArray(r.get(i));this._sfs.buddyManager._addBuddy(a)}null!=s&&this._sfs.buddyManager._setBuddyStates(s);for(var o=[],u=0;u<n.size();u++){var l=E.SFSBuddyVariable.fromSFSArray(n.get(u));o.push(l)}this._sfs.buddyManager._setMyVariables(o),this._sfs.buddyManager._setInited();var c={};c.buddyList=this._sfs.buddyManager.getBuddyList(),c.myVariables=this._sfs.buddyManager.getMyVariables(),this._sfs.dispatchEvent(h.SFSBuddyEvent.BUDDY_LIST_INIT,c)}else this._dispatchError(h.SFSBuddyEvent.BUDDY_ERROR,t)}},{key:"_fnAddBuddy",value:function(t){if(null==t.get(e.KEY_ERROR_CODE)){var r=y.SFSBuddy.fromSFSArray(t.get(G.AddBuddyRequest.KEY_BUDDY_NAME));this._sfs.buddyManager._addBuddy(r);var n={};n.buddy=r,this._sfs.dispatchEvent(h.SFSBuddyEvent.BUDDY_ADD,n)}else this._dispatchError(h.SFSBuddyEvent.BUDDY_ERROR,t)}},{key:"_fnRemoveBuddy",value:function(t){if(null==t.get(e.KEY_ERROR_CODE)){var r=t.get(z.RemoveBuddyRequest.KEY_BUDDY_NAME),n=this._sfs.buddyManager._removeBuddyByName(r);if(null!=n){var s={};s.buddy=n,this._sfs.dispatchEvent(h.SFSBuddyEvent.BUDDY_REMOVE,s)}else this._logger.warn("Unexpected RemoveBuddy event error; can't find "+r+" in local buddy list")}else this._dispatchError(h.SFSBuddyEvent.BUDDY_ERROR,t)}},{key:"_fnBlockBuddy",value:function(t){if(null==t.get(e.KEY_ERROR_CODE)){var r=t.get(H.BlockBuddyRequest.KEY_BUDDY_NAME),n=this._sfs.buddyManager.getBuddyByName(r);null!=t.get(H.BlockBuddyRequest.KEY_BUDDY)?(n=y.SFSBuddy.fromSFSArray(t.get(H.BlockBuddyRequest.KEY_BUDDY)),this._sfs.buddyManager._addBuddy(n)):null!=n?n._isBlocked=t.get(H.BlockBuddyRequest.KEY_BUDDY_BLOCK_STATE):this._logger.warn("Unexpected BlockBuddy event error; can't find "+r+" in local buddy list");var s={};s.buddy=n,this._sfs.dispatchEvent(h.SFSBuddyEvent.BUDDY_BLOCK,s)}else this._dispatchError(h.SFSBuddyEvent.BUDDY_ERROR,t)}},{key:"_fnGoOnline",value:function(t){if(null==t.get(e.KEY_ERROR_CODE)){var r=t.get(J.GoOnlineRequest.KEY_BUDDY_NAME),n=this._sfs.buddyManager.getBuddyByName(r),s=r===this._sfs.mySelf.name,i=t.get(J.GoOnlineRequest.KEY_ONLINE),a=i===y.BuddyOnlineState.ONLINE,o=!0;if(s)this._sfs.buddyManager.getMyOnlineState()!=a&&(this._logger.warn("Unexpected GoOnline event error; current user's online state is not in synch with the server; resynching to: "+a),this._sfs.buddyManager._setMyOnlineState(a));else{if(null==n)return void this._logger.warn("Unexpected GoOnline event error; can't find "+r+" in local buddy list");n._id=t.get(J.GoOnlineRequest.KEY_BUDDY_ID),n._setVariable(new E.SFSBuddyVariable(E.ReservedBuddyVariables.BV_ONLINE,a)),i===y.BuddyOnlineState.LEFT_THE_SERVER&&n._clearVolatileVariables(),o=this._sfs.buddyManager.getMyOnlineState()}if(o){var u={};u.buddy=n,u.isItMe=s,this._sfs.dispatchEvent(h.SFSBuddyEvent.BUDDY_ONLINE_STATE_CHANGE,u)}}else this._dispatchError(h.SFSBuddyEvent.BUDDY_ERROR,t)}},{key:"_fnSetBuddyVariables",value:function(t){if(null==t.get(e.KEY_ERROR_CODE)){for(var r=t.get(X.SetBuddyVariablesRequest.KEY_BUDDY_NAME),n=t.get(X.SetBuddyVariablesRequest.KEY_BUDDY_VARS),s=this._sfs.buddyManager.getBuddyByName(r),i=r===this._sfs.mySelf.name,a=[],o=[],u=!0,l=0;l<n.size();l++){var c=E.SFSBuddyVariable.fromSFSArray(n.get(l));o.push(c),a.push(c.name)}if(i)this._sfs.buddyManager._setMyVariables(o);else{if(null==s)return void this._logger.warn("Unexpected SetBuddyVariables event error; can't find "+r+" in local buddy list");s._setVariables(o),u=this._sfs.buddyManager.getMyOnlineState()}if(u){var f={};f.buddy=s,f.isItMe=i,f.changedVars=a,this._sfs.dispatchEvent(h.SFSBuddyEvent.BUDDY_VARIABLES_UPDATE,f)}}else this._dispatchError(h.SFSBuddyEvent.BUDDY_ERROR,t)}},{key:"_fnUserEnterRoom",value:function(t){var r=this._sfs.roomManager.getRoomById(t.get(e.ROOM_PARAM));if(null!=r){var n=t.get(e.USER_PARAM),s=this._getOrCreateUser(n,!0,r);r._addUser(s);var i={};i.user=s,i.room=r,this._sfs.dispatchEvent(h.SFSEvent.USER_ENTER_ROOM,i)}}},{key:"_fnUserCountChange",value:function(t){var r=this._sfs.roomManager.getRoomById(t.get(e.ROOM_PARAM));if(null!=r){var n=t.get(e.USER_COUNT_PARAM),s=null!=t.get(e.SPECT_COUNT_PARAM)?t.get(e.SPECT_COUNT_PARAM):0;r._userCount=n,r._specCount=s;var i={};i.room=r,i.uCount=n,i.sCount=s,this._sfs.dispatchEvent(h.SFSEvent.USER_COUNT_CHANGE,i)}}},{key:"_fnUserLost",value:function(t){var r=this._sfs.userManager.getUserById(t.get(e.USER_PARAM));if(null!=r){var n=this._sfs.roomManager.getUserRooms(r);this._sfs.roomManager._removeUser(r),this._sfs.userManager._removeUserReference(r,!0);var i=!0,a=!1,o=void 0;try{for(var u,l=(0,s.default)(n);!(i=(u=l.next()).done);i=!0){var c=u.value,f={};f.user=r,f.room=c,this._sfs.dispatchEvent(h.SFSEvent.USER_EXIT_ROOM,f)}}catch(e){a=!0,o=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw o}}}}},{key:"_fnRoomLost",value:function(t){var r=this._sfs.roomManager.getRoomById(t.get(e.ROOM_PARAM));if(null!=r){this._sfs.roomManager._removeRoom(r);var n=!0,i=!1,a=void 0;try{for(var o,u=(0,s.default)(r.getUserList());!(n=(o=u.next()).done);n=!0){var l=o.value;this._sfs.userManager._removeUser(l)}}catch(e){i=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}var c={};c.room=r,this._sfs.dispatchEvent(h.SFSEvent.ROOM_REMOVE,c)}}},{key:"_fnUserExitRoom",value:function(t){var r=this._sfs.roomManager.getRoomById(t.get(e.ROOM_PARAM)),n=this._sfs.userManager.getUserById(t.get(e.USER_PARAM));if(null!=r&&null!=n){r._removeUser(n),this._sfs.userManager._removeUser(n),n.isItMe&&r.isJoined&&(r._isJoined=!1,0!==this._sfs.roomManager.getJoinedRooms().length&&this._sfs._lastJoinedRoom!==r||(this._sfs._lastJoinedRoom=null),r._isManaged||this._sfs.roomManager._removeRoom(r));var s={};s.user=n,s.room=r,this._sfs.dispatchEvent(h.SFSEvent.USER_EXIT_ROOM,s)}else this._logger.debug("Failed to handle UserExit event; Room: "+r+", User: "+n)}},{key:"_fnClientDisconnection",value:function(t){var r=t.get(e.DISCONNECTION_REASON_PARAM);this._sfs._handleClientDisconnection(O.ClientDisconnectionReason.getReason(r))}},{key:"_fnSetMMOItemVariables",value:function(e){var t=e.get(x.SetMMOItemVariables.KEY_ROOM_ID),r=e.get(x.SetMMOItemVariables.KEY_ITEM_ID),n=e.get(x.SetMMOItemVariables.KEY_VAR_LIST),s=this._sfs.roomManager.getRoomById(t),o=new a.default;if(null!=s){var u=s.getMMOItem(r);if(null!=u){for(var l=0;l<n.size();l++){var c=R.MMOItemVariable.fromSFSArray(n.get(l));u._setVariable(c),o.add(c.name)}var f={};f.changedVars=(0,i.default)(o),f.mmoItem=u,f.room=s,this._sfs.dispatchEvent(h.SFSEvent.MMOITEM_VARIABLES_UPDATE,f)}else this._logger.warn("Unexpected MMOItemVariablesUpdate event error; unknown MMOItem id: "+r)}else this._logger.warn("Unexpected MMOItemVariablesUpdate event error; unknown MMORoom id: "+t)}},{key:"_dispatchError",value:function(t,r){var n={};n.errorCode=r.get(e.KEY_ERROR_CODE),n.errorMessage=d.SFSErrorCodes.getErrorMessage(n.errorCode,r.get(e.KEY_ERROR_PARAMS)),this._sfs.dispatchEvent(t,n)}},{key:"_populateRoomList",value:function(e){for(var t=0;t<e.size();t++){var r=b.SFSRoom.fromSFSArray(e.get(t));this._sfs.roomManager._replaceRoom(r)}}},{key:"_getOrCreateUser",value:function(e,t,r){var n=e.get(0),s=this._sfs.userManager.getUserById(n);if(null==s)(s=p.SFSUser.fromSFSArray(e,r))._setUserManager(this._sfs.userManager);else{s._setPlayerId(e.get(3),r);var i=e.get(4);if(null!=i)for(var a=0;a<i.size();a++)s._setVariable(v.SFSUserVariable.fromSFSArray(i.get(a)))}return t&&this._sfs.userManager._addUser(s),s}},{key:"id",get:function(){return this._id}}]),e}();r.SystemController=W},{"../core/Events":146,"../entities/Data":149,"../entities/Invitation":150,"../entities/objects/Buddy":154,"../entities/objects/Item":155,"../entities/objects/Room":156,"../entities/objects/User":157,"../entities/variables/BuddyVariable":158,"../entities/variables/ItemVariable":159,"../entities/variables/RoomVariable":160,"../entities/variables/UserVariable":161,"../requests/Base":166,"../requests/buddylist/AddBuddy":168,"../requests/buddylist/BlockBuddy":169,"../requests/buddylist/GoOnline":171,"../requests/buddylist/InitBuddyList":172,"../requests/buddylist/RemoveBuddy":173,"../requests/buddylist/SetBuddyVariables":174,"../requests/game/InviteUsers":177,"../requests/mmo/SetMMOItemVariables":180,"../requests/mmo/SetUserPosition":181,"../requests/system/ChangeRoomCapacity":183,"../requests/system/ChangeRoomName":184,"../requests/system/ChangeRoomPasswordState":185,"../requests/system/CreateRoom":186,"../requests/system/FindRooms":188,"../requests/system/FindUsers":189,"../requests/system/JoinRoom":191,"../requests/system/Login":194,"../requests/system/Logout":195,"../requests/system/Message":196,"../requests/system/PlayerToSpectator":198,"../requests/system/SetRoomVariables":199,"../requests/system/SetUserVariables":200,"../requests/system/SpectatorToPlayer":201,"../requests/system/SubscribeRoomGroup":202,"../requests/system/UnsubscribeRoomGroup":203,"../utils/ErrorCodes":204,"../utils/Miscellanea":207,"babel-runtime/core-js/array/from":1,"babel-runtime/core-js/get-iterator":2,"babel-runtime/core-js/map":3,"babel-runtime/core-js/object/freeze":10,"babel-runtime/core-js/set":15,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19}],145:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.SFSDataSerializer=void 0;var s=n(e("babel-runtime/core-js/object/seal")),i=n(e("babel-runtime/core-js/get-iterator")),a=n(e("babel-runtime/helpers/classCallCheck")),o=n(e("babel-runtime/helpers/createClass")),u=n(e("babel-runtime/core-js/symbol")),l=e("../entities/Data"),c=(0,u.default)(),f=(0,u.default)(),h=function(){function e(t){if((0,a.default)(this,e),t!==f)throw"SFSDataSerializer is a singleton class; you can't instantiate it"}return(0,o.default)(e,[{key:"object2binary",value:function(e){var t=new DataStream(new ArrayBuffer(0),0,DataStream.BIG_ENDIAN);return t.writeInt8(l.SFSDataType.SFS_OBJECT),t.writeInt16(e.size()),this.obj2bin(e,t),new Uint8Array(t.buffer)}},{key:"obj2bin",value:function(e,t){var r=!0,n=!1,s=void 0;try{for(var a,o=(0,i.default)(e.keys());!(r=(a=o.next()).done);r=!0){var u=a.value,l=e.getWrappedItem(u);this.encodeSFSObjectKey(t,u),this.encodeObject(t,l)}}catch(e){n=!0,s=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw s}}}},{key:"array2binary",value:function(e){var t=new DataStream(new ArrayBuffer(0),0,DataStream.BIG_ENDIAN);return t.writeInt8(l.SFSDataType.SFS_ARRAY),t.writeInt16(e.size()),this.arr2bin(e,t),new Uint8Array(t.buffer)}},{key:"arr2bin",value:function(e,t){for(var r=0;r<e.size();r++){var n=e.getWrappedItem(r);this.encodeObject(t,n)}}},{key:"encodeSFSObjectKey",value:function(e,t){e.writeInt16(t.length),e.writeUint8Array(new TextEncoder("utf-8").encode(t))}},{key:"encodeObject",value:function(e,t){var r=t.type;if(r===l.SFSDataType.NULL)this.binEncode_NULL(e,t);else if(r===l.SFSDataType.BOOL)this.binEncode_BOOL(e,t);else if(r===l.SFSDataType.BOOL_ARRAY)this.binEncode_BOOL_ARRAY(e,t);else if(r===l.SFSDataType.BYTE)this.binEncode_BYTE(e,t);else if(r===l.SFSDataType.BYTE_ARRAY)this.binEncode_BYTE_ARRAY(e,t);else if(r===l.SFSDataType.SHORT)this.binEncode_SHORT(e,t);else if(r===l.SFSDataType.SHORT_ARRAY)this.binEncode_SHORT_ARRAY(e,t);else if(r===l.SFSDataType.INT)this.binEncode_INT(e,t);else if(r===l.SFSDataType.INT_ARRAY)this.binEncode_INT_ARRAY(e,t);else if(r===l.SFSDataType.LONG)this.binEncode_LONG(e,t);else if(r===l.SFSDataType.LONG_ARRAY)this.binEncode_LONG_ARRAY(e,t);else if(r===l.SFSDataType.FLOAT)this.binEncode_FLOAT(e,t);else if(r===l.SFSDataType.FLOAT_ARRAY)this.binEncode_FLOAT_ARRAY(e,t);else if(r===l.SFSDataType.DOUBLE)this.binEncode_DOUBLE(e,t);else if(r===l.SFSDataType.DOUBLE_ARRAY)this.binEncode_DOUBLE_ARRAY(e,t);else if(r===l.SFSDataType.UTF_STRING)this.binEncode_UTF_STRING(e,t);else if(r===l.SFSDataType.TEXT)this.binEncode_TEXT(e,t);else if(r===l.SFSDataType.UTF_STRING_ARRAY)this.binEncode_UTF_STRING_ARRAY(e,t);else if(r===l.SFSDataType.SFS_ARRAY)e.writeUint8Array(this.array2binary(t.value));else{if(r!==l.SFSDataType.SFS_OBJECT)throw"Unknow SFSDataType ID: "+r;e.writeUint8Array(this.object2binary(t.value))}return e}},{key:"binEncode_NULL",value:function(e,t){e.writeUint8(t.type)}},{key:"binEncode_BOOL",value:function(e,t){e.writeUint8(t.type),e.writeUint8(t.value?1:0)}},{key:"binEncode_BOOL_ARRAY",value:function(e,t){var r=t.value;e.writeUint8(t.type),e.writeUint16(r.length);for(var n=0;n<r.length;n++)e.writeUint8(r[n]?1:0)}},{key:"binEncode_BYTE",value:function(e,t){e.writeUint8(t.type),e.writeUint8(t.value)}},{key:"binEncode_BYTE_ARRAY",value:function(e,t){var r=t.value;e.writeUint8(t.type),e.writeUint32(r.length),e.writeUint8Array(new Uint8Array(t.value))}},{key:"binEncode_SHORT",value:function(e,t){e.writeUint8(t.type),e.writeUint16(t.value)}},{key:"binEncode_SHORT_ARRAY",value:function(e,t){var r=t.value;e.writeUint8(t.type),e.writeUint16(r.length);for(var n=0;n<r.length;n++)e.writeUint16(r[n])}},{key:"binEncode_INT",value:function(e,t){e.writeUint8(t.type),e.writeUint32(t.value)}},{key:"binEncode_INT_ARRAY",value:function(e,t){var r=t.value;e.writeUint8(t.type),e.writeUint16(r.length);for(var n=0;n<r.length;n++)e.writeUint32(r[n])}},{key:"binEncode_LONG",value:function(e,t){var r=t.value,n=Math.floor(r/Math.pow(2,32)),s=r%Math.pow(2,32);e.writeUint8(t.type),e.writeInt32(n),e.writeInt32(s)}},{key:"binEncode_LONG_ARRAY",value:function(e,t){var r=t.value;e.writeUint8(t.type),e.writeUint16(r.length);for(var n=0;n<r.length;n++){var s=r[n],i=Math.floor(s/Math.pow(2,32)),a=s%Math.pow(2,32);e.writeInt32(i),e.writeInt32(a)}}},{key:"binEncode_FLOAT",value:function(e,t){e.writeUint8(t.type),e.writeFloat32(t.value)}},{key:"binEncode_FLOAT_ARRAY",value:function(e,t){var r=t.value;e.writeUint8(t.type),e.writeUint16(r.length);for(var n=0;n<r.length;n++)e.writeFloat32(r[n])}},{key:"binEncode_DOUBLE",value:function(e,t){e.writeUint8(t.type),e.writeFloat64(t.value)}},{key:"binEncode_DOUBLE_ARRAY",value:function(e,t){var r=t.value;e.writeUint8(t.type),e.writeUint16(r.length);for(var n=0;n<r.length;n++)e.writeFloat64(r[n])}},{key:"binEncode_UTF_STRING",value:function(e,t){var r=new TextEncoder("utf-8").encode(t.value);e.writeUint8(t.type),e.writeUint16(r.length),e.writeUint8Array(r)}},{key:"binEncode_TEXT",value:function(e,t){var r=new TextEncoder("utf-8").encode(t.value);e.writeUint8(t.type),e.writeUint32(r.length),e.writeUint8Array(r)}},{key:"binEncode_UTF_STRING_ARRAY",value:function(e,t){var r=t.value;e.writeUint8(t.type),e.writeUint16(r.length);for(var n=0;n<r.length;n++){var s=new TextEncoder("utf-8").encode(r[n]);e.writeUint16(s.byteLength),e.writeUint8Array(s)}}},{key:"binary2object",value:function(e){if(e.byteLength<3)throw"Can't decode an SFSObject. Byte data is insufficient. Size: "+e.byteLength+" bytes";return this.decodeSFSObject(new DataStream(e,0,DataStream.BIG_ENDIAN))}},{key:"binary2array",value:function(e){if(e.byteLength<3)throw"Can't decode an SFSArray. Byte data is insufficient. Size: "+e.byteLength+" bytes";return this.decodeSFSArray(new DataStream(e,0,DataStream.BIG_ENDIAN))}},{key:"decodeSFSObject",value:function(e){var t=new l.SFSObject,r=e.readUint8();if(r!==l.SFSDataType.SFS_OBJECT)throw"Invalid SFSDataType. Expected: "+l.SFSDataType.SFS_OBJECT+", found: "+r;var n=e.readUint16();if(n<0)throw"Can't decode SFSObject. Size is negative: "+n;try{for(var s=0;s<n;s++){var i=e.readUint16();if(i<0||i>255)throw"Invalid SFSObject key length. Found: "+i;var a=e.readUint8Array(i),o=String.fromCharCode.apply(String,a),u=this.decodeObject(e);if(null==u)throw"Could not decode value for key: "+o;t.put(o,u.value,u.type,!0)}}catch(e){throw e}return t}},{key:"decodeSFSArray",value:function(e){var t=new l.SFSArray,r=e.readUint8();if(r!==l.SFSDataType.SFS_ARRAY)throw"Invalid SFSDataType. Expected: "+l.SFSDataType.SFS_ARRAY+", found: "+r;var n=e.readInt16();if(n<0)throw"Can't decode SFSArray. Size is negative: "+n;try{for(var s=0;s<n;s++){var i=this.decodeObject(e);if(null==i)throw"Could not decode value for index: "+s;t.add(i.value,i.type,!0)}}catch(e){throw e}return t}},{key:"decodeObject",value:function(e){var t=null,r=e.readUint8();if(r===l.SFSDataType.NULL)t=this.binDecode_NULL(e);else if(r===l.SFSDataType.BOOL)t=this.binDecode_BOOL(e);else if(r===l.SFSDataType.BOOL_ARRAY)t=this.binDecode_BOOL_ARRAY(e);else if(r===l.SFSDataType.BYTE)t=this.binDecode_BYTE(e);else if(r===l.SFSDataType.BYTE_ARRAY)t=this.binDecode_BYTE_ARRAY(e);else if(r===l.SFSDataType.SHORT)t=this.binDecode_SHORT(e);else if(r===l.SFSDataType.SHORT_ARRAY)t=this.binDecode_SHORT_ARRAY(e);else if(r===l.SFSDataType.INT)t=this.binDecode_INT(e);else if(r===l.SFSDataType.INT_ARRAY)t=this.binDecode_INT_ARRAY(e);else if(r===l.SFSDataType.LONG)t=this.binDecode_LONG(e);else if(r===l.SFSDataType.LONG_ARRAY)t=this.binDecode_LONG_ARRAY(e);else if(r===l.SFSDataType.FLOAT)t=this.binDecode_FLOAT(e);else if(r===l.SFSDataType.FLOAT_ARRAY)t=this.binDecode_FLOAT_ARRAY(e);else if(r===l.SFSDataType.DOUBLE)t=this.binDecode_DOUBLE(e);else if(r===l.SFSDataType.DOUBLE_ARRAY)t=this.binDecode_DOUBLE_ARRAY(e);else if(r===l.SFSDataType.UTF_STRING)t=this.binDecode_UTF_STRING(e);else if(r===l.SFSDataType.TEXT)t=this.binDecode_TEXT(e);else if(r===l.SFSDataType.UTF_STRING_ARRAY)t=this.binDecode_UTF_STRING_ARRAY(e);else if(r===l.SFSDataType.SFS_ARRAY){e.seek(e.position-1);var n=this.decodeSFSArray(e);t=new l.SFSDataWrapper(r,n)}else{if(r!==l.SFSDataType.SFS_OBJECT)throw"Unknow SFSDataType ID: "+r;e.seek(e.position-1);var s=this.decodeSFSObject(e);t=new l.SFSDataWrapper(r,s)}return t}},{key:"binDecode_NULL",value:function(e){return new l.SFSDataWrapper(l.SFSDataType.NULL,null)}},{key:"binDecode_BOOL",value:function(e){var t=e.readUint8(),r=null;if(0===t)r=!1;else{if(1!==t)throw"Error decoding Bool type. Illegal value: "+t;r=!0}return new l.SFSDataWrapper(l.SFSDataType.BOOL,r)}},{key:"binDecode_BOOL_ARRAY",value:function(e){for(var t=this.getTypedArraySize(e),r=[],n=0;n<t;n++){var s=e.readUint8(),i=null;if(0===s)i=!1;else{if(1!==s)throw"Error decoding Bool type. Illegal value: "+s;i=!0}r.push(i)}return new l.SFSDataWrapper(l.SFSDataType.BOOL_ARRAY,r)}},{key:"binDecode_BYTE",value:function(e){var t=e.readUint8();return new l.SFSDataWrapper(l.SFSDataType.BYTE,t)}},{key:"binDecode_BYTE_ARRAY",value:function(e){var t=e.readInt32();if(t<0)throw"Error decoding typed array size. Negative size: "+t;for(var r=[],n=0;n<t;n++)r.push(e.readUint8());return new l.SFSDataWrapper(l.SFSDataType.BYTE_ARRAY,r)}},{key:"binDecode_SHORT",value:function(e){var t=e.readInt16();return new l.SFSDataWrapper(l.SFSDataType.SHORT,t)}},{key:"binDecode_SHORT_ARRAY",value:function(e){for(var t=this.getTypedArraySize(e),r=[],n=0;n<t;n++)r.push(e.readInt16());return new l.SFSDataWrapper(l.SFSDataType.SHORT_ARRAY,r)}},{key:"binDecode_INT",value:function(e){var t=e.readInt32();return new l.SFSDataWrapper(l.SFSDataType.INT,t)}},{key:"binDecode_INT_ARRAY",value:function(e){for(var t=this.getTypedArraySize(e),r=[],n=0;n<t;n++)r.push(e.readInt32());return new l.SFSDataWrapper(l.SFSDataType.INT_ARRAY,r)}},{key:"binDecode_LONG",value:function(e){var t=e.readInt32(),r=e.readUint32(),n=t*Math.pow(2,32)+r;return new l.SFSDataWrapper(l.SFSDataType.LONG,n)}},{key:"binDecode_LONG_ARRAY",value:function(e){for(var t=this.getTypedArraySize(e),r=[],n=0;n<t;n++){var s=e.readInt32(),i=e.readUint32(),a=s*Math.pow(2,32)+i;r.push(a)}return new l.SFSDataWrapper(l.SFSDataType.LONG_ARRAY,r)}},{key:"binDecode_FLOAT",value:function(e){var t=e.readFloat32();return new l.SFSDataWrapper(l.SFSDataType.FLOAT,t)}},{key:"binDecode_FLOAT_ARRAY",value:function(e){for(var t=this.getTypedArraySize(e),r=[],n=0;n<t;n++)r.push(e.readFloat32());return new l.SFSDataWrapper(l.SFSDataType.FLOAT_ARRAY,r)}},{key:"binDecode_DOUBLE",value:function(e){var t=e.readFloat64();return new l.SFSDataWrapper(l.SFSDataType.DOUBLE,t)}},{key:"binDecode_DOUBLE_ARRAY",value:function(e){for(var t=this.getTypedArraySize(e),r=[],n=0;n<t;n++)r.push(e.readFloat64());return new l.SFSDataWrapper(l.SFSDataType.DOUBLE_ARRAY,r)}},{key:"binDecode_UTF_STRING",value:function(e){var t=e.readInt16();if(t<0)throw"Error decoding UTF_STRING. Negative size: "+t;var r=e.readUint8Array(t),n=new TextDecoder("utf-8").decode(r);return new l.SFSDataWrapper(l.SFSDataType.UTF_STRING,n)}},{key:"binDecode_UTF_STRING_ARRAY",value:function(e){for(var t=this.getTypedArraySize(e),r=[],n=0;n<t;n++){var s=e.readInt16();if(s<0)throw"Error decoding UTF_STRING. Negative size: "+s;var i=e.readUint8Array(s),a=new TextDecoder("utf-8").decode(i);r.push(a)}return new l.SFSDataWrapper(l.SFSDataType.UTF_STRING_ARRAY,r)}},{key:"binDecode_TEXT",value:function(e){var t=e.readInt32();if(t<0)throw"Error decoding TEXT. Negative size: "+t;var r=e.readUint8Array(t),n=new TextDecoder("utf-8").decode(r);return new l.SFSDataWrapper(l.SFSDataType.TEXT,n)}},{key:"getTypedArraySize",value:function(e){var t=e.readUint16();if(t<0)throw"Error decoding typed array size. Negative size: "+t;return t}}],[{key:"instance",get:function(){return this[c]||(this[c]=new e(f)),(0,s.default)(this[c])}}]),e}();r.SFSDataSerializer=h},{"../entities/Data":149,"babel-runtime/core-js/get-iterator":2,"babel-runtime/core-js/object/seal":13,"babel-runtime/core-js/symbol":16,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19}],146:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.SFSBuddyEvent=r.SFSEvent=r.EventDispatcher=void 0;var s=n(e("babel-runtime/core-js/object/freeze")),i=n(e("babel-runtime/core-js/get-iterator")),a=n(e("babel-runtime/helpers/classCallCheck")),o=n(e("babel-runtime/helpers/createClass")),u=function(){function e(){(0,a.default)(this,e),this._listenersByEvent={}}return(0,o.default)(e,[{key:"addEventListener",value:function(e,t,r){this._listenersByEvent[e]||(this._listenersByEvent[e]=[]),this._listenersByEvent[e].push({callback:t,scope:r})}},{key:"removeEventListener",value:function(e,t){var r=this._listenersByEvent[e];if(r)for(var n=0;n<r.length;n++)if(r[n].callback===t){r.splice(n,1);break}}},{key:"dispatchEvent",value:function(e,t){var r=this._listenersByEvent[e];if(r){var n=!0,s=!1,a=void 0;try{for(var o,u=(0,i.default)(r);!(n=(o=u.next()).done);n=!0){var l=o.value;l.callback.call(l.scope,t)}}catch(e){s=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(s)throw a}}}}}]),e}(),l=(0,s.default)({HANDSHAKE:"handshake",CONNECTION:"connection",CONNECTION_LOST:"connectionLost",LOGIN:"login",LOGIN_ERROR:"loginError",LOGOUT:"logout",ROOM_ADD:"roomAdd",ROOM_CREATION_ERROR:"roomCreationError",ROOM_REMOVE:"roomRemove",ROOM_JOIN:"roomJoin",ROOM_JOIN_ERROR:"roomJoinError",USER_ENTER_ROOM:"userEnterRoom",USER_EXIT_ROOM:"userExitRoom",USER_COUNT_CHANGE:"userCountChange",PROXIMITY_LIST_UPDATE:"proximityListUpdate",PLAYER_TO_SPECTATOR:"playerToSpectator",PLAYER_TO_SPECTATOR_ERROR:"playerToSpectatorError",SPECTATOR_TO_PLAYER:"spectatorToPlayer",SPECTATOR_TO_PLAYER_ERROR:"spectatorToPlayerError",ROOM_NAME_CHANGE:"roomNameChange",ROOM_NAME_CHANGE_ERROR:"roomNameChangeError",ROOM_PASSWORD_STATE_CHANGE:"roomPasswordStateChange",ROOM_PASSWORD_STATE_CHANGE_ERROR:"roomPasswordStateChangeError",ROOM_CAPACITY_CHANGE:"roomCapacityChange",ROOM_CAPACITY_CHANGE_ERROR:"roomCapacityChangeError",PUBLIC_MESSAGE:"publicMessage",PRIVATE_MESSAGE:"privateMessage",OBJECT_MESSAGE:"objectMessage",MODERATOR_MESSAGE:"moderatorMessage",ADMIN_MESSAGE:"adminMessage",EXTENSION_RESPONSE:"extensionResponse",ROOM_VARIABLES_UPDATE:"roomVariablesUpdate",USER_VARIABLES_UPDATE:"userVariablesUpdate",MMOITEM_VARIABLES_UPDATE:"mmoItemVariablesUpdate",ROOM_GROUP_SUBSCRIBE:"roomGroupSubscribe",ROOM_GROUP_SUBSCRIBE_ERROR:"roomGroupSubscribeError",ROOM_GROUP_UNSUBSCRIBE:"roomGroupUnsubscribe",ROOM_GROUP_UNSUBSCRIBE_ERROR:"roomGroupUnsubscribeError",ROOM_FIND_RESULT:"roomFindResult",USER_FIND_RESULT:"userFindResult",INVITATION:"invitation",INVITATION_REPLY:"invitationReply",INVITATION_REPLY_ERROR:"invitationReplyError",PING_PONG:"pingPong",SOCKET_ERROR:"socketError"}),c=(0,s.default)({BUDDY_LIST_INIT:"buddyListInit",BUDDY_ADD:"buddyAdd",BUDDY_REMOVE:"buddyRemove",BUDDY_BLOCK:"buddyBlock",BUDDY_ERROR:"buddyError",BUDDY_ONLINE_STATE_CHANGE:"buddyOnlineStateChange",BUDDY_VARIABLES_UPDATE:"buddyVariablesUpdate",BUDDY_MESSAGE:"buddyMessage"});r.EventDispatcher=u,r.SFSEvent=l,r.SFSBuddyEvent=c},{"babel-runtime/core-js/get-iterator":2,"babel-runtime/core-js/object/freeze":10,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19}],147:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.SFSTypeError=r.SFSValidationError=r.SFSError=void 0;var s=n(e("babel-runtime/core-js/object/get-prototype-of")),i=n(e("babel-runtime/helpers/classCallCheck")),a=n(e("babel-runtime/helpers/possibleConstructorReturn")),o=n(e("babel-runtime/helpers/inherits")),u=function(e){function t(e){(0,i.default)(this,t);var r=(0,a.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return r.name="SFSError",r}return(0,o.default)(t,e),t}(Error),l=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];(0,i.default)(this,t);var n=(0,a.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return n.name="SFSValidationError",n.errors=r,n}return(0,o.default)(t,e),t}(u),c=function(e){function t(e){(0,i.default)(this,t);var r=(0,a.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return r.name="SFSTypeError",r}return(0,o.default)(t,e),t}(u);r.SFSError=u,r.SFSValidationError=l,r.SFSTypeError=c},{"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],148:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.SocketEngine=r.SocketEvent=void 0;var s=n(e("babel-runtime/core-js/object/seal")),i=n(e("babel-runtime/core-js/object/get-prototype-of")),a=n(e("babel-runtime/helpers/classCallCheck")),o=n(e("babel-runtime/helpers/createClass")),u=n(e("babel-runtime/helpers/possibleConstructorReturn")),l=n(e("babel-runtime/helpers/inherits")),c=n(e("babel-runtime/core-js/object/freeze")),f=e("./Events"),h=e("../entities/Data"),d=e("../requests/Base"),_=e("../utils/Logging"),b=e("../utils/Miscellanea"),p=e("./Exceptions"),m=(0,c.default)({CONNECT:"socketConnect",DISCONNECT:"socketDisconnect",DATA:"socketData",IOERROR:"socketIOError"}),y=function(e){function t(e){(0,a.default)(this,t);var r=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this));return r._sfs=e,r._logger=_.Logger.instance,r._isConnected=!1,r._isConnecting=!1,r._socket=null,r._protocolCodec=new g(e),r._disconnectionReason=b.ClientDisconnectionReason.UNKNOWN,(0,s.default)(r),r}return(0,l.default)(t,e),(0,o.default)(t,[{key:"connect",value:function(e,t,r){this._isConnecting=!0;var n="ws"+(r?"s":"");this._socket=new WebSocket(n+"://"+e+":"+t+"/BlueBox/websocket"),this._socket.binaryType="arraybuffer",this._socket._scope=this,this._socket.onopen=this._onSocketConnect.bind(this._socket),this._socket.onclose=this._onSocketDisconnect.bind(this._socket),this._socket.onmessage=this._onSocketData,this._socket.onerror=this._onSocketError}},{key:"disconnect",value:function(e){this._disconnectionReason=e,this._socket.close()}},{key:"addController",value:function(e,t){null==this._controllers[e]&&(this._controllers[e]=t)}},{key:"removeController",value:function(e){delete this._controllers[e]}},{key:"send",value:function(e){this._sfs.debug&&this._logger.debug("OUTGOING MESSAGE: "+e.dump());var t=this._protocolCodec.onPacketWrite(e);this._socket.send(t)}},{key:"_onSocketConnect",value:function(){this._scope._sfs.debug&&this._scope._logger.debug("Socket connection established"),this._scope._isConnected=!0,this._scope._isConnecting=!1,this._scope.dispatchEvent(m.CONNECT,{success:!0})}},{key:"_onSocketDisconnect",value:function(){this._scope._isConnected=!1,this._scope.isConnecting?(this._scope._sfs.debug&&this._scope._logger.debug("Can't establish socket connection"),this._scope._isConnecting=!1,this._scope.dispatchEvent(m.CONNECT,{success:!1})):(this._scope._sfs.debug&&this._scope._logger.debug("Socket disconnection occurred"),this._scope.dispatchEvent(m.DISCONNECT,{reason:this._scope._disconnectionReason}),this._scope._disconnectionReason=b.ClientDisconnectionReason.UNKNOWN)}},{key:"_onSocketData",value:function(e){var t=this._scope._protocolCodec.onPacketRead(e.data);this._scope._sfs.debug&&this._scope._logger.debug("INCOMING MESSAGE: "+t.dump()),this._scope.dispatchEvent(m.DATA,t)}},{key:"_onSocketError",value:function(e){this._scope.dispatchEvent(m.IOERROR,e.data)}},{key:"isConnected",get:function(){return this._isConnected}},{key:"isConnecting",get:function(){return this._isConnecting}},{key:"maxMessageSize",get:function(){return this._protocolCodec.maxMessageSize},set:function(e){this._protocolCodec.maxMessageSize=e}},{key:"compressionThreshold",get:function(){return this._protocolCodec.compressionThreshold},set:function(e){this._protocolCodec.compressionThreshold=e}}]),t}(f.EventDispatcher),g=function(){function e(t){(0,a.default)(this,e),this.CONTROLLER_ID="c",this.ACTION_ID="a",this.PARAM_ID="p",this._maxMessageSize=1e4,this._compressionThreshold=1024,this._sfs=t,this._logger=_.Logger.instance,(0,s.default)(this)}return(0,o.default)(e,[{key:"onPacketRead",value:function(e){if(0!==e.byteLength){var t=new DataStream(e,0,DataStream.BIG_ENDIAN),r=t.readUint8(),n=(32&r)>0,s=(8&r)>0?t.readUint32():t.readUint16(),i=t.readUint8Array(s);n&&(i=this.decompress(i)),this._sfs.debug&&(e.byteLength>1024?this._logger.debug("DATA READ - Binary size > 1024; dump omitted"):this._logger.debug("DATA READ - "+b.DumpFormatter.hexDump(i)));var a=h.SFSObject.newFromBinaryData(i);return new d.Message(a.get(this.ACTION_ID),a.get(this.CONTROLLER_ID),a.get(this.PARAM_ID))}this._logger.error("Unexpected empty packet data: no readable bytes available!")}},{key:"onPacketWrite",value:function(e){var t=new h.SFSObject;t.put(this.CONTROLLER_ID,e.targetController,h.SFSDataType.BYTE),t.put(this.ACTION_ID,e.id,h.SFSDataType.SHORT),t.put(this.PARAM_ID,e.content,h.SFSDataType.SFS_OBJECT);var r=t.toBinary(),n=r.byteLength,s=new DataStream(new ArrayBuffer(0),0,DataStream.BIG_ENDIAN),i=128;n>this.compressionThreshold&&(i+=32,n=(r=this.compress(r)).byteLength);var a=n>65335;a&&(i+=8),s.writeUint8(i),a?s.writeUint32(n):s.writeUint16(n),s.writeUint8Array(r);var o=new Uint8Array(s.buffer);if(o.byteLength>this.maxMessageSize)throw new p.SFSError("Message size is too big: "+o.byteLength+"; the server limit is: "+this.maxMessageSize);return this._sfs.debug&&this._logger.debug("DATA WRITTEN - "+b.DumpFormatter.hexDump(o)),o}},{key:"decompress",value:function(e){return new Zlib.Inflate(e).decompress()}},{key:"compress",value:function(e){return new Zlib.Deflate(e).compress()}},{key:"maxMessageSize",get:function(){return this._maxMessageSize},set:function(e){this._maxMessageSize=e}},{key:"compressionThreshold",get:function(){return this._compressionThreshold},set:function(e){this._compressionThreshold=e}}]),e}();r.SocketEvent=m,r.SocketEngine=y},{"../entities/Data":149,"../requests/Base":166,"../utils/Logging":206,"../utils/Miscellanea":207,"./Events":146,"./Exceptions":147,"babel-runtime/core-js/object/freeze":10,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],149:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.Vec3D=r.SFSArray=r.SFSObject=r.SFSDataWrapper=r.SFSDataType=void 0;var s=n(e("babel-runtime/core-js/get-iterator")),i=n(e("babel-runtime/core-js/array/from")),a=n(e("babel-runtime/core-js/map")),o=n(e("babel-runtime/helpers/createClass")),u=n(e("babel-runtime/helpers/classCallCheck")),l=n(e("babel-runtime/core-js/number/is-safe-integer")),c=n(e("babel-runtime/core-js/object/freeze")),f=e("../core/DataSerializer"),h=e("../utils/Miscellanea"),d=e("../utils/Logging"),_=e("../core/Exceptions"),b=(0,c.default)({NULL:0,BOOL:1,BYTE:2,SHORT:3,INT:4,LONG:5,FLOAT:6,DOUBLE:7,UTF_STRING:8,BOOL_ARRAY:9,BYTE_ARRAY:10,SHORT_ARRAY:11,INT_ARRAY:12,LONG_ARRAY:13,FLOAT_ARRAY:14,DOUBLE_ARRAY:15,UTF_STRING_ARRAY:16,SFS_ARRAY:17,SFS_OBJECT:18,TEXT:20,fromId:function(e){if("number"!=typeof e)return null;for(var t in this)if(this.hasOwnProperty(t)&&this[t]===e)return t},validate:function(e,t){if(null==this.fromId(e))throw new _.SFSTypeError("Invalid type passed; use one of the SFSDataType constants");var r=null;if(e===this.NULL&&null!=t&&(r="a null value"),e!==this.NULL&&null==t&&(r="a non-null value"),e!==this.BOOL||this.isBoolType(t)||(r="a boolean value"),e!==this.BYTE||this.isByteType(t)||(r="an integer number in this range: 0 <= value < 256"),e!==this.SHORT||this.isShortType(t)||(r="an integer number in this range: -32.768 <= value < +32.768"),e!==this.INT||this.isIntType(t)||(r="an integer number in this range: -2^31 <= value < +2^31"),e!==this.LONG||this.isLongType(t)||(r="an integer number in this range: -(2^53 - 1) <= value <= +(2^53 - 1)"),e!==this.FLOAT||this.isFloatType(t)||(r="a number in this range: -3.4028234663852886e+38 <= value <= 3.4028234663852886e+38"),e!==this.DOUBLE||this.isDoubleType(t)||(r="a finite number"),e!==this.UTF_STRING&&e!==this.TEXT||this.isStringType(t)||(r="a string value"),e!==this.BOOL_ARRAY||this.isArrayType(t,this.isBoolType)||(r="an array of boolean values"),e!==this.BYTE_ARRAY||this.isArrayType(t,this.isByteType)||(r="an array of integer numbers in this range: 0 <= value < 256"),e!==this.SHORT_ARRAY||this.isArrayType(t,this.isShortType)||(r="an array of integer numbers in this range: -32.768 <= value < +32.768"),e!==this.INT_ARRAY||this.isArrayType(t,this.isIntType)||(r="an array of integer numbers in this range: -2^31 <= value < +2^31"),e!==this.LONG_ARRAY||this.isArrayType(t,this.isLongType)||(r="an array of integer numbers in this range: -(2^53 - 1) <= value <= +(2^53 - 1)"),e!==this.FLOAT_ARRAY||this.isArrayType(t,this.isFloatType)||(r="an array of numbers in this range: -3.4028234663852886e+38 <= value <= 3.4028234663852886e+38"),e!==this.DOUBLE_ARRAY||this.isArrayType(t,this.isDoubleType)||(r="an array of finite numbers"),e!==this.UTF_STRING_ARRAY||this.isArrayType(t,this.isStringType)||(r="an array of string values"),e!==this.SFS_OBJECT||t instanceof m||(r="a SFSObject instance"),e!==this.SFS_ARRAY||t instanceof y||(r="a SFSArray instance"),null!=r)throw new _.SFSTypeError("Invalid value passed; type SFSDataType."+this.fromId(e)+" requires "+r)},isBoolType:function(e){return"boolean"==typeof e},isByteType:function(e){return"number"==typeof e&&Math.floor(e)===e&&e>=0&&e<256},isShortType:function(e){return"number"==typeof e&&Math.floor(e)===e&&e>=-32768&&e<32768},isIntType:function(e){return"number"==typeof e&&Math.floor(e)===e&&e>=-2147483648&&e<2147483648},isLongType:function(e){return"number"==typeof e&&Math.floor(e)===e&&(0,l.default)(e)},isFloatType:function(e){return"number"==typeof e&&e>=-3.4028234663852886e38&&e<=3.4028234663852886e38},isDoubleType:function(e){return"number"==typeof e&&isFinite(e)},isStringType:function(e){return"string"==typeof e},isArrayType:function(e,t){return e instanceof Array&&(!(e.length>0)||t(e[0]))}}),p=function e(t,r){(0,u.default)(this,e),this.type=t,this.value=r,(0,c.default)(this)},m=function(){function e(){(0,u.default)(this,e),this._dataHolder=new a.default,this._serializer=f.SFSDataSerializer.instance,(0,c.default)(this)}return(0,o.default)(e,[{key:"toBinary",value:function(){return this._serializer.object2binary(this)}},{key:"keys",value:function(){return this._dataHolder.keys()}},{key:"getWrappedItem",value:function(e){return this._dataHolder.get(e)}},{key:"getKeysArray",value:function(){return(0,i.default)(this.keys())}},{key:"size",value:function(){return this._dataHolder.size}},{key:"containsKey",value:function(e){return null!=this.getWrappedItem(e)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.getWrappedItem(e);if(null!=r&&null!=t&&r.type!=t)throw new _.SFSTypeError("Requested value is not of type SFSDataType."+b.fromId(t));return null!=r?r.value:null}},{key:"isNull",value:function(e){var t=this.getWrappedItem(e);return null==t||t.type==b.NULL}},{key:"getBool",value:function(e){return this.get(e,b.BOOL)}},{key:"getByte",value:function(e){return this.get(e,b.BYTE)}},{key:"getShort",value:function(e){return this.get(e,b.SHORT)}},{key:"getInt",value:function(e){return this.get(e,b.INT)}},{key:"getLong",value:function(e){var t=this.get(e,b.LONG);return(0,l.default)(t)||d.Logger.instance.warn("Long value contained in SFSObject is not safe"),t}},{key:"getFloat",value:function(e){return this.get(e,b.FLOAT)}},{key:"getDouble",value:function(e){return this.get(e,b.DOUBLE)}},{key:"getUtfString",value:function(e){return this.get(e,b.UTF_STRING)}},{key:"getText",value:function(e){return this.get(e,b.TEXT)}},{key:"getBoolArray",value:function(e){return this.get(e,b.BOOL_ARRAY)}},{key:"getByteArray",value:function(e){return this.get(e,b.BYTE_ARRAY)}},{key:"getShortArray",value:function(e){return this.get(e,b.SHORT_ARRAY)}},{key:"getIntArray",value:function(e){return this.get(e,b.INT_ARRAY)}},{key:"getLongArray",value:function(e){return this.get(e,b.LONG_ARRAY)}},{key:"getFloatArray",value:function(e){return this.get(e,b.FLOAT_ARRAY)}},{key:"getDoubleArray",value:function(e){return this.get(e,b.DOUBLE_ARRAY)}},{key:"getUtfStringArray",value:function(e){return this.get(e,b.UTF_STRING_ARRAY)}},{key:"getSFSObject",value:function(e){return this.get(e,b.SFS_OBJECT)}},{key:"getSFSArray",value:function(e){return this.get(e,b.SFS_ARRAY)}},{key:"put",value:function(e,t,r){if(!(arguments.length>3&&void 0!==arguments[3]&&arguments[3])){if("string"!=typeof e)throw"Invalid key passed; must be of type string";b.validate(r,t)}this._dataHolder.set(e,new p(r,t))}},{key:"putNull",value:function(e){this.put(e,null,b.NULL)}},{key:"putBool",value:function(e,t){this.put(e,t,b.BOOL)}},{key:"putByte",value:function(e,t){this.put(e,t,b.BYTE)}},{key:"putShort",value:function(e,t){this.put(e,t,b.SHORT)}},{key:"putInt",value:function(e,t){this.put(e,t,b.INT)}},{key:"putLong",value:function(e,t){this.put(e,t,b.LONG)}},{key:"putFloat",value:function(e,t){this.put(e,t,b.FLOAT)}},{key:"putDouble",value:function(e,t){this.put(e,t,b.DOUBLE)}},{key:"putUtfString",value:function(e,t){this.put(e,t,b.UTF_STRING)}},{key:"putText",value:function(e,t){this.put(e,t,b.TEXT)}},{key:"putBoolArray",value:function(e,t){this.put(e,t,b.BOOL_ARRAY)}},{key:"putByteArray",value:function(e,t){this.put(e,t,b.BYTE_ARRAY)}},{key:"putShortArray",value:function(e,t){this.put(e,t,b.SHORT_ARRAY)}},{key:"putIntArray",value:function(e,t){this.put(e,t,b.INT_ARRAY)}},{key:"putLongArray",value:function(e,t){this.put(e,t,b.LONG_ARRAY)}},{key:"putFloatArray",value:function(e,t){this.put(e,t,b.FLOAT_ARRAY)}},{key:"putDoubleArray",value:function(e,t){this.put(e,t,b.DOUBLE_ARRAY)}},{key:"putUtfStringArray",value:function(e,t){this.put(e,t,b.UTF_STRING_ARRAY)}},{key:"putSFSArray",value:function(e,t){this.put(e,t,b.SFS_ARRAY)}},{key:"putSFSObject",value:function(e,t){this.put(e,t,b.SFS_OBJECT)}},{key:"getDump",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return 0===this.size()?"[ Empty SFSObject ]":e?h.DumpFormatter.prettyPrintDump(this._dump()):this._dump()}},{key:"getHexDump",value:function(){return h.DumpFormatter.hexDump(this.toBinary())}},{key:"_dump",value:function(){var e=h.DumpFormatter.TOKEN_INDENT_OPEN,t=!0,r=!1,n=void 0;try{for(var i,a=(0,s.default)(this.keys());!(t=(i=a.next()).done);t=!0){var o=i.value,u=this.getWrappedItem(o);e+="("+b.fromId(u.type).toLowerCase()+") "+o+": ",u.type===b.SFS_OBJECT||u.type===b.SFS_ARRAY?e+=u.value.getDump(!1):u.type===b.BYTE_ARRAY?e+=h.DumpFormatter.prettyPrintByteArray(u.value):e+=u.value,e+=h.DumpFormatter.TOKEN_DIVIDER}}catch(e){r=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw n}}return e+=h.DumpFormatter.TOKEN_INDENT_CLOSE}}],[{key:"newFromBinaryData",value:function(e){return f.SFSDataSerializer.instance.binary2object(e)}}]),e}(),y=function(){function e(){(0,u.default)(this,e),this._dataHolder=[],this._serializer=f.SFSDataSerializer.instance,(0,c.default)(this)}return(0,o.default)(e,[{key:"toBinary",value:function(){return this._serializer.array2binary(this)}},{key:"getWrappedItem",value:function(e){return"number"!=typeof e||e>=this._dataHolder.length?null:this._dataHolder[e]}},{key:"size",value:function(){return this._dataHolder.length}},{key:"contains",value:function(t){if(t instanceof e||t instanceof m)throw new _.SFSError("SFSArray and SFSObject types are not supported by the SFSArray.contains method");for(var r=0;r<this.size();r++){var n=this.getWrappedItem(r);if(null!=n&&n.value==t)return!0}return!1}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("number"!=typeof e||e>=this._dataHolder.length)return null;var r=this.getWrappedItem(e);if(null!=r&&null!=t&&r.type!=t)throw new _.SFSTypeError("Requested value is not of type SFSDataType."+b.fromId(t));return null!=r?r.value:null}},{key:"isNull",value:function(e){var t=this.getWrappedItem(e);return null==t||t.type==b.NULL}},{key:"getBool",value:function(e){return this.get(e,b.BOOL)}},{key:"getByte",value:function(e){return this.get(e,b.BYTE)}},{key:"getShort",value:function(e){return this.get(e,b.SHORT)}},{key:"getInt",value:function(e){return this.get(e,b.INT)}},{key:"getLong",value:function(e){var t=this.get(e,b.LONG);return(0,l.default)(t)||d.Logger.instance.warn("Long value contained in SFSObject is not safe"),t}},{key:"getFloat",value:function(e){return this.get(e,b.FLOAT)}},{key:"getDouble",value:function(e){return this.get(e,b.DOUBLE)}},{key:"getUtfString",value:function(e){return this.get(e,b.UTF_STRING)}},{key:"getText",value:function(e){return this.get(e,b.TEXT)}},{key:"getBoolArray",value:function(e){return this.get(e,b.BOOL_ARRAY)}},{key:"getByteArray",value:function(e){return this.get(e,b.BYTE_ARRAY)}},{key:"getShortArray",value:function(e){return this.get(e,b.SHORT_ARRAY)}},{key:"getIntArray",value:function(e){return this.get(e,b.INT_ARRAY)}},{key:"getLongArray",value:function(e){return this.get(e,b.LONG_ARRAY)}},{key:"getFloatArray",value:function(e){return this.get(e,b.FLOAT_ARRAY)}},{key:"getDoubleArray",value:function(e){return this.get(e,b.DOUBLE_ARRAY)}},{key:"getUtfStringArray",value:function(e){return this.get(e,b.UTF_STRING_ARRAY)}},{key:"getSFSObject",value:function(e){return this.get(e,b.SFS_OBJECT)}},{key:"getSFSArray",value:function(e){return this.get(e,b.SFS_ARRAY)}},{key:"add",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2]||b.validate(t,e),this._dataHolder.push(new p(t,e))}},{key:"addNull",value:function(){this.add(null,b.NULL)}},{key:"addBool",value:function(e){this.add(e,b.BOOL)}},{key:"addByte",value:function(e){this.add(e,b.BYTE)}},{key:"addShort",value:function(e){this.add(e,b.SHORT)}},{key:"addInt",value:function(e){this.add(e,b.INT)}},{key:"addLong",value:function(e){this.add(e,b.LONG)}},{key:"addFloat",value:function(e){this.add(e,b.FLOAT)}},{key:"addDouble",value:function(e){this.add(e,b.DOUBLE)}},{key:"addUtfString",value:function(e){this.add(e,b.UTF_STRING)}},{key:"addText",value:function(e){this.add(e,b.TEXT)}},{key:"addBoolArray",value:function(e){this.add(e,b.BOOL_ARRAY)}},{key:"addByteArray",value:function(e){this.add(e,b.BYTE_ARRAY)}},{key:"addShortArray",value:function(e){this.add(e,b.SHORT_ARRAY)}},{key:"addIntArray",value:function(e){this.add(e,b.INT_ARRAY)}},{key:"addLongArray",value:function(e){this.add(e,b.LONG_ARRAY)}},{key:"addFloatArray",value:function(e){this.add(e,b.FLOAT_ARRAY)}},{key:"addDoubleArray",value:function(e){this.add(e,b.DOUBLE_ARRAY)}},{key:"addUtfStringArray",value:function(e){this.add(e,b.UTF_STRING_ARRAY)}},{key:"addSFSArray",value:function(e){this.add(e,b.SFS_ARRAY)}},{key:"addSFSObject",value:function(e){this.add(e,b.SFS_OBJECT)}},{key:"getDump",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return 0===this.size()?"[ Empty SFSArray ]":e?h.DumpFormatter.prettyPrintDump(this._dump()):this._dump()}},{key:"getHexDump",value:function(){return h.DumpFormatter.hexDump(this.toBinary())}},{key:"_dump",value:function(){for(var e=h.DumpFormatter.TOKEN_INDENT_OPEN,t=0;t<this.size();t++){var r=this.getWrappedItem(t);e+="("+b.fromId(r.type).toLowerCase()+") "+t+": ",r.type===b.SFS_OBJECT||r.type===b.SFS_ARRAY?e+=r.value.getDump(!1):r.type===b.BYTE_ARRAY?e+=h.DumpFormatter.prettyPrintByteArray(r.value):e+=r.value,e+=h.DumpFormatter.TOKEN_DIVIDER}return e+=h.DumpFormatter.TOKEN_INDENT_CLOSE}}],[{key:"newFromBinaryData",value:function(e){return f.SFSDataSerializer.instance.binary2array(e)}}]),e}(),g=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,u.default)(this,e),this.px=t,this.py=r,this.pz=n,this._useFloatCoordinates=s}return(0,o.default)(e,[{key:"toString",value:function(){return"("+this.px+","+this.py+","+this.pz+")"}},{key:"toArray",value:function(){return[this.px,this.py,this.pz]}},{key:"isFloat",get:function(){return this._useFloatCoordinates}}],[{key:"fromArray",value:function(t){return new e(t[0],t[1],t[2])}}]),e}();r.SFSDataType=b,r.SFSDataWrapper=p,r.SFSObject=m,r.SFSArray=y,r.Vec3D=g},{"../core/DataSerializer":145,"../core/Exceptions":147,"../utils/Logging":206,"../utils/Miscellanea":207,"babel-runtime/core-js/array/from":1,"babel-runtime/core-js/get-iterator":2,"babel-runtime/core-js/map":3,"babel-runtime/core-js/number/is-safe-integer":6,"babel-runtime/core-js/object/freeze":10,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19}],150:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.InvitationReply=r.SFSInvitation=void 0;var s=n(e("babel-runtime/core-js/object/freeze")),i=n(e("babel-runtime/core-js/object/seal")),a=n(e("babel-runtime/helpers/classCallCheck")),o=n(e("babel-runtime/helpers/createClass")),u=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;(0,a.default)(this,e),this._id=-1,this._inviter=t,this._invitee=r,this._secondsForAnswer=n,this._params=s,(0,i.default)(this)}return(0,o.default)(e,[{key:"id",get:function(){return this._id}},{key:"inviter",get:function(){return this._inviter}},{key:"invitee",get:function(){return this._invitee}},{key:"secondsForAnswer",get:function(){return this._secondsForAnswer}},{key:"params",get:function(){return this._params}}]),e}(),l=(0,s.default)({ACCEPT:0,REFUSE:1,EXPIRED:255});r.SFSInvitation=u,r.InvitationReply=l},{"babel-runtime/core-js/object/freeze":10,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19}],151:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.StringMatch=r.NumberMatch=r.BoolMatch=void 0;var s=n(e("babel-runtime/core-js/object/get-prototype-of")),i=n(e("babel-runtime/helpers/possibleConstructorReturn")),a=n(e("babel-runtime/helpers/inherits")),o=n(e("babel-runtime/core-js/object/freeze")),u=n(e("babel-runtime/helpers/classCallCheck")),l=n(e("babel-runtime/helpers/createClass")),c=function(){function e(t,r){(0,u.default)(this,e),this._type=t,this._symbol=r,(0,o.default)(this)}return(0,l.default)(e,[{key:"type",get:function(){return this._type}},{key:"symbol",get:function(){return this._symbol}}]),e}(),f=function(e){function t(e){(0,u.default)(this,t);var r=(0,i.default)(this,(t.__proto__||(0,s.default)(t)).call(this,0,e));return(0,o.default)(r),r}return(0,a.default)(t,e),(0,l.default)(t,null,[{key:"EQUALS",get:function(){return new t("==")}},{key:"NOT_EQUALS",get:function(){return new t("!=")}}]),t}(c),h=function(e){function t(e){(0,u.default)(this,t);var r=(0,i.default)(this,(t.__proto__||(0,s.default)(t)).call(this,1,e));return(0,o.default)(r),r}return(0,a.default)(t,e),(0,l.default)(t,null,[{key:"EQUALS",get:function(){return new t("==")}},{key:"NOT_EQUALS",get:function(){return new t("!=")}},{key:"GREATER_THAN",get:function(){return new t(">")}},{key:"GREATER_THAN_OR_EQUAL_TO",get:function(){return new t(">=")}},{key:"LESS_THAN",get:function(){return new t("<")}},{key:"LESS_THAN_OR_EQUAL_TO",get:function(){return new t("<=")}}]),t}(c),d=function(e){function t(e){(0,u.default)(this,t);var r=(0,i.default)(this,(t.__proto__||(0,s.default)(t)).call(this,2,e));return(0,o.default)(r),r}return(0,a.default)(t,e),(0,l.default)(t,null,[{key:"EQUALS",get:function(){return new t("==")}},{key:"NOT_EQUALS",get:function(){return new t("!=")}},{key:"CONTAINS",get:function(){return new t("contains")}},{key:"STARTS_WITH",get:function(){return new t("startsWith")}},{key:"ENDS_WITH",get:function(){return new t("endsWith")}}]),t}(c);r.BoolMatch=f,r.NumberMatch=h,r.StringMatch=d},{"babel-runtime/core-js/object/freeze":10,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],152:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.LogicOperator=r.MatchExpression=void 0;var s=n(e("babel-runtime/core-js/object/freeze")),i=n(e("babel-runtime/core-js/object/seal")),a=n(e("babel-runtime/helpers/classCallCheck")),o=n(e("babel-runtime/helpers/createClass")),u=e("../Data"),l=function(){function e(t,r,n){(0,a.default)(this,e),this._varName=t,this._condition=r,this._value=n,this._logicOp=null,this._next=null,this._parent=null,(0,i.default)(this)}return(0,o.default)(e,[{key:"and",value:function(t,r,n){return this._next=e.chainedMatchExpression(t,r,n,c.AND,this),this._next}},{key:"or",value:function(t,r,n){return this._next=e.chainedMatchExpression(t,r,n,c.OR,this),this._next}},{key:"hasNext",value:function(){return null!=this._next}},{key:"rewind",value:function(){for(var e=this;null!=e._parent;)e=e._parent;return e}},{key:"toString",value:function(){for(var e=this.rewind(),t=e.asString();e.hasNext();)t+=(e=e.next).asString();return t}},{key:"asString",value:function(){var e="";null!=this._logicOp&&(e+=" "+this._logicOp.id+" ");var t="string"==typeof this._value?"' "+this._value+" '":this._value;return e+="("+this._varName+" "+this._condition.symbol+" "+t+")"}},{key:"toSFSArray",value:function(){var e=this.rewind(),t=new u.SFSArray;for(t.addSFSArray(e.expressionAsSFSArray());e.hasNext();)e=e.next,t.addSFSArray(e.expressionAsSFSArray());return t}},{key:"expressionAsSFSArray",value:function(){var e=new u.SFSArray;return null!=this._logicOp?e.addUtfString(this._logicOp.id):e.addNull(),e.addUtfString(this._varName),e.addByte(this._condition.type),e.addUtfString(this._condition.symbol),0===this._condition.type?e.addBool(this._value):1===this._condition.type?e.addDouble(this._value):e.addUtfString(this._value),e}},{key:"varName",get:function(){return this._varName}},{key:"condition",get:function(){return this._condition}},{key:"value",get:function(){return this._value}},{key:"logicOp",get:function(){return this._logicOp}},{key:"next",get:function(){return this._next}}],[{key:"chainedMatchExpression",value:function(t,r,n,s,i){var a=new e(t,r,n);return a._logicOp=s,a._parent=i,a}}]),e}(),c=function(){function e(t){(0,a.default)(this,e),this._id=t,(0,s.default)(this)}return(0,o.default)(e,[{key:"id",get:function(){return this._id}}],[{key:"AND",get:function(){return new e("AND")}},{key:"OR",get:function(){return new e("OR")}}]),e}();r.MatchExpression=l,r.LogicOperator=c},{"../Data":149,"babel-runtime/core-js/object/freeze":10,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19}],153:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.UserProperties=r.RoomProperties=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(e("babel-runtime/core-js/object/freeze")),s=(0,n.default)({NAME:"${N}",GROUP_ID:"${G}",MAX_USERS:"${MXU}",MAX_SPECTATORS:"${MXS}",USER_COUNT:"${UC}",SPECTATOR_COUNT:"${SC}",IS_GAME:"${ISG}",IS_PRIVATE:"${ISP}",HAS_FREE_PLAYER_SLOTS:"${HFP}",IS_TYPE_SFSGAME:"${IST}"}),i=(0,n.default)({NAME:"${N}",IS_PLAYER:"${ISP}",IS_SPECTATOR:"${ISS}",IS_NPC:"${ISN}",PRIVILEGE_ID:"${PRID}",IS_IN_ANY_ROOM:"${IAR}"});r.RoomProperties=s,r.UserProperties=i},{"babel-runtime/core-js/object/freeze":10}],154:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.BuddyOnlineState=r.SFSBuddy=void 0;var s=n(e("babel-runtime/core-js/object/freeze")),i=n(e("babel-runtime/core-js/get-iterator")),a=n(e("babel-runtime/core-js/array/from")),o=n(e("babel-runtime/core-js/object/seal")),u=n(e("babel-runtime/core-js/map")),l=n(e("babel-runtime/helpers/classCallCheck")),c=n(e("babel-runtime/helpers/createClass")),f=e("../variables/BuddyVariable"),h=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,l.default)(this,e),this._id=t,this._name=r,this._isBlocked=n,this._isTemp=s,this._variables=new u.default,(0,o.default)(this)}return(0,c.default)(e,[{key:"toString",value:function(){return"[Buddy: "+this.name+", Id: "+this.id+"]"}},{key:"getVariable",value:function(e){return this._variables.get(e)}},{key:"containsVariable",value:function(e){return this._variables.has(e)}},{key:"getVariables",value:function(){return(0,a.default)(this._variables.values())}},{key:"getOfflineVariables",value:function(){return this.getVariables().filter(function(e){return e.name.charAt(0)===f.SFSBuddyVariable.OFFLINE_PREFIX})}},{key:"getOnlineVariables",value:function(){return this.getVariables().filter(function(e){return e.name.charAt(0)!==f.SFSBuddyVariable.OFFLINE_PREFIX})}},{key:"_setVariables",value:function(e){var t=!0,r=!1,n=void 0;try{for(var s,a=(0,i.default)(e);!(t=(s=a.next()).done);t=!0){var o=s.value;this._setVariable(o)}}catch(e){r=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw n}}}},{key:"_setVariable",value:function(e){e.isNull?this._variables.delete(e.name):this._variables.set(e.name,e)}},{key:"_removeVariable",value:function(e){this._variables.delete(e)}},{key:"_clearVolatileVariables",value:function(){for(var e in this.getOnlineVariables())this._removeVariable(e.name)}},{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}},{key:"isBlocked",get:function(){return this._isBlocked}},{key:"isTemp",get:function(){return this._isTemp}},{key:"isOnline",get:function(){var e=!0;return this.containsVariable(f.ReservedBuddyVariables.BV_ONLINE)&&(e=this.getVariable(f.ReservedBuddyVariables.BV_ONLINE).value),e&&this._id>-1}},{key:"state",get:function(){return this.containsVariable(f.ReservedBuddyVariables.BV_STATE)?this.getVariable(f.ReservedBuddyVariables.BV_STATE).value:null}},{key:"nickName",get:function(){return this.containsVariable(f.ReservedBuddyVariables.BV_NICKNAME)?this.getVariable(f.ReservedBuddyVariables.BV_NICKNAME).value:null}}],[{key:"fromSFSArray",value:function(t){var r=new e(t.get(0),t.get(1),t.get(2),t.size()>3&&t.get(4)),n=t.get(3);if(null!=n)for(var s=0;s<n.size();s++)r._setVariable(f.SFSBuddyVariable.fromSFSArray(n.get(s)));return r}}]),e}(),d=(0,s.default)({ONLINE:0,OFFLINE:1,LEFT_THE_SERVER:2});r.SFSBuddy=h,r.BuddyOnlineState=d},{"../variables/BuddyVariable":158,"babel-runtime/core-js/array/from":1,"babel-runtime/core-js/get-iterator":2,"babel-runtime/core-js/map":3,"babel-runtime/core-js/object/freeze":10,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19}],155:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.MMOItem=void 0;var s=n(e("babel-runtime/core-js/get-iterator")),i=n(e("babel-runtime/core-js/array/from")),a=n(e("babel-runtime/core-js/object/seal")),o=n(e("babel-runtime/core-js/map")),u=n(e("babel-runtime/helpers/classCallCheck")),l=n(e("babel-runtime/helpers/createClass")),c=e("../variables/ItemVariable"),f=function(){function e(t){(0,u.default)(this,e),this._id=t,this._aoiEntryPoint=null,this._variables=new o.default,(0,a.default)(this)}return(0,l.default)(e,[{key:"toString",value:function(){return"[Item: "+this.id+"]"}},{key:"getVariable",value:function(e){return this._variables.get(e)}},{key:"containsVariable",value:function(e){return this._variables.has(e)}},{key:"getVariables",value:function(){return(0,i.default)(this._variables.values())}},{key:"_setVariables",value:function(e){var t=!0,r=!1,n=void 0;try{for(var i,a=(0,s.default)(e);!(t=(i=a.next()).done);t=!0){var o=i.value;this._setVariable(o)}}catch(e){r=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw n}}}},{key:"_setVariable",value:function(e){e.isNull?this._variables.delete(e.name):this._variables.set(e.name,e)}},{key:"id",get:function(){return this._id}},{key:"aoiEntryPoint",get:function(){return this._aoiEntryPoint}}],[{key:"fromSFSArray",value:function(t){var r=new e(t.get(0)),n=t.get(1);if(null!=n)for(var s=0;s<n.size();s++)r._setVariable(c.MMOItemVariable.fromSFSArray(n.get(s)));return r}}]),e}();r.MMOItem=f},{"../variables/ItemVariable":159,"babel-runtime/core-js/array/from":1,"babel-runtime/core-js/get-iterator":2,"babel-runtime/core-js/map":3,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19}],156:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.MMORoom=r.SFSRoom=void 0;var s=n(e("babel-runtime/core-js/object/get-prototype-of")),i=n(e("babel-runtime/helpers/possibleConstructorReturn")),a=n(e("babel-runtime/helpers/inherits")),o=n(e("babel-runtime/core-js/get-iterator")),u=n(e("babel-runtime/core-js/array/from")),l=n(e("babel-runtime/core-js/object/seal")),c=n(e("babel-runtime/core-js/map")),f=n(e("babel-runtime/helpers/classCallCheck")),h=n(e("babel-runtime/helpers/createClass")),d=e("../Data"),_=e("../variables/RoomVariable"),b=e("../../managers/UserManager"),p=e("../../core/Exceptions"),m=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default",s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];(0,f.default)(this,e),this._id=t,this._name=r,this._groupId=n,this._isGame=!1,this._isHidden=!1,this._isJoined=!1,this._isPasswordProtected=!1,this._maxUsers=0,this._maxSpectators=0,this._userCount=0,this._specCount=0,this._isManaged=!0,this._variables=new c.default,this._userManager=new b.SFSUserManager,this._roomManager=null,this.properties={},s&&(0,l.default)(this)}return(0,h.default)(e,[{key:"toString",value:function(){return"[Room: "+this.name+", Id: "+this.id+", Group Id: "+this.groupId+"]"}},{key:"getUserByName",value:function(e){return this._userManager.getUserByName(e)}},{key:"getUserById",value:function(e){return this._userManager.getUserById(e)}},{key:"containsUser",value:function(e){return this._userManager.containsUser(e)}},{key:"getUserList",value:function(){return this._userManager.getUserList()}},{key:"getPlayerList",value:function(){var e=this;return this._userManager.getUserList().filter(function(t){return t.isPlayerInRoom(e)})}},{key:"getSpectatorList",value:function(){var e=this;return this._userManager.getUserList().filter(function(t){return t.isSpectatorInRoom(e)})}},{key:"getVariable",value:function(e){return this._variables.get(e)}},{key:"containsVariable",value:function(e){return this._variables.has(e)}},{key:"getVariables",value:function(){return(0,u.default)(this._variables.values())}},{key:"getRoomManager",value:function(){return this._roomManager}},{key:"_addUser",value:function(e){this._userManager._addUser(e)}},{key:"_removeUser",value:function(e){this._userManager._removeUser(e)}},{key:"_setVariables",value:function(e){var t=!0,r=!1,n=void 0;try{for(var s,i=(0,o.default)(e);!(t=(s=i.next()).done);t=!0){var a=s.value;this._setVariable(a)}}catch(e){r=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}}},{key:"_setVariable",value:function(e){e.isNull?this._variables.delete(e.name):this._variables.set(e.name,e)}},{key:"_setRoomManager",value:function(e){if(null!=this._roomManager)throw new p.SFSError("Room Manager already assigned to "+this.toString());this._roomManager=e}},{key:"_merge",value:function(e){this._variables.clear();var t=!0,r=!1,n=void 0;try{for(var s,i=(0,o.default)(e._variables.values());!(t=(s=i.next()).done);t=!0){var a=s.value;this._setVariable(a)}}catch(e){r=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}this._userManager._clearAll();var u=!0,l=!1,c=void 0;try{for(var f,h=(0,o.default)(e.getUserList());!(u=(f=h.next()).done);u=!0){var d=f.value;this._addUser(d)}}catch(e){l=!0,c=e}finally{try{!u&&h.return&&h.return()}finally{if(l)throw c}}}},{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}},{key:"groupId",get:function(){return this._groupId}},{key:"isGame",get:function(){return this._isGame}},{key:"isHidden",get:function(){return this._isHidden}},{key:"isJoined",get:function(){return this._isJoined}},{key:"isPasswordProtected",get:function(){return this._isPasswordProtected}},{key:"maxUsers",get:function(){return this._maxUsers}},{key:"maxSpectators",get:function(){return this._maxSpectators}},{key:"userCount",get:function(){return this.isJoined?this.isGame?this.getPlayerList().length:this._userManager.getUserCount():this._userCount}},{key:"spectatorCount",get:function(){return this.isGame?this.isJoined?this.getSpectatorList().length:this._specCount:0}},{key:"capacity",get:function(){return this.maxUsers+this.maxSpectators}}],[{key:"fromSFSArray",value:function(t){var r=14===t.size(),n=void 0;(n=r?new y(t.get(0),t.get(1),t.get(2)):new e(t.get(0),t.get(1),t.get(2)))._isGame=t.get(3),n._isHidden=t.get(4),n._isPasswordProtected=t.get(5),n._userCount=t.get(6),n._maxUsers=t.get(7);var s=t.get(8);if(null!=s)for(var i=0;i<s.size();i++){var a=_.SFSRoomVariable.fromSFSArray(s.get(i));n._setVariable(a)}return n._isGame&&(n._specCount=t.get(9),n._maxSpectators=t.get(10)),r&&(n._defaultAOI=d.Vec3D.fromArray(t.get(11)),null!=t.get(13)&&(n._lowerMapLimit=d.Vec3D.fromArray(t.get(12)),n._higherMapLimit=d.Vec3D.fromArray(t.get(13)))),n}}]),e}(),y=function(e){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default";(0,f.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e,r,n,!1));return a._defaultAOI=null,a._lowerMapLimit=null,a._higherMapLimit=null,a._itemsById=new c.default,(0,l.default)(a),a}return(0,a.default)(t,e),(0,h.default)(t,[{key:"getMMOItem",value:function(e){return this._itemsById.get(e)}},{key:"getMMOItems",value:function(){return(0,u.default)(this._itemsById.values())}},{key:"_addMMOItem",value:function(e){this._itemsById.set(e.id,e)}},{key:"_removeItem",value:function(e){this._itemsById.delete(e)}},{key:"defaultAOI",get:function(){return this._defaultAOI}},{key:"lowerMapLimit",get:function(){return this._lowerMapLimit}},{key:"higherMapLimit",get:function(){return this._higherMapLimit}}]),t}(m);r.SFSRoom=m,r.MMORoom=y},{"../../core/Exceptions":147,"../../managers/UserManager":165,"../Data":149,"../variables/RoomVariable":160,"babel-runtime/core-js/array/from":1,"babel-runtime/core-js/get-iterator":2,"babel-runtime/core-js/map":3,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],157:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.UserPrivileges=r.SFSUser=void 0;var s=n(e("babel-runtime/core-js/object/freeze")),i=n(e("babel-runtime/core-js/get-iterator")),a=n(e("babel-runtime/core-js/array/from")),o=n(e("babel-runtime/core-js/object/seal")),u=n(e("babel-runtime/core-js/map")),l=n(e("babel-runtime/helpers/classCallCheck")),c=n(e("babel-runtime/helpers/createClass")),f=e("../variables/UserVariable"),h=e("../../core/Exceptions"),d=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,l.default)(this,e),this._id=t,this._name=r,this._isItMe=n,this._privilegeId=0,this._aoiEntryPoint=null,this._variables=new u.default,this._playerIdByRoomId=new u.default,this._userManager=null,this.properties={},(0,o.default)(this)}return(0,c.default)(e,[{key:"toString",value:function(){return"[User: "+this.name+", Id: "+this.id+", Is me: "+this.isItMe+"]"}},{key:"isJoinedInRoom",value:function(e){return e.containsUser(this)}},{key:"getPlayerId",value:function(e){var t=this._playerIdByRoomId.get(e.id);return null!=t?t:0}},{key:"isPlayerInRoom",value:function(e){return!!e.isGame&&this.getPlayerId(e)>0}},{key:"isSpectatorInRoom",value:function(e){return!!e.isGame&&this.getPlayerId(e)<0}},{key:"getVariable",value:function(e){return this._variables.get(e)}},{key:"containsVariable",value:function(e){return this._variables.has(e)}},{key:"getVariables",value:function(){return(0,a.default)(this._variables.values())}},{key:"getUserManager",value:function(){return this._userManager}},{key:"_setPlayerId",value:function(e,t){this._playerIdByRoomId.set(t.id,e)}},{key:"_removePlayerId",value:function(e){this._playerIdByRoomId.delete(e.id)}},{key:"_setVariables",value:function(e){var t=!0,r=!1,n=void 0;try{for(var s,a=(0,i.default)(e);!(t=(s=a.next()).done);t=!0){var o=s.value;this._setVariable(o)}}catch(e){r=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw n}}}},{key:"_setVariable",value:function(e){e.isNull?this._variables.delete(e.name):this._variables.set(e.name,e)}},{key:"_setUserManager",value:function(e){if(null!=this._userManager)throw new h.SFSError("User Manager already assigned to user "+this.toString());this._userManager=e}},{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this._name}},{key:"isItMe",get:function(){return this._isItMe}},{key:"privilegeId",get:function(){return this._privilegeId}},{key:"aoiEntryPoint",get:function(){return this._aoiEntryPoint}},{key:"isGuest",get:function(){return this._privilegeId===_.GUEST}},{key:"isStandardUser",get:function(){return this._privilegeId===_.STANDARD}},{key:"isModerator",get:function(){return this._privilegeId===_.MODERATOR}},{key:"isAdmin",get:function(){return this.privilegeId===_.ADMINISTRATOR}},{key:"isPlayer",get:function(){return this.isPlayerInRoom(this._userManager._sfs.lastJoinedRoom)}},{key:"isSpectator",get:function(){return this.isSpectatorInRoom(this._userManager._sfs.lastJoinedRoom)}}],[{key:"fromSFSArray",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=new e(t.get(0),t.get(1));n._privilegeId=t.get(2),null!=r&&n._setPlayerId(t.get(3),r);var s=t.get(4);if(null!=s)for(var i=0;i<s.size();i++)n._setVariable(f.SFSUserVariable.fromSFSArray(s.get(i)));return n}}]),e}(),_=(0,s.default)({GUEST:0,STANDARD:1,MODERATOR:2,ADMINISTRATOR:3});r.SFSUser=d,r.UserPrivileges=_},{"../../core/Exceptions":147,"../variables/UserVariable":161,"babel-runtime/core-js/array/from":1,"babel-runtime/core-js/get-iterator":2,"babel-runtime/core-js/map":3,"babel-runtime/core-js/object/freeze":10,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19}],158:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.SFSBuddyVariable=r.ReservedBuddyVariables=void 0;var s=n(e("babel-runtime/core-js/object/get-prototype-of")),i=n(e("babel-runtime/helpers/classCallCheck")),a=n(e("babel-runtime/helpers/possibleConstructorReturn")),o=n(e("babel-runtime/helpers/createClass")),u=n(e("babel-runtime/helpers/inherits")),l=n(e("babel-runtime/core-js/object/freeze")),c=e("./Variable"),f=(0,l.default)({BV_ONLINE:"$__BV_ONLINE__",BV_STATE:"$__BV_STATE__",BV_NICKNAME:"$__BV_NICKNAME__"}),h=function(e){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;(0,i.default)(this,t);var o=(0,a.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e,r,n));return(0,l.default)(o),o}return(0,u.default)(t,e),(0,o.default)(t,null,[{key:"OFFLINE_PREFIX",get:function(){return"$"}}]),(0,o.default)(t,[{key:"toString",value:function(){return"[BuddyVar: "+this.name+", Type: "+this.type+", Value: "+this.value+"]"}},{key:"isOffline",get:function(){return this._name.charAt(0)===t.OFFLINE_PREFIX}}],[{key:"fromSFSArray",value:function(e){return new t(e.get(0),e.get(2),e.get(1))}}]),t}(c.BaseVariable);r.ReservedBuddyVariables=f,r.SFSBuddyVariable=h},{"./Variable":162,"babel-runtime/core-js/object/freeze":10,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],159:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.MMOItemVariable=void 0;var s=n(e("babel-runtime/core-js/object/freeze")),i=n(e("babel-runtime/core-js/object/get-prototype-of")),a=n(e("babel-runtime/helpers/classCallCheck")),o=n(e("babel-runtime/helpers/createClass")),u=n(e("babel-runtime/helpers/possibleConstructorReturn")),l=n(e("babel-runtime/helpers/inherits")),c=function(e){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;(0,a.default)(this,t);var o=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,r,n));return(0,s.default)(o),o}return(0,l.default)(t,e),(0,o.default)(t,[{key:"toString",value:function(){return"[ItemVar: "+this.name+", Type: "+this.type+", Value: "+this.value+"]"}}],[{key:"fromSFSArray",value:function(e){return new t(e.get(0),e.get(2),e.get(1))}}]),t}(e("./Variable").BaseVariable);r.MMOItemVariable=c},{"./Variable":162,"babel-runtime/core-js/object/freeze":10,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],160:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.SFSRoomVariable=r.ReservedRoomVariables=void 0;var s=n(e("babel-runtime/core-js/object/seal")),i=n(e("babel-runtime/core-js/object/get-prototype-of")),a=n(e("babel-runtime/helpers/classCallCheck")),o=n(e("babel-runtime/helpers/createClass")),u=n(e("babel-runtime/helpers/possibleConstructorReturn")),l=n(e("babel-runtime/helpers/get")),c=n(e("babel-runtime/helpers/inherits")),f=n(e("babel-runtime/core-js/object/freeze")),h=e("./Variable"),d=(0,f.default)({RV_GAME_STARTED:"$GS"}),_=function(e){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;(0,a.default)(this,t);var o=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,r,n));return o.isPrivate=!1,o.isPersistent=!1,(0,s.default)(o),o}return(0,c.default)(t,e),(0,o.default)(t,[{key:"toString",value:function(){return"[RoomVar: "+this.name+", Type: "+this.type+", Value: "+this.value+", Private: "+this.isPrivate+"]"}},{key:"toSFSArray",value:function(){var e=(0,l.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"toSFSArray",this).call(this);return e.addBool(this.isPrivate),e.addBool(this.isPersistent),e}}],[{key:"fromSFSArray",value:function(e){var r=new t(e.get(0),e.get(2),e.get(1));return r.isPrivate=e.get(3),r.isPersistent=e.get(4),r}}]),t}(h.BaseVariable);r.ReservedRoomVariables=d,r.SFSRoomVariable=_},{"./Variable":162,"babel-runtime/core-js/object/freeze":10,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/get":20,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],161:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.SFSUserVariable=void 0;var s=n(e("babel-runtime/core-js/object/seal")),i=n(e("babel-runtime/core-js/object/get-prototype-of")),a=n(e("babel-runtime/helpers/classCallCheck")),o=n(e("babel-runtime/helpers/createClass")),u=n(e("babel-runtime/helpers/possibleConstructorReturn")),l=n(e("babel-runtime/helpers/get")),c=n(e("babel-runtime/helpers/inherits")),f=function(e){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;(0,a.default)(this,t);var o=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,r,n));return o.isPrivate=!1,(0,s.default)(o),o}return(0,c.default)(t,e),(0,o.default)(t,[{key:"toString",value:function(){return"[UserVar: "+this.name+", Type: "+this.type+", Value: "+this.value+", Private: "+this.isPrivate+"]"}},{key:"toSFSArray",value:function(){var e=(0,l.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"toSFSArray",this).call(this);return e.addBool(this.isPrivate),e}}],[{key:"fromSFSArray",value:function(e){var r=new t(e.get(0),e.get(2),e.get(1));return e.size()>3&&(r.isPrivate=e.get(3)),r}}]),t}(e("./Variable").BaseVariable);r.SFSUserVariable=f},{"./Variable":162,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/get":20,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],162:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.BaseVariable=r.VariableType=void 0;var s=n(e("babel-runtime/helpers/typeof")),i=n(e("babel-runtime/helpers/classCallCheck")),a=n(e("babel-runtime/helpers/createClass")),o=n(e("babel-runtime/core-js/object/freeze")),u=e("../Data"),l=(0,o.default)({NULL:0,BOOLEAN:1,INT:2,DOUBLE:3,STRING:4,SFSOBJECT:5,SFSARRAY:6,getTypeName:function(e){return["null","boolean","int","double","string","SFSObject","SFSArray"][e]}}),c=function(){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;(0,i.default)(this,e),this._name=t,this._value=r,this._type=n>-1?n:this._evalType()}return(0,a.default)(e,[{key:"toSFSArray",value:function(){var e=new u.SFSArray;return e.addUtfString(this.name),e.addByte(this._type),this._populateArrayWithValue(e),e}},{key:"_populateArrayWithValue",value:function(e){switch(this._type){case l.NULL:e.addNull();break;case l.BOOLEAN:e.addBool(this.value);break;case l.INT:e.addInt(this.value);break;case l.DOUBLE:e.addDouble(this.value);break;case l.STRING:e.addUtfString(this.value);break;case l.SFSOBJECT:e.addSFSObject(this.value);break;case l.SFSARRAY:e.addSFSArray(this.value)}}},{key:"_evalType",value:function(){if(null==this._value)return l.NULL;var e=(0,s.default)(this._value);if("boolean"===e)return l.BOOLEAN;if("number"===e){var t=this._value;return t===+t&&t===(0|t)?l.INT:l.DOUBLE}return"string"===e?l.STRING:"object"===e?this._value instanceof u.SFSArray?l.SFSARRAY:l.SFSOBJECT:void 0}},{key:"name",get:function(){return this._name}},{key:"value",get:function(){return this._value}},{key:"type",get:function(){return l.getTypeName(this._type)}},{key:"isNull",get:function(){return this._type===l.NULL}}]),e}();r.VariableType=l,r.BaseVariable=c},{"../Data":149,"babel-runtime/core-js/object/freeze":10,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/typeof":23}],163:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.SFSBuddyManager=void 0;var s=n(e("babel-runtime/core-js/get-iterator")),i=n(e("babel-runtime/core-js/array/from")),a=n(e("babel-runtime/core-js/object/seal")),o=n(e("babel-runtime/core-js/set")),u=n(e("babel-runtime/core-js/map")),l=n(e("babel-runtime/helpers/classCallCheck")),c=n(e("babel-runtime/helpers/createClass")),f=e("../entities/variables/BuddyVariable"),h=function(){function e(t){(0,l.default)(this,e),this._sfs=t,this._buddiesByName=new u.default,this._myVariables=new u.default,this._inited=!1,this._buddyStates=new o.default,(0,a.default)(this)}return(0,c.default)(e,[{key:"containsBuddy",value:function(e){return this._buddiesByName.has(e)}},{key:"getBuddyById",value:function(e){return this.getBuddyList().find(function(t){return t.id===e})}},{key:"getBuddyByName",value:function(e){return this._buddiesByName.get(e)}},{key:"getBuddyByNickName",value:function(e){return this.getBuddyList().find(function(t){return t.nickName===e})}},{key:"getOfflineBuddies",value:function(){return this.getBuddyList().filter(function(e){return!e.isOnline})}},{key:"getOnlineBuddies",value:function(){return this.getBuddyList().filter(function(e){return e.isOnline})}},{key:"getBuddyList",value:function(){return(0,i.default)(this._buddiesByName.values())}},{key:"getMyVariable",value:function(e){return this._myVariables.get(e)}},{key:"getMyVariables",value:function(){return(0,i.default)(this._myVariables.values())}},{key:"getMyOnlineState",value:function(){if(!this._inited)return!1;var e=this.getMyVariable(f.ReservedBuddyVariables.BV_ONLINE);return null==e||e.value}},{key:"getMyNickName",value:function(){var e=this.getMyVariable(f.ReservedBuddyVariables.BV_NICKNAME);return null!=e?e.value:null}},{key:"getMyState",value:function(){var e=this.getMyVariable(f.ReservedBuddyVariables.BV_STATE);return null!=e?e.value:null}},{key:"getBuddyStates",value:function(){return(0,i.default)(this._buddyStates.values())}},{key:"_setInited",value:function(){this._inited=!0}},{key:"_addBuddy",value:function(e){this._buddiesByName.set(e.name,e)}},{key:"_clearAll",value:function(){this._buddiesByName.clear()}},{key:"_removeBuddyById",value:function(e){var t=this.getBuddyById(e);return null!=t&&this._buddiesByName.delete(t.name),t}},{key:"_removeBuddyByName",value:function(e){var t=this.getBuddyByName(e);return null!=t&&this._buddiesByName.delete(e),t}},{key:"_setMyVariables",value:function(e){var t=!0,r=!1,n=void 0;try{for(var i,a=(0,s.default)(e);!(t=(i=a.next()).done);t=!0){var o=i.value;this._setMyVariable(o)}}catch(e){r=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw n}}}},{key:"_setMyVariable",value:function(e){e.isNull?this._myVariables.delete(e.name):this._myVariables.set(e.name,e)}},{key:"_setMyOnlineState",value:function(e){this._setMyVariable(new f.SFSBuddyVariable(f.ReservedBuddyVariables.BV_ONLINE,e))}},{key:"_setMyNickName",value:function(e){this._setMyVariable(new f.SFSBuddyVariable(f.ReservedBuddyVariables.BV_NICKNAME,e))}},{key:"_setMyState",value:function(e){this._setMyVariable(new f.SFSBuddyVariable(f.ReservedBuddyVariables.BV_STATE,e))}},{key:"_setBuddyStates",value:function(e){this._buddyStates=new o.default(e)}},{key:"isInited",get:function(){return this._inited}}]),e}();r.SFSBuddyManager=h},{"../entities/variables/BuddyVariable":158,"babel-runtime/core-js/array/from":1,"babel-runtime/core-js/get-iterator":2,"babel-runtime/core-js/map":3,"babel-runtime/core-js/object/seal":13,"babel-runtime/core-js/set":15,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19}],164:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.SFSRoomManager=void 0;var s=n(e("babel-runtime/core-js/get-iterator")),i=n(e("babel-runtime/core-js/array/from")),a=n(e("babel-runtime/core-js/object/seal")),o=n(e("babel-runtime/core-js/map")),u=n(e("babel-runtime/core-js/set")),l=n(e("babel-runtime/helpers/classCallCheck")),c=n(e("babel-runtime/helpers/createClass")),f=function(){function e(t){(0,l.default)(this,e),this._sfs=t,this._groups=new u.default,this._roomsById=new o.default,this._roomsByName=new o.default,(0,a.default)(this)}return(0,c.default)(e,[{key:"getRoomGroups",value:function(){return(0,i.default)(this._groups)}},{key:"containsGroup",value:function(e){return this._groups.has(e)}},{key:"containsRoom",value:function(e){return"number"==typeof e?this._roomsById.has(e):this._roomsByName.has(e)}},{key:"containsRoomInGroup",value:function(e,t){var r=this.getRoomListFromGroup(t);return"number"==typeof e?r.some(function(t){return t.id===e}):r.some(function(t){return t.name===e})}},{key:"getRoomById",value:function(e){return this._roomsById.get(e)}},{key:"getRoomByName",value:function(e){return this._roomsByName.get(e)}},{key:"getRoomList",value:function(){return(0,i.default)(this._roomsById.values())}},{key:"getRoomCount",value:function(){return this._roomsById.size}},{key:"getRoomListFromGroup",value:function(e){return this.getRoomList().filter(function(t){return t.groupId===e})}},{key:"getJoinedRooms",value:function(){return this.getRoomList().filter(function(e){return e.isJoined})}},{key:"getUserRooms",value:function(e){return this.getRoomList().filter(function(t){return t.containsUser(e)})}},{key:"_addRoom",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._roomsById.set(e.id,e),this._roomsByName.set(e.name,e),e._setRoomManager(this),t?this.containsGroup(e.groupId)||this._addGroup(e.groupId):e._isManaged=!1}},{key:"_replaceRoom",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.getRoomById(e.id);return null!=r?(r._merge(e),r):(this._addRoom(e,t),e)}},{key:"_removeRoom",value:function(e){this._roomsById.delete(e.id),this._roomsByName.delete(e.name)}},{key:"_removeRoomById",value:function(e){var t=this.getRoomById(e);null!=t&&this._removeRoom(t)}},{key:"_removeRoomByName",value:function(e){var t=this.getRoomByName(e);null!=t&&this._removeRoom(t)}},{key:"_changeRoomName",value:function(e,t){var r=e.name;e._name=t,this._roomsByName.set(t,e),this._roomsByName.delete(r)}},{key:"_changeRoomPasswordState",value:function(e,t){e._isPasswordProtected=t}},{key:"_changeRoomCapacity",value:function(e,t,r){e._maxUsers=t,e._maxSpectators=r}},{key:"_addGroup",value:function(e){this._groups.add(e)}},{key:"_removeGroup",value:function(e){this._groups.delete(e);var t=this.getRoomListFromGroup(e);for(var r in t)r.isJoined?r._isManaged=!1:this._removeRoom(r)}},{key:"_removeUser",value:function(e){var t=!0,r=!1,n=void 0;try{for(var i,a=(0,s.default)(this.getUserRooms(e));!(t=(i=a.next()).done);t=!0){i.value._removeUser(e)}}catch(e){r=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw n}}}}]),e}();r.SFSRoomManager=f},{"babel-runtime/core-js/array/from":1,"babel-runtime/core-js/get-iterator":2,"babel-runtime/core-js/map":3,"babel-runtime/core-js/object/seal":13,"babel-runtime/core-js/set":15,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19}],165:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.GlobalUserManager=r.SFSUserManager=void 0;var s=n(e("babel-runtime/core-js/object/freeze")),i=n(e("babel-runtime/core-js/object/get-prototype-of")),a=n(e("babel-runtime/helpers/possibleConstructorReturn")),o=n(e("babel-runtime/helpers/get")),u=n(e("babel-runtime/helpers/inherits")),l=n(e("babel-runtime/core-js/array/from")),c=n(e("babel-runtime/core-js/map")),f=n(e("babel-runtime/helpers/classCallCheck")),h=n(e("babel-runtime/helpers/createClass")),d=function(){function e(t){(0,f.default)(this,e),this._sfs=t,this._usersById=new c.default,this._usersByName=new c.default}return(0,h.default)(e,[{key:"containsUserName",value:function(e){return this._usersByName.has(e)}},{key:"containsUserId",value:function(e){return this._usersById.has(e)}},{key:"containsUser",value:function(e){return this._usersById.has(e.id)}},{key:"getUserById",value:function(e){return this._usersById.get(e)}},{key:"getUserByName",value:function(e){return this._usersByName.get(e)}},{key:"getUserCount",value:function(){return this._usersById.size}},{key:"getUserList",value:function(){return(0,l.default)(this._usersById.values())}},{key:"_addUser",value:function(e){this._usersById.has(e.id)&&this._sfs.debug&&this._sfs.logger.warn("Unexpected, duplicate user in UserManager: "+e.toString()),this.__addUser(e)}},{key:"__addUser",value:function(e){this._usersByName.set(e.name,e),this._usersById.set(e.id,e)}},{key:"_removeUser",value:function(e){this._usersById.delete(e.id),this._usersByName.delete(e.name)}},{key:"_clearAll",value:function(){this._usersById.clear(),this._usersByName.clear()}}]),e}(),_=function(e){function t(e){(0,f.default)(this,t);var r=(0,a.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return r._roomRefCount=new c.default,(0,s.default)(r),r}return(0,u.default)(t,e),(0,h.default)(t,[{key:"_addUser",value:function(e){this._roomRefCount.has(e)?this._roomRefCount.set(e,this._roomRefCount.get(e)+1):this._roomRefCount.set(e,1),this.__addUser(e)}},{key:"_removeUser",value:function(e){this._removeUserReference(e,!1)}},{key:"_removeUserReference",value:function(e,r){var n=this._roomRefCount.get(e);n<1?this._sfs.logger.warn("GlobalUserManager RefCount is already at zero. User: "+e):(this._roomRefCount.set(e,this._roomRefCount.get(e)-1),(0===n||r)&&((0,o.default)(t.prototype.__proto__||(0,i.default)(t.prototype),"_removeUser",this).call(this,e),this._roomRefCount.delete(e)))}}]),t}(d);r.SFSUserManager=d,r.GlobalUserManager=_},{"babel-runtime/core-js/array/from":1,"babel-runtime/core-js/map":3,"babel-runtime/core-js/object/freeze":10,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/get":20,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],166:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.Message=r.Requests=r.BaseRequest=void 0;var s=n(e("babel-runtime/core-js/object/freeze")),i=n(e("babel-runtime/helpers/classCallCheck")),a=n(e("babel-runtime/helpers/createClass")),o=e("../entities/Data"),u=e("../utils/Logging"),l=function(){function e(t){(0,i.default)(this,e),this._reqObj=new o.SFSObject,this._id=t,this._targetController=0,this._logger=u.Logger.instance}return(0,a.default)(e,null,[{key:"KEY_ERROR_CODE",get:function(){return"ec"}},{key:"KEY_ERROR_PARAMS",get:function(){return"ep"}}]),(0,a.default)(e,[{key:"getMessage",value:function(){return new c(this._id,this._targetController,this._reqObj)}},{key:"validate",value:function(){this._logger.error("BaseRequest.validate = no child-class implementation found!")}},{key:"execute",value:function(){this._logger.error("BaseRequest.execute = no child-class implementation found!")}},{key:"id",get:function(){return this._id}}]),e}(),c=function(){function e(t,r,n){(0,i.default)(this,e),this._id=t,this._targetController=r,this._content=n,(0,s.default)(this)}return(0,a.default)(e,[{key:"dump",value:function(){return(f.getNameFromId(this.id)+" ("+this.id+")").trim()+"\n"+this.content.getDump()}},{key:"id",get:function(){return this._id}},{key:"targetController",get:function(){return this._targetController}},{key:"content",get:function(){return this._content}}]),e}(),f=(0,s.default)({Handshake:0,Login:1,Logout:2,JoinRoom:4,CreateRoom:6,GenericMessage:7,ChangeRoomName:8,ChangeRoomPassword:9,SetRoomVariables:11,SetUserVariables:12,CallExtension:13,LeaveRoom:14,SubscribeRoomGroup:15,UnsubscribeRoomGroup:16,SpectatorToPlayer:17,PlayerToSpectator:18,ChangeRoomCapacity:19,KickUser:24,BanUser:25,FindRooms:27,FindUsers:28,PingPong:29,SetUserPosition:30,InitBuddyList:200,AddBuddy:201,BlockBuddy:202,RemoveBuddy:203,SetBuddyVariables:204,GoOnline:205,InviteUsers:300,InvitationReply:301,CreateSFSGame:302,QuickJoinGame:303,JoinRoomInvite:304,getNameFromId:function(e){for(var t in this)if(this.hasOwnProperty(t)&&this[t]===e)return t;return""}});r.BaseRequest=l,r.Requests=f,r.Message=c},{"../entities/Data":149,"../utils/Logging":206,"babel-runtime/core-js/object/freeze":10,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19}],167:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.MessageRecipientMode=r.BanMode=r.MapLimits=r.RoomExtension=r.RoomEvents=r.RoomPermissions=r.MMORoomSettings=r.SFSGameSettings=r.RoomSettings=void 0;var s=n(e("babel-runtime/helpers/createClass")),i=n(e("babel-runtime/core-js/object/freeze")),a=n(e("babel-runtime/core-js/object/seal")),o=n(e("babel-runtime/core-js/object/get-prototype-of")),u=n(e("babel-runtime/helpers/possibleConstructorReturn")),l=n(e("babel-runtime/helpers/inherits")),c=n(e("babel-runtime/helpers/classCallCheck")),f=e("../core/Exceptions"),h=function e(t){(0,c.default)(this,e),this.name=t,this.password="",this.groupId="default",this.isGame=!1,this.maxUsers=10,this.maxSpectators=0,this.maxVariables=5,this.variables=[],this.permissions=null,this.events=null,this.extension=null,this.allowOwnerOnlyInvitation=!0},d=function(e){function t(e){(0,c.default)(this,t);var r=(0,u.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return r.isPublic=!0,r.minPlayersToStartGame=2,r.invitedPlayers=null,r.searchableRooms=null,r.invitationExpiryTime=15,r.leaveLastJoinedRoom=!0,r.notifyGameStarted=!1,r.playerMatchExpression=null,r.spectatorMatchExpression=null,r.invitationParams=null,(0,a.default)(r),r}return(0,l.default)(t,e),t}(h),_=function(e){function t(e,r){(0,c.default)(this,t);var n=(0,u.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return n.defaultAOI=r,n.mapLimits=null,n.userMaxLimboSeconds=50,n.proximityListUpdateMillis=250,n.sendAOIEntryPoint=!0,(0,a.default)(n),n}return(0,l.default)(t,e),t}(h),b=(0,i.default)({BY_ADDRESS:0,BY_NAME:1}),p=function(){function e(t,r){if((0,c.default)(this,e),t<e.TO_USER||t>e.TO_ZONE)throw new f.SFSError("Illegal recipient mode: "+t);this._mode=t,this._target=r,(0,i.default)(this)}return(0,s.default)(e,null,[{key:"TO_USER",get:function(){return 0}},{key:"TO_ROOM",get:function(){return 1}},{key:"TO_GROUP",get:function(){return 2}},{key:"TO_ZONE",get:function(){return 3}}]),(0,s.default)(e,[{key:"mode",get:function(){return this._mode}},{key:"target",get:function(){return this._target}}]),e}();r.RoomSettings=h,r.SFSGameSettings=d,r.MMORoomSettings=_,r.RoomPermissions=function e(){(0,c.default)(this,e),this.allowNameChange=!1,this.allowPasswordStateChange=!1,this.allowPublicMessages=!0,this.allowResizing=!1,(0,a.default)(this)},r.RoomEvents=function e(){(0,c.default)(this,e),this.allowUserCountChange=!1,this.allowUserEnter=!1,this.allowUserExit=!1,this.allowUserVariablesUpdate=!1,(0,a.default)(this)},r.RoomExtension=function e(t,r){(0,c.default)(this,e),this.id=t,this.className=r,this.propertiesFile="",(0,a.default)(this)},r.MapLimits=function e(t,r){if((0,c.default)(this,e),null==t||null==r)throw new f.SFSError("Map limits arguments must be both non null!");this.lowerLimit=t,this.higherLimit=r,(0,a.default)(this)},r.BanMode=b,r.MessageRecipientMode=p},{"../core/Exceptions":147,"babel-runtime/core-js/object/freeze":10,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],168:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.AddBuddyRequest=void 0;var s=n(e("babel-runtime/core-js/object/seal")),i=n(e("babel-runtime/core-js/object/get-prototype-of")),a=n(e("babel-runtime/helpers/classCallCheck")),o=n(e("babel-runtime/helpers/possibleConstructorReturn")),u=n(e("babel-runtime/helpers/createClass")),l=n(e("babel-runtime/helpers/inherits")),c=e("../Base"),f=e("../../core/Exceptions"),h=function(e){function t(e){(0,a.default)(this,t);var r=(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this,c.Requests.AddBuddy));return r._name=e,(0,s.default)(r),r}return(0,l.default)(t,e),(0,u.default)(t,null,[{key:"KEY_BUDDY_NAME",get:function(){return"bn"}}]),(0,u.default)(t,[{key:"validate",value:function(e){var t=[];e.buddyManager.isInited||t.push("Buddy List not yet initialized; please send an InitBuddyRequest first"),(null==this._name||this._name.length<1)&&t.push("Invalid buddy name (null or empty string)"),!1===e.buddyManager.getMyOnlineState()&&t.push("Can't add a buddy while you are offline in the Buddy List system");var r=e.buddyManager.getBuddyByName(this._name);if(null==r||r.isTemp||t.push("Can't add buddy '"+this._name+"' because it is already in your list"),t.length>0)throw new f.SFSValidationError("AddBuddyRequest Error",t)}},{key:"execute",value:function(e){this._reqObj.putUtfString(t.KEY_BUDDY_NAME,this._name)}}]),t}(c.BaseRequest);r.AddBuddyRequest=h},{"../../core/Exceptions":147,"../Base":166,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],169:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.BlockBuddyRequest=void 0;var s=n(e("babel-runtime/core-js/object/seal")),i=n(e("babel-runtime/core-js/object/get-prototype-of")),a=n(e("babel-runtime/helpers/classCallCheck")),o=n(e("babel-runtime/helpers/possibleConstructorReturn")),u=n(e("babel-runtime/helpers/createClass")),l=n(e("babel-runtime/helpers/inherits")),c=e("../Base"),f=e("../../core/Exceptions"),h=function(e){function t(e,r){(0,a.default)(this,t);var n=(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this,c.Requests.BlockBuddy));return n._name=e,n._blocked=r,(0,s.default)(n),n}return(0,l.default)(t,e),(0,u.default)(t,null,[{key:"KEY_BUDDY_NAME",get:function(){return"bn"}},{key:"KEY_BUDDY_BLOCK_STATE",get:function(){return"bs"}},{key:"KEY_BUDDY",get:function(){return"bd"}}]),(0,u.default)(t,[{key:"validate",value:function(e){var t=[];if(e.buddyManager.isInited||t.push("Buddy List not yet initialized; please send an InitBuddyRequest first"),!1===e.buddyManager.getMyOnlineState()&&t.push("Can't block a buddy while you are offline in the Buddy List system"),null==this._name||this._name.length<1)t.push("Invalid buddy name (null or empty string)");else{var r=e.buddyManager.getBuddyByName(this._name);null==r?t.push("Can't block buddy '"+this._name+"' because it isn't in your list"):r.isBlocked==this._blocked&&t.push("Block flag is already in the requested '"+this._blocked+"' state for buddy '"+this._name+"'")}if(t.length>0)throw new f.SFSValidationError("BlockBuddyRequest Error",t)}},{key:"execute",value:function(e){this._reqObj.putUtfString(t.KEY_BUDDY_NAME,this._name),this._reqObj.putBool(t.KEY_BUDDY_BLOCK_STATE,this._blocked)}}]),t}(c.BaseRequest);r.BlockBuddyRequest=h},{"../../core/Exceptions":147,"../Base":166,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],170:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.BuddyMessageRequest=void 0;var s=n(e("babel-runtime/core-js/object/seal")),i=n(e("babel-runtime/core-js/object/get-prototype-of")),a=n(e("babel-runtime/helpers/classCallCheck")),o=n(e("babel-runtime/helpers/possibleConstructorReturn")),u=n(e("babel-runtime/helpers/inherits")),l=e("../system/Message"),c=e("../../core/Exceptions"),f=e("../../entities/objects/Buddy"),h=function(e){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,a.default)(this,t);var u=(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this));if(null!=r&&!(r instanceof f.SFSBuddy))throw new c.SFSError("Target buddy must be an instance of SFSBuddy class");return u._type=l.GenericMessageType.BUDDY_MSG,u._message=e,u._recipient=null!=r?r.id:-1,u._params=n,(0,s.default)(u),u}return(0,u.default)(t,e),t}(l.GenericMessageRequest);r.BuddyMessageRequest=h},{"../../core/Exceptions":147,"../../entities/objects/Buddy":154,"../system/Message":196,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],171:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.GoOnlineRequest=void 0;var s=n(e("babel-runtime/core-js/object/seal")),i=n(e("babel-runtime/core-js/object/get-prototype-of")),a=n(e("babel-runtime/helpers/classCallCheck")),o=n(e("babel-runtime/helpers/possibleConstructorReturn")),u=n(e("babel-runtime/helpers/createClass")),l=n(e("babel-runtime/helpers/inherits")),c=e("../Base"),f=e("../../core/Exceptions"),h=function(e){function t(e){(0,a.default)(this,t);var r=(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this,c.Requests.GoOnline));return r._online=e,(0,s.default)(r),r}return(0,l.default)(t,e),(0,u.default)(t,null,[{key:"KEY_ONLINE",get:function(){return"o"}},{key:"KEY_BUDDY_NAME",get:function(){return"bn"}},{key:"KEY_BUDDY_ID",get:function(){return"bi"}}]),(0,u.default)(t,[{key:"validate",value:function(e){var t=[];if(e.buddyManager.isInited||t.push("Buddy List not yet initialized; please send an InitBuddyRequest first"),t.length>0)throw new f.SFSValidationError("GoOnlineRequest Error",t)}},{key:"execute",value:function(e){e.buddyManager._setMyOnlineState(this._online),this._reqObj.putBool(t.KEY_ONLINE,this._online)}}]),t}(c.BaseRequest);r.GoOnlineRequest=h},{"../../core/Exceptions":147,"../Base":166,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],172:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.InitBuddyListRequest=void 0;var s=n(e("babel-runtime/core-js/object/seal")),i=n(e("babel-runtime/core-js/object/get-prototype-of")),a=n(e("babel-runtime/helpers/classCallCheck")),o=n(e("babel-runtime/helpers/possibleConstructorReturn")),u=n(e("babel-runtime/helpers/createClass")),l=n(e("babel-runtime/helpers/inherits")),c=e("../Base"),f=e("../../core/Exceptions"),h=function(e){function t(){(0,a.default)(this,t);var e=(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this,c.Requests.InitBuddyList));return(0,s.default)(e),e}return(0,l.default)(t,e),(0,u.default)(t,null,[{key:"KEY_BLIST",get:function(){return"bl"}},{key:"KEY_BUDDY_STATES",get:function(){return"bs"}},{key:"KEY_MY_VARS",get:function(){return"mv"}}]),(0,u.default)(t,[{key:"validate",value:function(e){var t=[];if(e.buddyManager.isInited&&t.push("Buddy List is already initialized"),t.length>0)throw new f.SFSValidationError("InitBuddyListRequest Error",t)}},{key:"execute",value:function(e){}}]),t}(c.BaseRequest);r.InitBuddyListRequest=h},{"../../core/Exceptions":147,"../Base":166,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],173:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.RemoveBuddyRequest=void 0;var s=n(e("babel-runtime/core-js/object/seal")),i=n(e("babel-runtime/core-js/object/get-prototype-of")),a=n(e("babel-runtime/helpers/classCallCheck")),o=n(e("babel-runtime/helpers/possibleConstructorReturn")),u=n(e("babel-runtime/helpers/createClass")),l=n(e("babel-runtime/helpers/inherits")),c=e("../Base"),f=e("../../core/Exceptions"),h=function(e){function t(e){(0,a.default)(this,t);var r=(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this,c.Requests.RemoveBuddy));return r._name=e,(0,s.default)(r),r}return(0,l.default)(t,e),(0,u.default)(t,null,[{key:"KEY_BUDDY_NAME",get:function(){return"bn"}}]),(0,u.default)(t,[{key:"validate",value:function(e){var t=[];if(e.buddyManager.isInited||t.push("Buddy List not yet initialized; please send an InitBuddyRequest first"),!1===e.buddyManager.getMyOnlineState()&&t.push("Can't remove a buddy while you are offline in the Buddy List system"),null==this._name||this._name.length<1?t.push("Invalid buddy name (null or empty string)"):e.buddyManager.containsBuddy(this._name)||t.push("Can't remove buddy '"+this._name+"' because it isn't in your list"),t.length>0)throw new f.SFSValidationError("RemoveBuddyRequest Error",t)}},{key:"execute",value:function(e){this._reqObj.putUtfString(t.KEY_BUDDY_NAME,this._name)}}]),t}(c.BaseRequest);r.RemoveBuddyRequest=h},{"../../core/Exceptions":147,"../Base":166,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],174:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.SetBuddyVariablesRequest=void 0;var s=n(e("babel-runtime/core-js/get-iterator")),i=n(e("babel-runtime/core-js/object/seal")),a=n(e("babel-runtime/core-js/object/get-prototype-of")),o=n(e("babel-runtime/helpers/classCallCheck")),u=n(e("babel-runtime/helpers/possibleConstructorReturn")),l=n(e("babel-runtime/helpers/createClass")),c=n(e("babel-runtime/helpers/inherits")),f=e("../Base"),h=e("../../core/Exceptions"),d=e("../../entities/Data"),_=e("../../entities/variables/BuddyVariable"),b=function(e){function t(e){(0,o.default)(this,t);var r=(0,u.default)(this,(t.__proto__||(0,a.default)(t)).call(this,f.Requests.SetBuddyVariables));return r._buddyVariables=e,(0,i.default)(r),r}return(0,c.default)(t,e),(0,l.default)(t,null,[{key:"KEY_BUDDY_NAME",get:function(){return"bn"}},{key:"KEY_BUDDY_VARS",get:function(){return"bv"}}]),(0,l.default)(t,[{key:"validate",value:function(e){var t=[];if(e.buddyManager.isInited||t.push("Buddy List not yet initialized; please send an InitBuddyRequest first"),!1===e.buddyManager.getMyOnlineState()&&t.push("Can't set Buddy Variables while you are offline in the Buddy List system"),null==this._buddyVariables?t.push("No Buddy Variables specified"):this._buddyVariables instanceof Array?0===this._buddyVariables.length?t.push("No Buddy Variables specified"):this._buddyVariables.every(function(e){return e instanceof _.SFSBuddyVariable})||t.push("Buddy Variables must be passed as instances of SFSBuddyVariable class"):t.push("Buddy Variables must be passed in an array"),t.length>0)throw new h.SFSValidationError("SetBuddyVariablesRequest Error",t)}},{key:"execute",value:function(e){var r=new d.SFSArray,n=!0,i=!1,a=void 0;try{for(var o,u=(0,s.default)(this._buddyVariables);!(n=(o=u.next()).done);n=!0){var l=o.value;r.addSFSArray(l.toSFSArray())}}catch(e){i=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}this._reqObj.putSFSArray(t.KEY_BUDDY_VARS,r)}}]),t}(f.BaseRequest);r.SetBuddyVariablesRequest=b},{"../../core/Exceptions":147,"../../entities/Data":149,"../../entities/variables/BuddyVariable":158,"../Base":166,"babel-runtime/core-js/get-iterator":2,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],175:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.CreateSFSGameRequest=void 0;var s=n(e("babel-runtime/core-js/get-iterator")),i=n(e("babel-runtime/core-js/object/seal")),a=n(e("babel-runtime/core-js/object/get-prototype-of")),o=n(e("babel-runtime/helpers/classCallCheck")),u=n(e("babel-runtime/helpers/possibleConstructorReturn")),l=n(e("babel-runtime/helpers/createClass")),c=n(e("babel-runtime/helpers/inherits")),f=e("../Base"),h=e("../../core/Exceptions"),d=e("../Settings"),_=e("../system/CreateRoom"),b=e("./InviteUsers"),p=e("../../entities/objects/User"),m=e("../../entities/objects/Buddy"),y=e("../../entities/Data"),g=e("../../entities/match/MatchExpression"),v=function(e){function t(e){(0,o.default)(this,t);var r=(0,u.default)(this,(t.__proto__||(0,a.default)(t)).call(this,f.Requests.CreateSFSGame));return r._settings=e,r._createRoomRequest=new _.CreateRoomRequest(e,!1,null),(0,i.default)(r),r}return(0,c.default)(t,e),(0,l.default)(t,null,[{key:"KEY_IS_PUBLIC",get:function(){return"gip"}},{key:"KEY_MIN_PLAYERS",get:function(){return"gmp"}},{key:"KEY_INVITED_PLAYERS",get:function(){return"ginp"}},{key:"KEY_SEARCHABLE_ROOMS",get:function(){return"gsr"}},{key:"KEY_PLAYER_MATCH_EXP",get:function(){return"gpme"}},{key:"KEY_SPECTATOR_MATCH_EXP",get:function(){return"gsme"}},{key:"KEY_INVITATION_EXPIRY",get:function(){return"gie"}},{key:"KEY_LEAVE_ROOM",get:function(){return"glr"}},{key:"KEY_NOTIFY_GAME_STARTED",get:function(){return"gns"}},{key:"KEY_INVITATION_PARAMS",get:function(){return"ip"}}]),(0,l.default)(t,[{key:"validate",value:function(e){if(!(this._settings instanceof d.SFSGameSettings))throw new h.SFSValidationError("CreateSFSGameRequest Error",["Room configuration must be an instance of SFSGameSettings class"]);var t=[];try{this._createRoomRequest.validate(e)}catch(e){t=e.getErrors()}if(this._settings.minPlayersToStartGame>this._settings.maxUsers&&t.push("Minimum number of players to start the game can't be greater than the Room's maximum number of users"),(this._settings.invitationExpiryTime<b.InviteUsersRequest.MIN_EXPIRY_TIME||this._settings.invitationExpiryTime>b.InviteUsersRequest.MAX_EXPIRY_TIME)&&t.push("Invitation expiration time value is out of range (min: "+b.InviteUsersRequest.MIN_EXPIRY_TIME+"; max: "+b.InviteUsersRequest.MAX_EXPIRY_TIME+")"),null!=this._settings.invitedPlayers&&(this._settings.invitedPlayers instanceof Array?(this._settings.invitedPlayers.length>b.InviteUsersRequest.MAX_INVITATIONS_FROM_CLIENT_SIDE&&t.push("Can't invite more than "+b.InviteUsersRequest.MAX_INVITATIONS_FROM_CLIENT_SIDE+" players from client side"),this._settings.invitedPlayers.every(function(e){return e instanceof p.SFSUser||e instanceof m.SFSBuddy})||t.push("Each invited player must be an instance of SFSUser or SFSBuddy classes")):t.push("Invited players must be passed in an array")),null==this._settings.playerMatchExpression||this._settings.playerMatchExpression instanceof g.MatchExpression||t.push("Player match expression must be an instance of MatchExpression class"),null==this._settings.spectatorMatchExpression||this._settings.spectatorMatchExpression instanceof g.MatchExpression||t.push("Spectator match expression must be an instance of MatchExpression class"),null==this._settings.invitationParams||this._settings.invitationParams instanceof y.SFSObject||t.push("Custom invitation parameters must be set in a SFSObject class instance"),t.length>0)throw new h.SFSValidationError("CreateSFSGameRequest Error",t)}},{key:"execute",value:function(e){if(this._createRoomRequest.execute(e),this._reqObj=this._createRoomRequest._reqObj,this._reqObj.putBool(t.KEY_IS_PUBLIC,this._settings.isPublic),this._reqObj.putShort(t.KEY_MIN_PLAYERS,this._settings.minPlayersToStartGame),this._reqObj.putShort(t.KEY_INVITATION_EXPIRY,this._settings.invitationExpiryTime),this._reqObj.putBool(t.KEY_LEAVE_ROOM,this._settings.leaveLastJoinedRoom),this._reqObj.putBool(t.KEY_NOTIFY_GAME_STARTED,this._settings.notifyGameStarted),null!=this._settings.playerMatchExpression&&this._reqObj.putSFSArray(t.KEY_PLAYER_MATCH_EXP,this._settings.playerMatchExpression.toSFSArray()),null!=this._settings.spectatorMatchExpression&&this._reqObj.putSFSArray(t.KEY_SPECTATOR_MATCH_EXP,this._settings.spectatorMatchExpression.toSFSArray()),null!=this._settings.invitedPlayers){var r=[],n=!0,i=!1,a=void 0;try{for(var o,u=(0,s.default)(this._settings.invitedPlayers);!(n=(o=u.next()).done);n=!0){var l=o.value;r.push(l.id)}}catch(e){i=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}this._reqObj.putIntArray(t.KEY_INVITED_PLAYERS,r)}null!=this._settings.searchableRooms&&this._reqObj.putUtfStringArray(t.KEY_SEARCHABLE_ROOMS,this._settings.searchableRooms),null!=this._settings.invitationParams&&this._reqObj.putSFSObject(t.KEY_INVITATION_PARAMS,this._settings.invitationParams)}}]),t}(f.BaseRequest);r.CreateSFSGameRequest=v},{"../../core/Exceptions":147,"../../entities/Data":149,"../../entities/match/MatchExpression":152,"../../entities/objects/Buddy":154,"../../entities/objects/User":157,"../Base":166,"../Settings":167,"../system/CreateRoom":186,"./InviteUsers":177,"babel-runtime/core-js/get-iterator":2,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],176:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.InvitationReplyRequest=void 0;var s=n(e("babel-runtime/core-js/object/seal")),i=n(e("babel-runtime/core-js/object/get-prototype-of")),a=n(e("babel-runtime/helpers/classCallCheck")),o=n(e("babel-runtime/helpers/possibleConstructorReturn")),u=n(e("babel-runtime/helpers/createClass")),l=n(e("babel-runtime/helpers/inherits")),c=e("../Base"),f=e("../../core/Exceptions"),h=e("../../entities/Data"),d=e("../../entities/Invitation"),_=function(e){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,a.default)(this,t);var u=(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this,c.Requests.InvitationReply));return u._invitation=e,u._reply=r,u._params=n,(0,s.default)(u),u}return(0,l.default)(t,e),(0,u.default)(t,null,[{key:"KEY_INVITATION_ID",get:function(){return"i"}},{key:"KEY_INVITATION_REPLY",get:function(){return"r"}},{key:"KEY_INVITATION_PARAMS",get:function(){return"p"}}]),(0,u.default)(t,[{key:"validate",value:function(e){var t=[];if(null==this._invitation?t.push("Missing invitation object"):this._invitation instanceof d.SFSInvitation||t.push("Invitation object must be an instance of Invitation class"),null==this._params||this._params instanceof h.SFSObject||t.push("Custom invitation parameters must be set in a SFSObject class instance"),t.length>0)throw new f.SFSValidationError("InvitationReplyRequest Error",t)}},{key:"execute",value:function(e){this._reqObj.putInt(t.KEY_INVITATION_ID,this._invitation.id),this._reqObj.putByte(t.KEY_INVITATION_REPLY,this._reply),null!=this._params&&this._reqObj.putSFSObject(t.KEY_INVITATION_PARAMS,this._params)}}]),t}(c.BaseRequest);r.InvitationReplyRequest=_},{"../../core/Exceptions":147,"../../entities/Data":149,"../../entities/Invitation":150,"../Base":166,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],177:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.InviteUsersRequest=void 0;var s=n(e("babel-runtime/core-js/get-iterator")),i=n(e("babel-runtime/core-js/object/seal")),a=n(e("babel-runtime/core-js/object/get-prototype-of")),o=n(e("babel-runtime/helpers/classCallCheck")),u=n(e("babel-runtime/helpers/possibleConstructorReturn")),l=n(e("babel-runtime/helpers/createClass")),c=n(e("babel-runtime/helpers/inherits")),f=e("../Base"),h=e("../../core/Exceptions"),d=e("../../entities/objects/User"),_=e("../../entities/objects/Buddy"),b=e("../../entities/Data"),p=function(e){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,o.default)(this,t);var s=(0,u.default)(this,(t.__proto__||(0,a.default)(t)).call(this,f.Requests.InviteUsers));return s._invitedUsers=e,s._secondsForAnswer=r,s._params=n,(0,i.default)(s),s}return(0,c.default)(t,e),(0,l.default)(t,null,[{key:"KEY_USER",get:function(){return"u"}},{key:"KEY_USER_ID",get:function(){return"ui"}},{key:"KEY_INVITATION_ID",get:function(){return"ii"}},{key:"KEY_TIME",get:function(){return"t"}},{key:"KEY_PARAMS",get:function(){return"p"}},{key:"KEY_INVITEE_ID",get:function(){return"ee"}},{key:"KEY_INVITED_USERS",get:function(){return"iu"}},{key:"KEY_REPLY_ID",get:function(){return"ri"}},{key:"MAX_INVITATIONS_FROM_CLIENT_SIDE",get:function(){return 8}},{key:"MIN_EXPIRY_TIME",get:function(){return 5}},{key:"MAX_EXPIRY_TIME",get:function(){return 300}}]),(0,l.default)(t,[{key:"validate",value:function(e){var r=[];if(null==this._invitedUsers?r.push("No invited users"):this._invitedUsers instanceof Array?(this._invitedUsers.length<1&&r.push("No invited users"),this._invitedUsers.length>t.MAX_INVITATIONS_FROM_CLIENT_SIDE&&r.push("Too many invitations; "+t.MAX_INVITATIONS_FROM_CLIENT_SIDE+" max are allowed from client side"),this._invitedUsers.every(function(e){return e instanceof d.SFSUser||e instanceof _.SFSBuddy})||r.push("Each invited user must be an instance of SFSUser or SFSBuddy class")):r.push("Invited users must be passed in an array"),(this._secondsForAnswer<t.MIN_EXPIRY_TIME||this._secondsForAnswer>t.MAX_EXPIRY_TIME)&&r.push("secondsForAnswer value is out of range (min: "+t.MIN_EXPIRY_TIME+"; max: "+t.MAX_EXPIRY_TIME+")"),null==this._params||this._params instanceof b.SFSObject||r.push("Custom invitation parameters must be set in a SFSObject class instance"),r.length>0)throw new h.SFSValidationError("InviteUsersRequest Error",r)}},{key:"execute",value:function(e){var r=[],n=!0,i=!1,a=void 0;try{for(var o,u=(0,s.default)(this._invitedUsers);!(n=(o=u.next()).done);n=!0){var l=o.value;if(l instanceof d.SFSUser||l instanceof _.SFSBuddy){if(l===e.mySelf)continue;r.push(l.id)}}}catch(e){i=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}this._reqObj.putIntArray(t.KEY_INVITED_USERS,r),this._reqObj.putShort(t.KEY_TIME,this._secondsForAnswer),null!=this._params&&this._reqObj.putSFSObject(t.KEY_PARAMS,this._params)}}]),t}(f.BaseRequest);r.InviteUsersRequest=p},{"../../core/Exceptions":147,"../../entities/Data":149,"../../entities/objects/Buddy":154,"../../entities/objects/User":157,"../Base":166,"babel-runtime/core-js/get-iterator":2,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],178:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.JoinRoomInvitationRequest=void 0;var s=n(e("babel-runtime/core-js/object/seal")),i=n(e("babel-runtime/core-js/object/get-prototype-of")),a=n(e("babel-runtime/helpers/classCallCheck")),o=n(e("babel-runtime/helpers/possibleConstructorReturn")),u=n(e("babel-runtime/helpers/createClass")),l=n(e("babel-runtime/helpers/inherits")),c=e("../Base"),f=e("../../core/Exceptions"),h=e("../../entities/objects/Room"),d=e("../../entities/Data"),_=function(e){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30,l=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,a.default)(this,t);var f=(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this,c.Requests.JoinRoomInvite));return f._targetRoom=e,f._invitedUserNames=r,f._params=n,f._expirySeconds=u,f._asSpectator=l,(0,s.default)(f),f}return(0,l.default)(t,e),(0,u.default)(t,null,[{key:"KEY_ROOM_ID",get:function(){return"r"}},{key:"KEY_EXPIRY_SECONDS",get:function(){return"es"}},{key:"KEY_INVITED_NAMES",get:function(){return"in"}},{key:"KEY_AS_SPECT",get:function(){return"as"}},{key:"KEY_OPTIONAL_PARAMS",get:function(){return"op"}}]),(0,u.default)(t,[{key:"validate",value:function(e){var t=[];if(null==this._targetRoom&&t.push("Missing target room"),null==this._targetRoom||this._targetRoom instanceof h.SFSRoom||t.push("Target room must be an instance of SFSRoom class"),null==this._invitedUserNames?t.push("No invitees provided"):this._invitedUserNames instanceof Array?this._invitedUserNames.length<1&&t.push("No invitees provided"):t.push("Invited user names must be passed in an array"),null==this._params||this._params instanceof d.SFSObject||t.push("Custom invitation parameters must be set in a SFSObject class instance"),t.length>0)throw new f.SFSValidationError("JoinRoomInvitationRequest Error",t)}},{key:"execute",value:function(e){this._reqObj.putInt(t.KEY_ROOM_ID,this._targetRoom.id),this._reqObj.putUtfStringArray(t.KEY_INVITED_NAMES,this._invitedUserNames),this._reqObj.putInt(t.KEY_EXPIRY_SECONDS,this._expirySeconds),this._reqObj.putBool(t.KEY_AS_SPECT,this._asSpectator),null!=this._params&&this._reqObj.putSFSObject(t.KEY_OPTIONAL_PARAMS,this._params)}}]),t}(c.BaseRequest);r.JoinRoomInvitationRequest=_},{"../../core/Exceptions":147,"../../entities/Data":149,"../../entities/objects/Room":156,"../Base":166,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],179:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.QuickJoinGameRequest=void 0;var s=n(e("babel-runtime/core-js/get-iterator")),i=n(e("babel-runtime/core-js/object/seal")),a=n(e("babel-runtime/core-js/object/get-prototype-of")),o=n(e("babel-runtime/helpers/classCallCheck")),u=n(e("babel-runtime/helpers/possibleConstructorReturn")),l=n(e("babel-runtime/helpers/createClass")),c=n(e("babel-runtime/helpers/inherits")),f=e("../Base"),h=e("../../core/Exceptions"),d=e("../../entities/objects/Room"),_=e("../../entities/match/MatchExpression"),b=function(e){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,o.default)(this,t);var s=(0,u.default)(this,(t.__proto__||(0,a.default)(t)).call(this,f.Requests.QuickJoinGame));return s._matchExpression=e,s._whereToSearch=r,s._roomToLeave=n,(0,i.default)(s),s}return(0,c.default)(t,e),(0,l.default)(t,null,[{key:"KEY_ROOM_LIST",get:function(){return"rl"}},{key:"KEY_GROUP_LIST",get:function(){return"gl"}},{key:"KEY_ROOM_TO_LEAVE",get:function(){return"tl"}},{key:"KEY_MATCH_EXPRESSION",get:function(){return"me"}},{key:"MAX_ROOMS",get:function(){return 32}}]),(0,l.default)(t,[{key:"validate",value:function(e){var r=[];if(null==this._matchExpression||this._matchExpression instanceof _.MatchExpression||r.push("Match expression must be an instance of MatchExpression class"),null==this._whereToSearch||this._whereToSearch.length<1?r.push("Missing list of Rooms or Group names where to search the game to join"):this._whereToSearch.length>t.MAX_ROOMS&&r.push("Too many Rooms specified in list where to search the game to join; client limit is: "+t.MAX_ROOMS),null==this._roomToLeave||this._roomToLeave instanceof d.SFSRoom||r.push("Room to leave must be an instance of SFSRoom class"),r.length>0)throw new h.SFSValidationError("CreateSFSGameRequest Error",r)}},{key:"execute",value:function(e){if("string"==typeof this._whereToSearch[0])this._reqObj.putUtfStringArray(t.KEY_GROUP_LIST,this._whereToSearch);else{if(!(this._whereToSearch[0]instanceof d.SFSRoom))throw new h.SFSError("Invalid type in whereToSearch parameter");var r=[],n=!0,i=!1,a=void 0;try{for(var o,u=(0,s.default)(this._whereToSearch);!(n=(o=u.next()).done);n=!0){var l=o.value;l instanceof d.SFSRoom&&r.push(l.id)}}catch(e){i=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}this._reqObj.putIntArray(t.KEY_ROOM_LIST,r)}null!=this._roomToLeave&&this._reqObj.putInt(t.KEY_ROOM_TO_LEAVE,this._roomToLeave.id),null!=this._matchExpression&&this._reqObj.putSFSArray(t.KEY_MATCH_EXPRESSION,this._matchExpression.toSFSArray())}}]),t}(f.BaseRequest);r.QuickJoinGameRequest=b},{"../../core/Exceptions":147,"../../entities/match/MatchExpression":152,"../../entities/objects/Room":156,"../Base":166,"babel-runtime/core-js/get-iterator":2,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],180:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.SetMMOItemVariables=void 0;var s=n(e("babel-runtime/helpers/classCallCheck")),i=n(e("babel-runtime/helpers/createClass")),a=function(){function e(){(0,s.default)(this,e)}return(0,i.default)(e,null,[{key:"KEY_ROOM_ID",get:function(){return"r"}},{key:"KEY_ITEM_ID",get:function(){return"i"}},{key:"KEY_VAR_LIST",get:function(){return"v"}}]),e}();r.SetMMOItemVariables=a},{"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19}],181:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.SetUserPositionRequest=void 0;var s=n(e("babel-runtime/core-js/object/seal")),i=n(e("babel-runtime/core-js/object/get-prototype-of")),a=n(e("babel-runtime/helpers/classCallCheck")),o=n(e("babel-runtime/helpers/possibleConstructorReturn")),u=n(e("babel-runtime/helpers/createClass")),l=n(e("babel-runtime/helpers/inherits")),c=e("../Base"),f=e("../../core/Exceptions"),h=e("../../entities/Data"),d=e("../../entities/objects/Room"),_=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(0,a.default)(this,t);var n=(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this,c.Requests.SetUserPosition));return n._pos=e,n._room=r,(0,s.default)(n),n}return(0,l.default)(t,e),(0,u.default)(t,null,[{key:"KEY_ROOM",get:function(){return"r"}},{key:"KEY_VEC3D",get:function(){return"v"}},{key:"KEY_PLUS_USER_LIST",get:function(){return"p"}},{key:"KEY_MINUS_USER_LIST",get:function(){return"m"}},{key:"KEY_PLUS_ITEM_LIST",get:function(){return"q"}},{key:"KEY_MINUS_ITEM_LIST",get:function(){return"n"}}]),(0,u.default)(t,[{key:"validate",value:function(e){var t=[];if(null!=this._pos&&this._pos instanceof h.Vec3D||t.push("Position must be an instance of Vec3D class"),null==this._room&&(this._room=e.lastJoinedRoom),null==this._room&&t.push("You are not joined in any room"),this._room instanceof d.MMORoom||t.push("Target room must be an instance of MMORoom class"),t.length>0)throw new f.SFSValidationError("SetUserPosition Error",t)}},{key:"execute",value:function(e){this._reqObj.putInt(t.KEY_ROOM,this._room.id),this._pos.isFloat?this._reqObj.putFloatArray(t.KEY_VEC3D,this._pos.toArray()):this._reqObj.putIntArray(t.KEY_VEC3D,this._pos.toArray())}}]),t}(c.BaseRequest);r.SetUserPositionRequest=_},{"../../core/Exceptions":147,"../../entities/Data":149,"../../entities/objects/Room":156,"../Base":166,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],182:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.BanUserRequest=void 0;var s=n(e("babel-runtime/core-js/object/seal")),i=n(e("babel-runtime/core-js/object/get-prototype-of")),a=n(e("babel-runtime/helpers/classCallCheck")),o=n(e("babel-runtime/helpers/possibleConstructorReturn")),u=n(e("babel-runtime/helpers/createClass")),l=n(e("babel-runtime/helpers/inherits")),c=e("../Base"),f=e("../../core/Exceptions"),h=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:24;(0,a.default)(this,t);var f=(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this,c.Requests.BanUser));return f._userId=e,f._message=r,f._banMode=n,f._delay=u,f._durationHours=l,(0,s.default)(f),f}return(0,l.default)(t,e),(0,u.default)(t,null,[{key:"KEY_USER_ID",get:function(){return"u"}},{key:"KEY_MESSAGE",get:function(){return"m"}},{key:"KEY_DELAY",get:function(){return"d"}},{key:"KEY_BAN_MODE",get:function(){return"b"}},{key:"KEY_BAN_DURATION_HOURS",get:function(){return"dh"}}]),(0,u.default)(t,[{key:"validate",value:function(e){var t=[];if(t.length>0)throw new f.SFSValidationError("BanUserRequest Error",t)}},{key:"execute",value:function(e){this._reqObj.putInt(t.KEY_USER_ID,this._userId),this._reqObj.putInt(t.KEY_DELAY,this._delay),this._reqObj.putInt(t.KEY_BAN_MODE,this._banMode),this._reqObj.putInt(t.KEY_BAN_DURATION_HOURS,this._durationHours),null!=this._message&&this._message.length>0&&this._reqObj.putUtfString(t.KEY_MESSAGE,this._message)}}]),t}(c.BaseRequest);r.BanUserRequest=h},{"../../core/Exceptions":147,"../Base":166,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],183:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.ChangeRoomCapacityRequest=void 0;var s=n(e("babel-runtime/core-js/object/seal")),i=n(e("babel-runtime/core-js/object/get-prototype-of")),a=n(e("babel-runtime/helpers/classCallCheck")),o=n(e("babel-runtime/helpers/possibleConstructorReturn")),u=n(e("babel-runtime/helpers/createClass")),l=n(e("babel-runtime/helpers/inherits")),c=e("../Base"),f=e("../../core/Exceptions"),h=e("../../entities/objects/Room"),d=function(e){function t(e,r,n){(0,a.default)(this,t);var u=(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this,c.Requests.ChangeRoomCapacity));return u._room=e,u._newMaxUsers=r,u._newMaxSpect=n,(0,s.default)(u),u}return(0,l.default)(t,e),(0,u.default)(t,null,[{key:"KEY_ROOM",get:function(){return"r"}},{key:"KEY_USER_SIZE",get:function(){return"u"}},{key:"KEY_SPEC_SIZE",get:function(){return"s"}}]),(0,u.default)(t,[{key:"validate",value:function(e){var t=[];if(this._room instanceof h.SFSRoom||t.push("Room must be an instance of SFSRoom class"),t.length>0)throw new f.SFSValidationError("ChangeRoomCapacityRequest Error",t)}},{key:"execute",value:function(e){this._reqObj.putInt(t.KEY_ROOM,this._room.id),this._reqObj.putInt(t.KEY_USER_SIZE,this._newMaxUsers),this._reqObj.putInt(t.KEY_SPEC_SIZE,this._newMaxSpect)}}]),t}(c.BaseRequest);r.ChangeRoomCapacityRequest=d},{"../../core/Exceptions":147,"../../entities/objects/Room":156,"../Base":166,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],184:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.ChangeRoomNameRequest=void 0;var s=n(e("babel-runtime/core-js/object/seal")),i=n(e("babel-runtime/core-js/object/get-prototype-of")),a=n(e("babel-runtime/helpers/classCallCheck")),o=n(e("babel-runtime/helpers/possibleConstructorReturn")),u=n(e("babel-runtime/helpers/createClass")),l=n(e("babel-runtime/helpers/inherits")),c=e("../Base"),f=e("../../core/Exceptions"),h=e("../../entities/objects/Room"),d=function(e){function t(e,r){(0,a.default)(this,t);var n=(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this,c.Requests.ChangeRoomName));return n._room=e,n._newName=r,(0,s.default)(n),n}return(0,l.default)(t,e),(0,u.default)(t,null,[{key:"KEY_ROOM",get:function(){return"r"}},{key:"KEY_NAME",get:function(){return"n"}}]),(0,u.default)(t,[{key:"validate",value:function(e){var t=[];if(this._room instanceof h.SFSRoom||t.push("Room must be an instance of SFSRoom class"),null!=this._newName&&0!==this._newName.length||t.push("New room name must be a non-null and non-empty string"),t.length>0)throw new f.SFSValidationError("ChangeRoomNameRequest Error",t)}},{key:"execute",value:function(e){this._reqObj.putInt(t.KEY_ROOM,this._room.id),this._reqObj.putUtfString(t.KEY_NAME,this._newName)}}]),t}(c.BaseRequest);r.ChangeRoomNameRequest=d},{"../../core/Exceptions":147,"../../entities/objects/Room":156,"../Base":166,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],185:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.ChangeRoomPasswordStateRequest=void 0;var s=n(e("babel-runtime/core-js/object/seal")),i=n(e("babel-runtime/core-js/object/get-prototype-of")),a=n(e("babel-runtime/helpers/classCallCheck")),o=n(e("babel-runtime/helpers/possibleConstructorReturn")),u=n(e("babel-runtime/helpers/createClass")),l=n(e("babel-runtime/helpers/inherits")),c=e("../Base"),f=e("../../core/Exceptions"),h=e("../../entities/objects/Room"),d=function(e){function t(e,r){(0,a.default)(this,t);var n=(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this,c.Requests.ChangeRoomPassword));return n._room=e,n._newPass=r,(0,s.default)(n),n}return(0,l.default)(t,e),(0,u.default)(t,null,[{key:"KEY_ROOM",get:function(){return"r"}},{key:"KEY_PASS",get:function(){return"p"}}]),(0,u.default)(t,[{key:"validate",value:function(e){var t=[];if(this._room instanceof h.SFSRoom||t.push("Room must be an instance of SFSRoom class"),null==this._newPass&&t.push("New room password must be a non-null string (empty string to remove the password)"),t.length>0)throw new f.SFSValidationError("ChangeRoomPasswordStateRequest Error",t)}},{key:"execute",value:function(e){this._reqObj.putInt(t.KEY_ROOM,this._room.id),this._reqObj.putUtfString(t.KEY_PASS,this._newPass)}}]),t}(c.BaseRequest);r.ChangeRoomPasswordStateRequest=d},{"../../core/Exceptions":147,"../../entities/objects/Room":156,"../Base":166,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],186:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.CreateRoomRequest=void 0;var s=n(e("babel-runtime/core-js/get-iterator")),i=n(e("babel-runtime/core-js/object/seal")),a=n(e("babel-runtime/core-js/object/get-prototype-of")),o=n(e("babel-runtime/helpers/classCallCheck")),u=n(e("babel-runtime/helpers/possibleConstructorReturn")),l=n(e("babel-runtime/helpers/createClass")),c=n(e("babel-runtime/helpers/inherits")),f=e("../Base"),h=e("../../core/Exceptions"),d=e("../Settings"),_=e("../../entities/Data"),b=e("../../entities/objects/Room"),p=e("../../entities/variables/RoomVariable"),m=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,o.default)(this,t);var s=(0,u.default)(this,(t.__proto__||(0,a.default)(t)).call(this,f.Requests.CreateRoom));return s._settings=e,s._autoJoin=r,s._roomToLeave=n,(0,i.default)(s),s}return(0,c.default)(t,e),(0,l.default)(t,null,[{key:"KEY_ROOM",get:function(){return"r"}},{key:"KEY_NAME",get:function(){return"n"}},{key:"KEY_PASSWORD",get:function(){return"p"}},{key:"KEY_GROUP_ID",get:function(){return"g"}},{key:"KEY_ISGAME",get:function(){return"ig"}},{key:"KEY_MAXUSERS",get:function(){return"mu"}},{key:"KEY_MAXSPECTATORS",get:function(){return"ms"}},{key:"KEY_MAXVARS",get:function(){return"mv"}},{key:"KEY_ROOMVARS",get:function(){return"rv"}},{key:"KEY_PERMISSIONS",get:function(){return"pm"}},{key:"KEY_EVENTS",get:function(){return"ev"}},{key:"KEY_EXTID",get:function(){return"xn"}},{key:"KEY_EXTCLASS",get:function(){return"xc"}},{key:"KEY_EXTPROP",get:function(){return"xp"}},{key:"KEY_AUTOJOIN",get:function(){return"aj"}},{key:"KEY_ROOM_TO_LEAVE",get:function(){return"rl"}},{key:"KEY_ALLOW_JOIN_INVITATION_BY_OWNER",get:function(){return"aji"}},{key:"KEY_MMO_DEFAULT_AOI",get:function(){return"maoi"}},{key:"KEY_MMO_MAP_LOW_LIMIT",get:function(){return"mllm"}},{key:"KEY_MMO_MAP_HIGH_LIMIT",get:function(){return"mlhm"}},{key:"KEY_MMO_USER_MAX_LIMBO_SECONDS",get:function(){return"muls"}},{key:"KEY_MMO_PROXIMITY_UPDATE_MILLIS",get:function(){return"mpum"}},{key:"KEY_MMO_SEND_ENTRY_POINT",get:function(){return"msep"}}]),(0,l.default)(t,[{key:"validate",value:function(e){if(!(this._settings instanceof d.RoomSettings))throw new h.SFSValidationError("CreateRoomRequest Error",["Room configuration must be an instance of RoomSettings class"]);var t=[];if(null!=this._settings.name&&0!==this._settings.name.length||t.push("Missing Room name"),this._settings.maxUsers<=0&&t.push("Max number of users must be > 0"),this._settings.maxSpectators<0&&t.push("Max number of spectators must be >= 0"),this._settings.maxVariables<0&&t.push("Max number of Room Variables must be >= 0"),null!=this._settings.variables&&(this._settings.variables instanceof Array?this._settings.variables.every(function(e){return e instanceof p.SFSRoomVariable})||t.push("Each Room Variable must be an instance of SFSRoomVariable class"):t.push("Room Variables must be passed in an array")),null==this._settings.permissions||this._settings.permissions instanceof d.RoomPermissions||t.push("Allowed room permissions must be an instance of RoomPermissions class"),null==this._settings.events||this._settings.events instanceof d.RoomEvents||t.push("Allowed room events must be an instance of RoomEvents class"),null!=this._settings.extension&&(this._settings.extension instanceof d.RoomExtension?(null!=this._settings.extension.className&&0!==this._settings.extension.className.length||t.push("Missing Room Extension class name"),null!=this._settings.extension.id&&0!==this._settings.extension.id.length||t.push("Missing Room Extension id")):t.push("Room Extension settings must be an instance of RoomExtension class")),this._settings instanceof d.MMORoomSettings&&(null==this._settings.defaultAOI&&t.push("Missing MMORoom's default AoI (Area of Interest)"),this._settings.defaultAOI instanceof _.Vec3D||t.push("MMORoom's AoI (Area of Interest) must be an instance of Vec3D class"),null!=this._settings.mapLimits&&(this._settings.mapLimits instanceof d.MapLimits?(null!=this._settings.mapLimits.lowerLimit&&null!=this._settings.mapLimits.higherLimit||t.push("MMORoom's lower and higher map limits must be both set"),this._settings.mapLimits.lowerLimit instanceof _.Vec3D&&this._settings.mapLimits.higherLimit instanceof _.Vec3D||t.push("MMORoom's lower and higher map limits must be both instances of Vec3D class")):t.push("MMORoom's map limits must be set in an instance of MapLimits class"))),null==this._roomToLeave||this._roomToLeave instanceof b.SFSRoom||t.push("Room to leave must be an instance of SFSRoom class"),t.length>0)throw new h.SFSValidationError("CreateRoomRequest Error",t)}},{key:"execute",value:function(e){if(this._reqObj.putUtfString(t.KEY_NAME,this._settings.name),this._reqObj.putUtfString(t.KEY_GROUP_ID,this._settings.groupId),this._reqObj.putUtfString(t.KEY_PASSWORD,this._settings.password),this._reqObj.putBool(t.KEY_ISGAME,this._settings.isGame),this._reqObj.putShort(t.KEY_MAXUSERS,this._settings.maxUsers),this._reqObj.putShort(t.KEY_MAXSPECTATORS,this._settings.maxSpectators),this._reqObj.putShort(t.KEY_MAXVARS,this._settings.maxVariables),this._reqObj.putBool(t.KEY_ALLOW_JOIN_INVITATION_BY_OWNER,this._settings.allowOwnerOnlyInvitation),null!=this._settings.variables&&this._settings.variables.length>0){var r=new _.SFSArray,n=!0,i=!1,a=void 0;try{for(var o,u=(0,s.default)(this._settings.variables);!(n=(o=u.next()).done);n=!0){var l=o.value;r.addSFSArray(l.toSFSArray())}}catch(e){i=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}this._reqObj.putSFSArray(t.KEY_ROOMVARS,r)}if(null!=this._settings.permissions){var c=[];c.push(this._settings.permissions.allowNameChange),c.push(this._settings.permissions.allowPasswordStateChange),c.push(this._settings.permissions.allowPublicMessages),c.push(this._settings.permissions.allowResizing),this._reqObj.putBoolArray(t.KEY_PERMISSIONS,c)}if(null!=this._settings.events){var f=[];f.push(this._settings.events.allowUserEnter),f.push(this._settings.events.allowUserExit),f.push(this._settings.events.allowUserCountChange),f.push(this._settings.events.allowUserVariablesUpdate),this._reqObj.putBoolArray(t.KEY_EVENTS,f)}null!=this._settings.extension&&(this._reqObj.putUtfString(t.KEY_EXTID,this._settings.extension.id),this._reqObj.putUtfString(t.KEY_EXTCLASS,this._settings.extension.className),null!=this._settings.extension.propertiesFile&&this._settings.extension.propertiesFile.length>0&&this._reqObj.putUtfString(t.KEY_EXTPROP,this._settings.extension.propertiesFile)),this._settings instanceof d.MMORoomSettings&&(this._settings.defaultAOI.isFloat?(this._reqObj.putFloatArray(t.KEY_MMO_DEFAULT_AOI,this._settings.defaultAOI.toArray()),null!=this._settings.mapLimits&&(this._reqObj.putFloatArray(t.KEY_MMO_MAP_LOW_LIMIT,this._settings.mapLimits.lowerLimit.toArray()),this._reqObj.putFloatArray(t.KEY_MMO_MAP_HIGH_LIMIT,this._settings.mapLimits.higherLimit.toArray()))):(this._reqObj.putIntArray(t.KEY_MMO_DEFAULT_AOI,this._settings.defaultAOI.toArray()),null!=this._settings.mapLimits&&(this._reqObj.putIntArray(t.KEY_MMO_MAP_LOW_LIMIT,this._settings.mapLimits.lowerLimit.toArray()),this._reqObj.putIntArray(t.KEY_MMO_MAP_HIGH_LIMIT,this._settings.mapLimits.higherLimit.toArray()))),this._reqObj.putShort(t.KEY_MMO_USER_MAX_LIMBO_SECONDS,this._settings.userMaxLimboSeconds),this._reqObj.putShort(t.KEY_MMO_PROXIMITY_UPDATE_MILLIS,this._settings.proximityListUpdateMillis),this._reqObj.putBool(t.KEY_MMO_SEND_ENTRY_POINT,this._settings.sendAOIEntryPoint)),this._reqObj.putBool(t.KEY_AUTOJOIN,this._autoJoin),null!=this._roomToLeave&&this._reqObj.putInt(t.KEY_ROOM_TO_LEAVE,this._roomToLeave.id)}}]),t}(f.BaseRequest);r.CreateRoomRequest=m},{"../../core/Exceptions":147,"../../entities/Data":149,"../../entities/objects/Room":156,"../../entities/variables/RoomVariable":160,"../Base":166,"../Settings":167,"babel-runtime/core-js/get-iterator":2,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],187:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.ExtensionRequest=void 0;var s=n(e("babel-runtime/core-js/object/seal")),i=n(e("babel-runtime/core-js/object/get-prototype-of")),a=n(e("babel-runtime/helpers/classCallCheck")),o=n(e("babel-runtime/helpers/possibleConstructorReturn")),u=n(e("babel-runtime/helpers/createClass")),l=n(e("babel-runtime/helpers/inherits")),c=e("../Base"),f=e("../../core/Exceptions"),h=e("../../entities/Data"),d=e("../../entities/objects/Room"),_=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,a.default)(this,t);var u=(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this,c.Requests.CallExtension));return u._targetController=1,u._extCmd=e,u._params=r,u._room=n,null==u._params&&(u._params=new h.SFSObject),(0,s.default)(u),u}return(0,l.default)(t,e),(0,u.default)(t,null,[{key:"KEY_CMD",get:function(){return"c"}},{key:"KEY_PARAMS",get:function(){return"p"}},{key:"KEY_ROOM",get:function(){return"r"}}]),(0,u.default)(t,[{key:"validate",value:function(e){var t=[];if(null!=this._extCmd&&0!==this._extCmd.length||t.push("Missing extension command"),null==this._params||this._params instanceof h.SFSObject||t.push("Custom parameters must be set in a SFSObject class instance"),null==this._room||this._room instanceof d.SFSRoom||t.push("Room must be an instance of SFSRoom class"),t.length>0)throw new f.SFSValidationError("ExtensionRequest Error",t)}},{key:"execute",value:function(e){this._reqObj.putUtfString(t.KEY_CMD,this._extCmd),this._reqObj.putInt(t.KEY_ROOM,null==this._room?-1:this._room.id),this._reqObj.putSFSObject(t.KEY_PARAMS,this._params)}}]),t}(c.BaseRequest);r.ExtensionRequest=_},{"../../core/Exceptions":147,"../../entities/Data":149,"../../entities/objects/Room":156,"../Base":166,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],188:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.FindRoomsRequest=void 0;var s=n(e("babel-runtime/core-js/object/seal")),i=n(e("babel-runtime/core-js/object/get-prototype-of")),a=n(e("babel-runtime/helpers/classCallCheck")),o=n(e("babel-runtime/helpers/possibleConstructorReturn")),u=n(e("babel-runtime/helpers/createClass")),l=n(e("babel-runtime/helpers/inherits")),c=e("../Base"),f=e("../../core/Exceptions"),h=e("../../entities/match/MatchExpression"),d=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,a.default)(this,t);var u=(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this,c.Requests.FindRooms));return u._matchExpr=e,u._groupId=r,u._limit=n,(0,s.default)(u),u}return(0,l.default)(t,e),(0,u.default)(t,null,[{key:"KEY_EXPRESSION",get:function(){return"e"}},{key:"KEY_GROUP",get:function(){return"g"}},{key:"KEY_LIMIT",get:function(){return"l"}},{key:"KEY_FILTERED_ROOMS",get:function(){return"fr"}}]),(0,u.default)(t,[{key:"validate",value:function(e){var t=[];if(null==this._matchExpr&&t.push("Missing match expression"),null==this._matchExpr||this._matchExpr instanceof h.MatchExpression||t.push("Match expression must be passed as an instance of MatchExpression class"),t.length>0)throw new f.SFSValidationError("FindRoomsRequest Error",t)}},{key:"execute",value:function(e){this._reqObj.putSFSArray(t.KEY_EXPRESSION,this._matchExpr.toSFSArray()),null!=this._groupId&&this._reqObj.putUtfString(t.KEY_GROUP,this._groupId),this._limit>0&&this._reqObj.putShort(t.KEY_LIMIT,this._limit)}}]),t}(c.BaseRequest);r.FindRoomsRequest=d},{"../../core/Exceptions":147,"../../entities/match/MatchExpression":152,"../Base":166,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],189:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.FindUsersRequest=void 0;var s=n(e("babel-runtime/core-js/object/seal")),i=n(e("babel-runtime/core-js/object/get-prototype-of")),a=n(e("babel-runtime/helpers/classCallCheck")),o=n(e("babel-runtime/helpers/possibleConstructorReturn")),u=n(e("babel-runtime/helpers/createClass")),l=n(e("babel-runtime/helpers/inherits")),c=e("../Base"),f=e("../../core/Exceptions"),h=e("../../entities/objects/Room"),d=e("../../entities/match/MatchExpression"),_=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,a.default)(this,t);var u=(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this,c.Requests.FindUsers));return u._matchExpr=e,u._target=r,u._limit=n,(0,s.default)(u),u}return(0,l.default)(t,e),(0,u.default)(t,null,[{key:"KEY_EXPRESSION",get:function(){return"e"}},{key:"KEY_GROUP",get:function(){return"g"}},{key:"KEY_ROOM",get:function(){return"r"}},{key:"KEY_LIMIT",get:function(){return"l"}},{key:"KEY_FILTERED_USERS",get:function(){return"fu"}}]),(0,u.default)(t,[{key:"validate",value:function(e){var t=[];if(null==this._matchExpr&&t.push("Missing match expression"),null==this._matchExpr||this._matchExpr instanceof d.MatchExpression||t.push("Match expression must be passed as an instance of MatchExpression class"),t.length>0)throw new f.SFSValidationError("FindUsersRequest Error",t)}},{key:"execute",value:function(e){this._reqObj.putSFSArray(t.KEY_EXPRESSION,this._matchExpr.toSFSArray()),null!=this._target&&(this._target instanceof h.SFSRoom?this._reqObj.putInt(t.KEY_ROOM,this._target.id):"string"==typeof this._target?this._reqObj.putUtfString(t.KEY_GROUP,this._target):this._logger.warn("Unsupported target type for FindUsersRequest: "+this._target)),this._limit>0&&this._reqObj.putShort(t.KEY_LIMIT,this._limit)}}]),t}(c.BaseRequest);r.FindUsersRequest=_},{"../../core/Exceptions":147,"../../entities/match/MatchExpression":152,"../../entities/objects/Room":156,"../Base":166,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],190:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.HandshakeRequest=void 0;var s=n(e("babel-runtime/core-js/object/seal")),i=n(e("babel-runtime/core-js/object/get-prototype-of")),a=n(e("babel-runtime/helpers/classCallCheck")),o=n(e("babel-runtime/helpers/possibleConstructorReturn")),u=n(e("babel-runtime/helpers/createClass")),l=n(e("babel-runtime/helpers/inherits")),c=e("../Base"),f=function(e){function t(e,r){(0,a.default)(this,t);var n=(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this,c.Requests.Handshake));return n._apiVersion=e,n._clientDetails=r,(0,s.default)(n),n}return(0,l.default)(t,e),(0,u.default)(t,null,[{key:"KEY_SESSION_TOKEN",get:function(){return"tk"}},{key:"KEY_API",get:function(){return"api"}},{key:"KEY_COMPRESSION_THRESHOLD",get:function(){return"ct"}},{key:"KEY_CLIENT_TYPE",get:function(){return"cl"}},{key:"KEY_MAX_MESSAGE_SIZE",get:function(){return"ms"}}]),(0,u.default)(t,[{key:"validate",value:function(e){}},{key:"execute",value:function(e){this._reqObj.putUtfString(t.KEY_API,this._apiVersion),this._reqObj.putUtfString(t.KEY_CLIENT_TYPE,this._clientDetails)}}]),t}(c.BaseRequest);r.HandshakeRequest=f},{"../Base":166,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],191:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.JoinRoomRequest=void 0;var s=n(e("babel-runtime/core-js/object/seal")),i=n(e("babel-runtime/core-js/object/get-prototype-of")),a=n(e("babel-runtime/helpers/classCallCheck")),o=n(e("babel-runtime/helpers/possibleConstructorReturn")),u=n(e("babel-runtime/helpers/createClass")),l=n(e("babel-runtime/helpers/inherits")),c=e("../Base"),f=e("../../core/Exceptions"),h=e("../../entities/objects/Room"),d=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,u=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,a.default)(this,t);var l=(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this,c.Requests.JoinRoom));return"string"==typeof e?l._rName=e:"number"==typeof e?l._rId=e:e instanceof h.SFSRoom&&(l._rId=e.id,l._rName=e.name),l._password=r,l._roomIdToLeave=n,l._asSpectator=u,(0,s.default)(l),l}return(0,l.default)(t,e),(0,u.default)(t,null,[{key:"KEY_ROOM",get:function(){return"r"}},{key:"KEY_USER_LIST",get:function(){return"ul"}},{key:"KEY_ROOM_NAME",get:function(){return"n"}},{key:"KEY_ROOM_ID",get:function(){return"i"}},{key:"KEY_PASS",get:function(){return"p"}},{key:"KEY_ROOM_TO_LEAVE",get:function(){return"rl"}},{key:"KEY_AS_SPECTATOR",get:function(){return"sp"}}]),(0,u.default)(t,[{key:"validate",value:function(e){if(null==this._rId&&null==this._rName)throw new f.SFSValidationError("JoinRoomRequest Error",["Missing Room id or name, please provide one of the two or an existing SFSRoom object"])}},{key:"execute",value:function(e){e._isJoining=!0,this._rId>=0?this._reqObj.putInt(t.KEY_ROOM_ID,this._rId):null!=this._rName&&this._reqObj.putUtfString(t.KEY_ROOM_NAME,this._rName),null!=this._password&&this._reqObj.putUtfString(t.KEY_PASS,this._password),null!=this._roomIdToLeave&&this._reqObj.putInt(t.KEY_ROOM_TO_LEAVE,this._roomIdToLeave),this._asSpectator&&this._reqObj.putBool(t.KEY_AS_SPECTATOR,this._asSpectator)}}]),t}(c.BaseRequest);r.JoinRoomRequest=d},{"../../core/Exceptions":147,"../../entities/objects/Room":156,"../Base":166,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],192:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.KickUserRequest=void 0;var s=n(e("babel-runtime/core-js/object/seal")),i=n(e("babel-runtime/core-js/object/get-prototype-of")),a=n(e("babel-runtime/helpers/classCallCheck")),o=n(e("babel-runtime/helpers/possibleConstructorReturn")),u=n(e("babel-runtime/helpers/createClass")),l=n(e("babel-runtime/helpers/inherits")),c=e("../Base"),f=e("../../core/Exceptions"),h=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;(0,a.default)(this,t);var u=(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this,c.Requests.KickUser));return n<0&&(n=0),u._userId=e,u._message=r,u._delay=n,(0,s.default)(u),u}return(0,l.default)(t,e),(0,u.default)(t,null,[{key:"KEY_USER_ID",get:function(){return"u"}},{key:"KEY_MESSAGE",get:function(){return"m"}},{key:"KEY_DELAY",get:function(){return"d"}}]),(0,u.default)(t,[{key:"validate",value:function(e){var t=[];if(t.length>0)throw new f.SFSValidationError("KickUserRequest Error",t)}},{key:"execute",value:function(e){this._reqObj.putInt(t.KEY_USER_ID,this._userId),this._reqObj.putInt(t.KEY_DELAY,this._delay),null!=this._message&&this._message.length>0&&this._reqObj.putUtfString(t.KEY_MESSAGE,this._message)}}]),t}(c.BaseRequest);r.KickUserRequest=h},{"../../core/Exceptions":147,"../Base":166,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],193:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.LeaveRoomRequest=void 0;var s=n(e("babel-runtime/core-js/object/seal")),i=n(e("babel-runtime/core-js/object/get-prototype-of")),a=n(e("babel-runtime/helpers/classCallCheck")),o=n(e("babel-runtime/helpers/possibleConstructorReturn")),u=n(e("babel-runtime/helpers/createClass")),l=n(e("babel-runtime/helpers/inherits")),c=e("../Base"),f=e("../../core/Exceptions"),h=e("../../entities/objects/Room"),d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,a.default)(this,t);var r=(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this,c.Requests.LeaveRoom));return r._room=e,(0,s.default)(r),r}return(0,l.default)(t,e),(0,u.default)(t,null,[{key:"KEY_ROOM_ID",get:function(){return"r"}}]),(0,u.default)(t,[{key:"validate",value:function(e){var t=[];if(e.getJoinedRooms().length<1&&t.push("You are not joined in any Room"),null==this._room||this._room instanceof h.SFSRoom||t.push("Room must be an instance of SFSRoom class"),t.length>0)throw new f.SFSValidationError("LeaveRoomRequest Error",t)}},{key:"execute",value:function(e){null!=this._room&&this._reqObj.putInt(t.KEY_ROOM_ID,this._room.id)}}]),t}(c.BaseRequest);r.LeaveRoomRequest=d},{"../../core/Exceptions":147,"../../entities/objects/Room":156,"../Base":166,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],194:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.LoginRequest=void 0;var s=n(e("babel-runtime/core-js/object/seal")),i=n(e("babel-runtime/core-js/object/get-prototype-of")),a=n(e("babel-runtime/helpers/classCallCheck")),o=n(e("babel-runtime/helpers/possibleConstructorReturn")),u=n(e("babel-runtime/helpers/createClass")),l=n(e("babel-runtime/helpers/inherits")),c=e("../Base"),f=e("../../core/Exceptions"),h=e("../../entities/Data"),d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;(0,a.default)(this,t);var l=(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this,c.Requests.Login));return l._userName=e,l._password=r,l._params=n,l._zoneName=u,(0,s.default)(l),l}return(0,l.default)(t,e),(0,u.default)(t,null,[{key:"KEY_ZONE_NAME",get:function(){return"zn"}},{key:"KEY_USER_NAME",get:function(){return"un"}},{key:"KEY_PASSWORD",get:function(){return"pw"}},{key:"KEY_PARAMS",get:function(){return"p"}},{key:"KEY_PRIVILEGE_ID",get:function(){return"pi"}},{key:"KEY_ID",get:function(){return"id"}},{key:"KEY_ROOMLIST",get:function(){return"rl"}},{key:"KEY_RECONNECTION_SECONDS",get:function(){return"rs"}}]),(0,u.default)(t,[{key:"validate",value:function(e){if(null!=e.mySelf)throw new f.SFSValidationError("LoginRequest error",["You are already logged in; logout before attempting a new login"]);var t=[],r=null!=e.config&&null!=e.config.zone?e.config.zone:null;if(null!=this._zoneName&&(r=this._zoneName),null==r||0===r.length?t.push("Missing Zone name"):this._zoneName=r,null==this._params||this._params instanceof h.SFSObject||t.push("Custom parameters must be passed in a SFSObject"),t.length>0)throw new f.SFSValidationError("LoginRequest Error",t)}},{key:"execute",value:function(e){null==this._userName&&(this._userName=""),null==this._password&&(this._password=""),this._reqObj.putUtfString(t.KEY_ZONE_NAME,this._zoneName),this._reqObj.putUtfString(t.KEY_USER_NAME,this._userName),this._reqObj.putUtfString(t.KEY_PASSWORD,this._password.length>0?(new MD5).hex_md5(e.sessionToken+this._password):""),null!=this._params&&this._reqObj.putSFSObject(t.KEY_PARAMS,this._params)}}]),t}(c.BaseRequest);r.LoginRequest=d},{"../../core/Exceptions":147,"../../entities/Data":149,"../Base":166,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],195:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.LogoutRequest=void 0;var s=n(e("babel-runtime/core-js/object/seal")),i=n(e("babel-runtime/core-js/object/get-prototype-of")),a=n(e("babel-runtime/helpers/classCallCheck")),o=n(e("babel-runtime/helpers/possibleConstructorReturn")),u=n(e("babel-runtime/helpers/createClass")),l=n(e("babel-runtime/helpers/inherits")),c=e("../Base"),f=e("../../core/Exceptions"),h=function(e){function t(){(0,a.default)(this,t);var e=(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this,c.Requests.Logout));return(0,s.default)(e),e}return(0,l.default)(t,e),(0,u.default)(t,null,[{key:"KEY_ZONE_NAME",get:function(){return"zn"}}]),(0,u.default)(t,[{key:"validate",value:function(e){if(null==e.mySelf)throw new f.SFSValidationError("LogoutRequest error",["You are not logged in"])}},{key:"execute",value:function(e){}}]),t}(c.BaseRequest);r.LogoutRequest=h},{"../../core/Exceptions":147,"../Base":166,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],196:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.AdminMessageRequest=r.ModeratorMessageRequest=r.ObjectMessageRequest=r.PrivateMessageRequest=r.PublicMessageRequest=r.GenericMessageRequest=r.GenericMessageType=void 0;var s=n(e("babel-runtime/core-js/array/from")),i=n(e("babel-runtime/core-js/set")),a=n(e("babel-runtime/core-js/object/seal")),o=n(e("babel-runtime/core-js/object/get-prototype-of")),u=n(e("babel-runtime/helpers/classCallCheck")),l=n(e("babel-runtime/helpers/possibleConstructorReturn")),c=n(e("babel-runtime/helpers/createClass")),f=n(e("babel-runtime/helpers/inherits")),h=n(e("babel-runtime/core-js/object/freeze")),d=e("../Base"),_=e("../../core/Exceptions"),b=e("../Settings"),p=e("../../entities/Data"),m=e("../../entities/objects/Room"),y=e("../../entities/objects/User"),g=(0,h.default)({PUBLIC_MSG:0,PRIVATE_MSG:1,MODERATOR_MSG:2,ADMING_MSG:3,OBJECT_MSG:4,BUDDY_MSG:5}),v=function(e){function t(){(0,u.default)(this,t);var e=(0,l.default)(this,(t.__proto__||(0,o.default)(t)).call(this,d.Requests.GenericMessage));return e._type=-1,e._room=null,e._user=null,e._message=null,e._params=null,e._recipient=null,e._sendMode=-1,(0,a.default)(e),e}return(0,f.default)(t,e),(0,c.default)(t,null,[{key:"KEY_ROOM_ID",get:function(){return"r"}},{key:"KEY_USER_ID",get:function(){return"u"}},{key:"KEY_MESSAGE",get:function(){return"m"}},{key:"KEY_MESSAGE_TYPE",get:function(){return"t"}},{key:"KEY_RECIPIENT",get:function(){return"rc"}},{key:"KEY_RECIPIENT_MODE",get:function(){return"rm"}},{key:"KEY_XTRA_PARAMS",get:function(){return"p"}},{key:"KEY_SENDER_DATA",get:function(){return"sd"}}]),(0,c.default)(t,[{key:"validate",value:function(e){if(this._type<0)throw new _.SFSValidationError("GenericMessageRequest Error",["Unsupported message type: "+this._type]);var t=[];switch(this._type){case g.PUBLIC_MSG:this._validatePublicMessage(e,t);break;case g.PRIVATE_MSG:this._validatePrivateMessage(e,t);break;case g.OBJECT_MSG:this._validateObjectMessage(e,t);break;case g.BUDDY_MSG:this._validateBuddyMessage(e,t);break;default:this._validateSuperUserMessage(e,t)}if(t.length>0)throw new _.SFSValidationError("GenericMessageRequest Error",t)}},{key:"execute",value:function(e){switch(this._reqObj.putByte(t.KEY_MESSAGE_TYPE,this._type),this._type){case g.PUBLIC_MSG:this._executePublicMessage(e);break;case g.PRIVATE_MSG:this._executePrivateMessage(e);break;case g.OBJECT_MSG:this._executeObjectMessage(e);break;case g.BUDDY_MSG:this._executeBuddyMessage(e);break;default:this._executeSuperUserMessage(e)}}},{key:"_validatePublicMessage",value:function(e,t){null!=this._message&&0!==this._message.length||t.push("Public message is empty"),null==this._room&&(this._room=e.lastJoinedRoom),null==this._room?t.push("You must be joined in a Room to send a message"):this._room instanceof m.SFSRoom?e.getJoinedRooms().indexOf(this._room)<0&&t.push("You are not joined in the target Room: "+this._room):t.push("Target Room must be an instance of SFSRoom class"),null==this._params||this._params instanceof p.SFSObject||t.push("Message parameters must be set in a SFSObject class instance")}},{key:"_validatePrivateMessage",value:function(e,t){null!=this._message&&0!==this._message.length||t.push("Private message is empty"),this._recipient<0&&t.push("Invalid recipient id: "+this._recipient),null==this._params||this._params instanceof p.SFSObject||t.push("Message parameters must be set in a SFSObject class instance")}},{key:"_validateObjectMessage",value:function(e,t){null==this._params?t.push("Object message is null"):this._params instanceof p.SFSObject||t.push("Message object must be an instance of SFSObject class"),null==this._room&&(this._room=e.lastJoinedRoom),null==this._room?t.push("You must be joined in a Room to send a message"):this._room instanceof m.SFSRoom?e.getJoinedRooms().indexOf(this._room)<0&&t.push("You are not joined in the target Room: "+this._room):t.push("Target Room must be an instance of SFSRoom class"),null!=this._recipient&&(this._recipient instanceof Array?this._recipient.every(function(e){return e instanceof y.SFSUser})||t.push("Each message recipient must be an instance of SFSUser class"):t.push("Message recipients must be passed in an array"),this._recipient.length>this._room.capacity&&t.push("The number of recipients is bigger than the target Room capacity: "+this._recipient.length))}},{key:"_validateBuddyMessage",value:function(e,t){e.buddyManager.isInited||t.push("Buddy List not yet initialized; please send an InitBuddyRequest first"),!1===e.buddyManager.myOnlineState&&t.push("Can't send messages while you are offline in the Buddy List system"),null!=this._message&&0!==this._message.length||t.push("Buddy message is empty"),this._recipient<0&&t.push("Recipient is offline or not in your Buddy List"),null==this._params||this._params instanceof p.SFSObject||t.push("Message parameters must be set in a SFSObject class instance")}},{key:"_validateSuperUserMessage",value:function(e,t){switch(null!=this._message&&0!==this._message.length||t.push("Moderator message is empty"),null==this._params||this._params instanceof p.SFSObject||t.push("Message parameters must be set in a SFSObject class instance"),this._sendMode){case b.MessageRecipientMode.TO_USER:this._recipient instanceof y.SFSUser||t.push("Recipient must be an instance of SFSUser class");break;case b.MessageRecipientMode.TO_ROOM:this._recipient instanceof m.SFSRoom||t.push("Recipient must be an instance of SFSRoom class");break;case b.MessageRecipientMode.TO_GROUP:"string"!=typeof this._recipient&&t.push("Recipient must be a string (the groupId)")}}},{key:"_executePublicMessage",value:function(e){this._reqObj.putInt(t.KEY_ROOM_ID,this._room.id),this._reqObj.putInt(t.KEY_USER_ID,e.mySelf.id),this._reqObj.putUtfString(t.KEY_MESSAGE,this._message),null!=this._params&&this._reqObj.putSFSObject(t.KEY_XTRA_PARAMS,this._params)}},{key:"_executePrivateMessage",value:function(e){this._reqObj.putInt(t.KEY_RECIPIENT,this._recipient),this._reqObj.putUtfString(t.KEY_MESSAGE,this._message),null!=this._params&&this._reqObj.putSFSObject(t.KEY_XTRA_PARAMS,this._params)}},{key:"_executeBuddyMessage",value:function(e){this._reqObj.putInt(t.KEY_RECIPIENT,this._recipient),this._reqObj.putUtfString(t.KEY_MESSAGE,this._message),null!=this._params&&this._reqObj.putSFSObject(t.KEY_XTRA_PARAMS,this._params)}},{key:"_executeSuperUserMessage",value:function(e){switch(this._reqObj.putUtfString(t.KEY_MESSAGE,this._message),null!=this._params&&this._reqObj.putSFSObject(t.KEY_XTRA_PARAMS,this._params),this._reqObj.putInt(t.KEY_RECIPIENT_MODE,this._sendMode),this._sendMode){case b.MessageRecipientMode.TO_USER:case b.MessageRecipientMode.TO_ROOM:this._reqObj.putInt(t.KEY_RECIPIENT,this._recipient.id);break;case b.MessageRecipientMode.TO_GROUP:this._reqObj.putUtfString(t.KEY_RECIPIENT,this._recipient)}}},{key:"_executeObjectMessage",value:function(e){this._reqObj.putInt(t.KEY_ROOM_ID,this._room.id),this._reqObj.putSFSObject(t.KEY_XTRA_PARAMS,this._params);var r=new i.default;if(null!=this._recipient)for(var n in this._recipient)r.add(n.id);r.size>0&&this._reqObj.putIntArray(t.KEY_RECIPIENT,(0,s.default)(r))}}]),t}(d.BaseRequest),S=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,u.default)(this,t);var s=(0,l.default)(this,(t.__proto__||(0,o.default)(t)).call(this));return s._type=g.OBJECT_MSG,s._params=e,s._room=r,s._recipient=n,(0,a.default)(s),s}return(0,f.default)(t,e),t}(v),R=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,u.default)(this,t);var s=(0,l.default)(this,(t.__proto__||(0,o.default)(t)).call(this));return s._type=g.PUBLIC_MSG,s._message=e,s._room=n,s._params=r,(0,a.default)(s),s}return(0,f.default)(t,e),t}(v),E=function(e){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,u.default)(this,t);var s=(0,l.default)(this,(t.__proto__||(0,o.default)(t)).call(this));return s._type=g.PRIVATE_MSG,s._message=e,s._recipient=r,s._params=n,(0,a.default)(s),s}return(0,f.default)(t,e),t}(v),O=function(e){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,u.default)(this,t);var s=(0,l.default)(this,(t.__proto__||(0,o.default)(t)).call(this));if(null==r)throw new _.SFSError("Recipient mode cannot be null");if(!(r instanceof b.MessageRecipientMode))throw new _.SFSError("Recipient mode must be an instance of MessageRecipientMode class");return s._type=g.MODERATOR_MSG,s._message=e,s._params=n,s._recipient=r.target,s._sendMode=r.mode,(0,a.default)(s),s}return(0,f.default)(t,e),t}(v),A=function(e){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,u.default)(this,t);var s=(0,l.default)(this,(t.__proto__||(0,o.default)(t)).call(this));if(null==r)throw new _.SFSError("Recipient mode cannot be null");if(!(r instanceof b.MessageRecipientMode))throw new _.SFSError("Recipient mode must an instance of MessageRecipientMode class");return s._type=g.ADMING_MSG,s._message=e,s._params=n,s._recipient=r.target,s._sendMode=r.mode,(0,a.default)(s),s}return(0,f.default)(t,e),t}(v);r.GenericMessageType=g,r.GenericMessageRequest=v,r.PublicMessageRequest=R,r.PrivateMessageRequest=E,r.ObjectMessageRequest=S,r.ModeratorMessageRequest=O,r.AdminMessageRequest=A},{"../../core/Exceptions":147,"../../entities/Data":149,"../../entities/objects/Room":156,"../../entities/objects/User":157,"../Base":166,"../Settings":167,"babel-runtime/core-js/array/from":1,"babel-runtime/core-js/object/freeze":10,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/core-js/set":15,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],197:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.PingPongRequest=void 0;var s=n(e("babel-runtime/core-js/object/seal")),i=n(e("babel-runtime/core-js/object/get-prototype-of")),a=n(e("babel-runtime/helpers/classCallCheck")),o=n(e("babel-runtime/helpers/createClass")),u=n(e("babel-runtime/helpers/possibleConstructorReturn")),l=n(e("babel-runtime/helpers/inherits")),c=e("../Base"),f=function(e){function t(){(0,a.default)(this,t);var e=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,c.Requests.PingPong));return(0,s.default)(e),e}return(0,l.default)(t,e),(0,o.default)(t,[{key:"validate",value:function(e){}},{key:"execute",value:function(e){}}]),t}(c.BaseRequest);r.PingPongRequest=f},{"../Base":166,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],198:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.PlayerToSpectatorRequest=void 0;var s=n(e("babel-runtime/core-js/object/seal")),i=n(e("babel-runtime/core-js/object/get-prototype-of")),a=n(e("babel-runtime/helpers/classCallCheck")),o=n(e("babel-runtime/helpers/possibleConstructorReturn")),u=n(e("babel-runtime/helpers/createClass")),l=n(e("babel-runtime/helpers/inherits")),c=e("../Base"),f=e("../../core/Exceptions"),h=e("../../entities/objects/Room"),d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,a.default)(this,t);var r=(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this,c.Requests.PlayerToSpectator));return r._room=e,(0,s.default)(r),r}return(0,l.default)(t,e),(0,u.default)(t,null,[{key:"KEY_ROOM_ID",get:function(){return"r"}},{key:"KEY_USER_ID",get:function(){return"u"}}]),(0,u.default)(t,[{key:"validate",value:function(e){var t=[];if(e.getJoinedRooms().length<1&&t.push("You are not joined in any Room"),null==this._room||this._room instanceof h.SFSRoom||t.push("Target Room must be an instance of SFSRoom class"),t.length>0)throw new f.SFSValidationError("PlayerToSpectatorRequest Error",t)}},{key:"execute",value:function(e){null==this._room&&(this._room=e.lastJoinedRoom),this._reqObj.putInt(t.KEY_ROOM_ID,this._room.id)}}]),t}(c.BaseRequest);r.PlayerToSpectatorRequest=d},{"../../core/Exceptions":147,"../../entities/objects/Room":156,"../Base":166,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],199:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.SetRoomVariablesRequest=void 0;var s=n(e("babel-runtime/core-js/get-iterator")),i=n(e("babel-runtime/core-js/object/seal")),a=n(e("babel-runtime/core-js/object/get-prototype-of")),o=n(e("babel-runtime/helpers/classCallCheck")),u=n(e("babel-runtime/helpers/possibleConstructorReturn")),l=n(e("babel-runtime/helpers/createClass")),c=n(e("babel-runtime/helpers/inherits")),f=e("../Base"),h=e("../../core/Exceptions"),d=e("../../entities/Data"),_=e("../../entities/objects/Room"),b=e("../../entities/variables/RoomVariable"),p=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(0,o.default)(this,t);var n=(0,u.default)(this,(t.__proto__||(0,a.default)(t)).call(this,f.Requests.SetRoomVariables));return n._roomVariables=e,n._room=r,(0,i.default)(n),n}return(0,c.default)(t,e),(0,l.default)(t,null,[{key:"KEY_VAR_ROOM",get:function(){return"r"}},{key:"KEY_VAR_LIST",get:function(){return"vl"}}]),(0,l.default)(t,[{key:"validate",value:function(e){var t=[];if(null==this._room&&(this._room=e.lastJoinedRoom),null==this._room?t.push("You must be joined in a Room to send a message"):this._room instanceof _.SFSRoom?e.getJoinedRooms().indexOf(this._room)<0&&t.push("You are not joined in the target Room: "+this._room):t.push("Target Room must be an instance of SFSRoom class"),null==this._roomVariables?t.push("No Room Variables specified"):this._roomVariables instanceof Array?0===this._roomVariables.length?t.push("No Room Variables specified"):this._roomVariables.every(function(e){return e instanceof b.SFSRoomVariable})||t.push("Room Variables must be passed as instances of SFSRoomVariable class"):t.push("Room Variables must be passed in an array"),t.length>0)throw new h.SFSValidationError("SetRoomVariablesRequest Error",t)}},{key:"execute",value:function(e){var r=new d.SFSArray,n=!0,i=!1,a=void 0;try{for(var o,u=(0,s.default)(this._roomVariables);!(n=(o=u.next()).done);n=!0){var l=o.value;r.addSFSArray(l.toSFSArray())}}catch(e){i=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}this._reqObj.putSFSArray(t.KEY_VAR_LIST,r),this._reqObj.putInt(t.KEY_VAR_ROOM,this._room.id)}}]),t}(f.BaseRequest);r.SetRoomVariablesRequest=p},{"../../core/Exceptions":147,"../../entities/Data":149,"../../entities/objects/Room":156,"../../entities/variables/RoomVariable":160,"../Base":166,"babel-runtime/core-js/get-iterator":2,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],200:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.SetUserVariablesRequest=void 0;var s=n(e("babel-runtime/core-js/get-iterator")),i=n(e("babel-runtime/core-js/object/seal")),a=n(e("babel-runtime/core-js/object/get-prototype-of")),o=n(e("babel-runtime/helpers/classCallCheck")),u=n(e("babel-runtime/helpers/possibleConstructorReturn")),l=n(e("babel-runtime/helpers/createClass")),c=n(e("babel-runtime/helpers/inherits")),f=e("../Base"),h=e("../../core/Exceptions"),d=e("../../entities/Data"),_=e("../../entities/variables/UserVariable"),b=function(e){function t(e){(0,o.default)(this,t);var r=(0,u.default)(this,(t.__proto__||(0,a.default)(t)).call(this,f.Requests.SetUserVariables));return r._userVariables=e,(0,i.default)(r),r}return(0,c.default)(t,e),(0,l.default)(t,null,[{key:"KEY_USER",get:function(){return"u"}},{key:"KEY_VAR_LIST",get:function(){return"vl"}}]),(0,l.default)(t,[{key:"validate",value:function(e){var t=[];if(null==this._userVariables?t.push("No User Variables specified"):this._userVariables instanceof Array?0===this._userVariables.length?t.push("No User Variables specified"):this._userVariables.every(function(e){return e instanceof _.SFSUserVariable})||t.push("User Variables must be passed as instances of SFSUserVariable class"):t.push("User Variables must be passed in an array"),t.length>0)throw new h.SFSValidationError("SetUserVariablesRequest Error",t)}},{key:"execute",value:function(e){var r=new d.SFSArray,n=!0,i=!1,a=void 0;try{for(var o,u=(0,s.default)(this._userVariables);!(n=(o=u.next()).done);n=!0){var l=o.value;r.addSFSArray(l.toSFSArray())}}catch(e){i=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}this._reqObj.putSFSArray(t.KEY_VAR_LIST,r)}}]),t}(f.BaseRequest);r.SetUserVariablesRequest=b},{"../../core/Exceptions":147,"../../entities/Data":149,"../../entities/variables/UserVariable":161,"../Base":166,"babel-runtime/core-js/get-iterator":2,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],201:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.SpectatorToPlayerRequest=void 0;var s=n(e("babel-runtime/core-js/object/seal")),i=n(e("babel-runtime/core-js/object/get-prototype-of")),a=n(e("babel-runtime/helpers/classCallCheck")),o=n(e("babel-runtime/helpers/possibleConstructorReturn")),u=n(e("babel-runtime/helpers/createClass")),l=n(e("babel-runtime/helpers/inherits")),c=e("../Base"),f=e("../../core/Exceptions"),h=e("../../entities/objects/Room"),d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;(0,a.default)(this,t);var r=(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this,c.Requests.SpectatorToPlayer));return r._room=e,(0,s.default)(r),r}return(0,l.default)(t,e),(0,u.default)(t,null,[{key:"KEY_ROOM_ID",get:function(){return"r"}},{key:"KEY_USER_ID",get:function(){return"u"}},{key:"KEY_PLAYER_ID",get:function(){return"p"}}]),(0,u.default)(t,[{key:"validate",value:function(e){var t=[];if(e.getJoinedRooms().length<1&&t.push("You are not joined in any Room"),null==this._room||this._room instanceof h.SFSRoom||t.push("Target Room must be an instance of SFSRoom class"),t.length>0)throw new f.SFSValidationError("SpectatorToPlayerRequest Error",t)}},{key:"execute",value:function(e){null==this._room&&(this._room=e.lastJoinedRoom),this._reqObj.putInt(t.KEY_ROOM_ID,this._room.id)}}]),t}(c.BaseRequest);r.SpectatorToPlayerRequest=d},{"../../core/Exceptions":147,"../../entities/objects/Room":156,"../Base":166,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],202:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.SubscribeRoomGroupRequest=void 0;var s=n(e("babel-runtime/core-js/object/seal")),i=n(e("babel-runtime/core-js/object/get-prototype-of")),a=n(e("babel-runtime/helpers/classCallCheck")),o=n(e("babel-runtime/helpers/possibleConstructorReturn")),u=n(e("babel-runtime/helpers/createClass")),l=n(e("babel-runtime/helpers/inherits")),c=e("../Base"),f=e("../../core/Exceptions"),h=function(e){function t(e){(0,a.default)(this,t);var r=(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this,c.Requests.SubscribeRoomGroup));return r._groupId=e,(0,s.default)(r),r}return(0,l.default)(t,e),(0,u.default)(t,null,[{key:"KEY_GROUP_ID",get:function(){return"g"}},{key:"KEY_ROOM_LIST",get:function(){return"rl"}}]),(0,u.default)(t,[{key:"validate",value:function(e){var t=[];if(null!=this._groupId&&0!==this._groupId.length||t.push("Invalid group id passed; must be a string with at least one character"),t.length>0)throw new f.SFSValidationError("SubscribeGroupRequest Error",t)}},{key:"execute",value:function(e){this._reqObj.putUtfString(t.KEY_GROUP_ID,this._groupId)}}]),t}(c.BaseRequest);r.SubscribeRoomGroupRequest=h},{"../../core/Exceptions":147,"../Base":166,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],203:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.UnsubscribeRoomGroupRequest=void 0;var s=n(e("babel-runtime/core-js/object/seal")),i=n(e("babel-runtime/core-js/object/get-prototype-of")),a=n(e("babel-runtime/helpers/classCallCheck")),o=n(e("babel-runtime/helpers/possibleConstructorReturn")),u=n(e("babel-runtime/helpers/createClass")),l=n(e("babel-runtime/helpers/inherits")),c=e("../Base"),f=e("../../core/Exceptions"),h=function(e){function t(e){(0,a.default)(this,t);var r=(0,o.default)(this,(t.__proto__||(0,i.default)(t)).call(this,c.Requests.UnsubscribeRoomGroup));return r._groupId=e,(0,s.default)(r),r}return(0,l.default)(t,e),(0,u.default)(t,null,[{key:"KEY_GROUP_ID",get:function(){return"g"}}]),(0,u.default)(t,[{key:"validate",value:function(e){var t=[];if(null!=this._groupId&&0!==this._groupId.length||t.push("Invalid group id passed; must be a string with at least one character"),t.length>0)throw new f.SFSValidationError("UnsubscribeGroupRequest Error",t)}},{key:"execute",value:function(e){this._reqObj.putUtfString(t.KEY_GROUP_ID,this._groupId)}}]),t}(c.BaseRequest);r.UnsubscribeRoomGroupRequest=h},{"../../core/Exceptions":147,"../Base":166,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],204:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.SFSErrorCodes=void 0;var s=n(e("babel-runtime/helpers/classCallCheck")),i=n(e("babel-runtime/helpers/createClass")),a=function(){function e(){throw(0,s.default)(this,e),"Class SFSErrorCodes cannot be instantiated. Please check the documentation for more details on its usage"}return(0,i.default)(e,null,[{key:"setErrorMessage",value:function(e,t){this._errorsByCode[e]=t}},{key:"getErrorMessage",value:function(e,t){return this.stringFormat(this._errorsByCode[e],t)}},{key:"stringFormat",value:function(e,t){if(null==e)return"";if(null!=t)for(var r=0;r<t.length;r++){var n="{"+r+"}";e=e.replace(n,t[r])}return e}},{key:"_errorsByCode",get:function(){return["Client API version is obsolete: {0}; required version: {1}","Requested Zone {0} does not exist","User name {0} is not recognized","Wrong password for user {0}","User {0} is banned","Zone {0} is full","User {0} is already logged in Zone {1}","The server is full","Zone {0} is currently inactive","User name {0} contains bad words; filtered: {1}","Guest users not allowed in Zone {0}","IP address {0} is banned","A Room with the same name already exists: {0}","Requested Group is not available - Room: {0}; Group: {1}","Bad Room name length -  Min: {0}; max: {1}; passed name length: {2}","Room name contains bad words: {0}","Zone is full; can't add Rooms anymore","You have exceeded the number of Rooms that you can create per session: {0}","Room creation failed, wrong parameter: {0}","User {0} already joined in Room","Room {0} is full","Wrong password for Room {0}","Requested Room does not exist","Room {0} is locked","Group {0} is already subscribed","Group {0} does not exist","Group {0} is not subscribed","Group {0} does not exist","{0}","Room permission error; Room {0} cannot be renamed","Room permission error; Room {0} cannot change password state","Room permission error; Room {0} cannot change capacity","Switch user error; no player slots available in Room {0}","Switch user error; no spectator slots available in Room {0}","Switch user error; Room {0} is not a Game Room","Switch user error; you are not joined in Room {0}","Buddy Manager initialization error, could not load buddy list: {0}","Buddy Manager error, your buddy list is full; size is {0}","Buddy Manager error, was not able to block buddy {0} because offline","Buddy Manager error, you are attempting to set too many Buddy Variables; limit is {0}","Game {0} access denied, user does not match access criteria","QuickJoinGame action failed: no matching Rooms were found","Your previous invitation reply was invalid or arrived too late"]}}]),e}();r.SFSErrorCodes=a},{"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19}],205:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var s=n(e("babel-runtime/core-js/number/is-finite")),i=n(e("babel-runtime/core-js/number/is-safe-integer")),a=n(e("babel-runtime/core-js/number/is-integer")),o=n(e("babel-runtime/core-js/number/max-safe-integer"));o.default||(Number.MAX_SAFE_INTEGER=9007199254740991),Number.isInteger=a.default||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},Number.isSafeInteger=i.default||function(e){return(0,a.default)(e)&&Math.abs(e)<=o.default},Number.isFinite=s.default||function(e){return"number"==typeof e&&isFinite(e)},Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t=Object(this),r=t.length>>>0,n=arguments[1],s=0;s!==r;s++)if(e.call(n,this[s],s,t))return this[s]}})},{"babel-runtime/core-js/number/is-finite":4,"babel-runtime/core-js/number/is-integer":5,"babel-runtime/core-js/number/is-safe-integer":6,"babel-runtime/core-js/number/max-safe-integer":7}],206:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.LoggerEvent=r.Logger=r.LogLevel=void 0;var s=n(e("babel-runtime/core-js/object/seal")),i=n(e("babel-runtime/core-js/number/is-integer")),a=n(e("babel-runtime/core-js/object/get-prototype-of")),o=n(e("babel-runtime/helpers/classCallCheck")),u=n(e("babel-runtime/helpers/createClass")),l=n(e("babel-runtime/helpers/possibleConstructorReturn")),c=n(e("babel-runtime/helpers/inherits")),f=n(e("babel-runtime/core-js/symbol")),h=n(e("babel-runtime/core-js/object/freeze")),d=e("../core/Events"),_=(0,h.default)({DEBUG:0,INFO:1,WARN:2,ERROR:3,toString:function(e){return e===this.DEBUG?"DEBUG":e===this.INFO?"INFO":e===this.WARN?"WARN":e===this.ERROR?"ERROR":void 0}}),b=(0,h.default)({DEBUG:"debug",INFO:"info",WARNING:"warn",ERROR:"error"}),p=(0,f.default)(),m=(0,f.default)(),y=function(e){function t(e){(0,o.default)(this,t);var r=(0,l.default)(this,(t.__proto__||(0,a.default)(t)).call(this));if(e!==m)throw"Logger is a singleton class; you can't instantiate it";return r._enableConsoleOutput=void 0!==console,r._enableEventDispatching=!1,r._level=_.INFO,r._useBasicLog=!0,void 0!==console&&(r._useBasicLog="function"!=typeof console.debug||"function"!=typeof console.info||"function"!=typeof console.warn||"function"!=typeof console.error),r}return(0,c.default)(t,e),(0,u.default)(t,[{key:"log",value:function(e){for(var t=this,r=arguments.length,n=Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];this.isValidLevel(e)&&e>=this._level&&(this._enableConsoleOutput&&function(){var r=function(e,r){t._useBasicLog&&(r=function(e){console.log(e)}),r("[ SFS2X | "+e+" ] "+n.join(" "))};switch(e){case _.DEBUG:r("DEBUG",function(e){console.debug(e)});break;case _.INFO:r("INFO",function(e){console.info(e)});break;case _.WARN:r("WARN",function(e){console.warn(e)});break;case _.ERROR:r("ERROR",function(e){console.error(e)})}}(),this._enableEventDispatching&&this.dispatchEvent(_.toString(e).toLowerCase(),{message:n.join(" ")}))}},{key:"debug",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];this.log(_.DEBUG,t)}},{key:"info",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];this.log(_.INFO,t)}},{key:"warn",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];this.log(_.WARN,t)}},{key:"error",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];this.log(_.ERROR,t)}},{key:"isValidLevel",value:function(e){if(!(0,i.default)(e)||e<_.DEBUG||e>_.ERROR)throw"Logging level must be set to a valid value (see LogLevel class)";return!0}},{key:"level",set:function(e){this.isValidLevel(e)&&(this._level=e)},get:function(){return this._level}},{key:"enableConsoleOutput",set:function(e){void 0!==console&&(this._enableConsoleOutput=e)},get:function(){return this._enableConsoleOutput}},{key:"enableEventDispatching",set:function(e){this._enableEventDispatching=e},get:function(){return this._enableEventDispatching}}],[{key:"instance",get:function(){return this[p]||(this[p]=new t(m)),(0,s.default)(this[p])}}]),t}(d.EventDispatcher);r.LogLevel=_,r.Logger=y,r.LoggerEvent=b},{"../core/Events":146,"babel-runtime/core-js/number/is-integer":5,"babel-runtime/core-js/object/freeze":10,"babel-runtime/core-js/object/get-prototype-of":12,"babel-runtime/core-js/object/seal":13,"babel-runtime/core-js/symbol":16,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19,"babel-runtime/helpers/inherits":21,"babel-runtime/helpers/possibleConstructorReturn":22}],207:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.DumpFormatter=r.ClientDisconnectionReason=void 0;var s=n(e("babel-runtime/helpers/classCallCheck")),i=n(e("babel-runtime/helpers/createClass")),a=(0,n(e("babel-runtime/core-js/object/freeze")).default)({IDLE:"idle",KICK:"kick",BAN:"ban",MANUAL:"manual",UNKNOWN:"unknown",getReason:function(e){switch(e){case 0:return this.IDLE;case 1:return this.KICK;case 2:return this.BAN;case 3:return this.MANUAL;case 4:return this.UNKNOWN}}}),o=function(){function e(){(0,s.default)(this,e)}return(0,i.default)(e,null,[{key:"prettyPrintByteArray",value:function(e){return null==e?"Null":e.length<32?e.toString():"Byte["+e.length+"]"}},{key:"prettyPrintDump",value:function(e){for(var t="",r=0,n=0;n<e.length;n++){var s=e.charAt(n);if(s==this.TOKEN_INDENT_OPEN)r++,t+=this.NEW_LINE+this.getFormatTabs(r);else if(s==this.TOKEN_INDENT_CLOSE){if(--r<0)throw"DumpFormatter: the indentPos is negative. TOKENS ARE NOT BALANCED!";t+=this.NEW_LINE+this.getFormatTabs(r)}else s==this.TOKEN_DIVIDER?t+=this.NEW_LINE+this.getFormatTabs(r):t+=s}if(0!=r)throw"DumpFormatter: the indentPos is not === 0 ("+r+"). TOKENS ARE NOT BALANCED!";return t}},{key:"getFormatTabs",value:function(e){return this.strFill(this.TAB,e)}},{key:"strFill",value:function(e,t){for(var r="",n=0;n<t;n++)r+=e;return r}},{key:"hexDump",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;-1===t&&(t=this.HEX_BYTES_PER_LINE);var r="Binary size: "+e.byteLength+this.NEW_LINE,n="",s="",i=0,a=0,o=null;do{var u=(o=e[i]).toString(16).toUpperCase();1===u.length&&(u="0"+u),n+=u+" ",s+=o>=33&&o<=126?String.fromCharCode(o):this.DOT,++a===t&&(a=0,r+=n+this.TAB+s+this.NEW_LINE,n="",s="")}while(++i<e.length);if(0!==a){for(var l=t-a;l>0;--l)n+="   ",s+=" ";r+=n+this.TAB+s+this.NEW_LINE}return r}},{key:"TOKEN_INDENT_OPEN",get:function(){return"{"}},{key:"TOKEN_INDENT_CLOSE",get:function(){return"}"}},{key:"TOKEN_DIVIDER",get:function(){return";"}},{key:"NEW_LINE",get:function(){return"\n"}},{key:"TAB",get:function(){return"\t"}},{key:"DOT",get:function(){return"."}},{key:"HEX_BYTES_PER_LINE",get:function(){return 16}}]),e}();r.ClientDisconnectionReason=a,r.DumpFormatter=o},{"babel-runtime/core-js/object/freeze":10,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19}],208:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.LagMonitor=void 0;var s=n(e("babel-runtime/helpers/classCallCheck")),i=n(e("babel-runtime/helpers/createClass")),a=e("../requests/system/PingPong"),o=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;(0,s.default)(this,e),this._sfs=t,this._valueQueue=[],this._interval=r,this._queueSize=n,this._thread=null,this._lastReqTime=-1}return(0,i.default)(e,[{key:"start",value:function(){this.isRunning||null==this._sfs||(this._thread=setInterval(this._threadRunner,1e3*this._interval,this))}},{key:"stop",value:function(){this.isRunning&&(clearInterval(this._thread),this._thread=null,this._valueQueue=[])}},{key:"destroy",value:function(){this.stop(),this._sfs=null}},{key:"getLastPingTime",value:function(){return this._valueQueue.length>0?this._valueQueue[this._valueQueue.length-1]:0}},{key:"_threadRunner",value:function(e){e._lastReqTime=(new Date).getTime(),e._sfs.send(new a.PingPongRequest)}},{key:"_onPingPong",value:function(){var e=(new Date).getTime()-this._lastReqTime;return this._valueQueue.length>=this._queueSize&&this._valueQueue.shift(),this._valueQueue.push(e),this._getAveragePingTime()}},{key:"_getAveragePingTime",value:function(){if(0==this._valueQueue.length)return 0;for(var e=0,t=0;t<this._valueQueue.length;t++)e+=this._valueQueue[t];return e/this._valueQueue.length}},{key:"isRunning",get:function(){return null!=this._thread}}]),e}();r.LagMonitor=o},{"../requests/system/PingPong":197,"babel-runtime/helpers/classCallCheck":18,"babel-runtime/helpers/createClass":19}]},{},[141])(141)}),DataStream=function(e,t,r){this._byteOffset=t||0,e instanceof ArrayBuffer?this.buffer=e:"object"==typeof e?(this.dataView=e,t&&(this._byteOffset+=t)):this.buffer=new ArrayBuffer(e||1),this.position=0,this.endianness=null==r?DataStream.LITTLE_ENDIAN:r},DataStream.prototype={},void 0===Uint8Array.prototype.BYTES_PER_ELEMENT&&(Uint8Array.prototype.BYTES_PER_ELEMENT=Uint8Array.BYTES_PER_ELEMENT,Int8Array.prototype.BYTES_PER_ELEMENT=Int8Array.BYTES_PER_ELEMENT,Uint8ClampedArray.prototype.BYTES_PER_ELEMENT=Uint8ClampedArray.BYTES_PER_ELEMENT,Uint16Array.prototype.BYTES_PER_ELEMENT=Uint16Array.BYTES_PER_ELEMENT,Int16Array.prototype.BYTES_PER_ELEMENT=Int16Array.BYTES_PER_ELEMENT,Uint32Array.prototype.BYTES_PER_ELEMENT=Uint32Array.BYTES_PER_ELEMENT,Int32Array.prototype.BYTES_PER_ELEMENT=Int32Array.BYTES_PER_ELEMENT,Float64Array.prototype.BYTES_PER_ELEMENT=Float64Array.BYTES_PER_ELEMENT),DataStream.prototype.save=function(e){var t=new Blob(this.buffer),r=window.webkitURL||window.URL;if(!r||!r.createObjectURL)throw"DataStream.save: Can't create object URL.";var n=r.createObjectURL(t),s=document.createElement("a");s.setAttribute("href",n),s.setAttribute("download",e),s.click(),r.revokeObjectURL(n)},DataStream.BIG_ENDIAN=!1,DataStream.LITTLE_ENDIAN=!0,DataStream.prototype._dynamicSize=!0,Object.defineProperty(DataStream.prototype,"dynamicSize",{get:function(){return this._dynamicSize},set:function(e){e||this._trimAlloc(),this._dynamicSize=e}}),DataStream.prototype._byteLength=0,Object.defineProperty(DataStream.prototype,"byteLength",{get:function(){return this._byteLength-this._byteOffset}}),Object.defineProperty(DataStream.prototype,"buffer",{get:function(){return this._trimAlloc(),this._buffer},set:function(e){this._buffer=e,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(DataStream.prototype,"byteOffset",{get:function(){return this._byteOffset},set:function(e){this._byteOffset=e,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(DataStream.prototype,"dataView",{get:function(){return this._dataView},set:function(e){this._byteOffset=e.byteOffset,this._buffer=e.buffer,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._byteOffset+e.byteLength}}),DataStream.prototype._realloc=function(e){if(this._dynamicSize){var t=this._byteOffset+this.position+e,r=this._buffer.byteLength;if(t<=r)t>this._byteLength&&(this._byteLength=t);else{for(r<1&&(r=1);t>r;)r*=2;var n=new ArrayBuffer(r),s=new Uint8Array(this._buffer);new Uint8Array(n,0,s.length).set(s),this.buffer=n,this._byteLength=t}}},DataStream.prototype._trimAlloc=function(){if(this._byteLength!=this._buffer.byteLength){var e=new ArrayBuffer(this._byteLength),t=new Uint8Array(e),r=new Uint8Array(this._buffer,0,t.length);t.set(r),this.buffer=e}},DataStream.prototype.seek=function(e){var t=Math.max(0,Math.min(this.byteLength,e));this.position=isNaN(t)||!isFinite(t)?0:t},DataStream.prototype.isEof=function(){return this.position>=this.byteLength},DataStream.prototype.mapInt32Array=function(e,t){this._realloc(4*e);var r=new Int32Array(this._buffer,this.byteOffset+this.position,e);return DataStream.arrayToNative(r,null==t?this.endianness:t),this.position+=4*e,r},DataStream.prototype.mapInt16Array=function(e,t){this._realloc(2*e);var r=new Int16Array(this._buffer,this.byteOffset+this.position,e);return DataStream.arrayToNative(r,null==t?this.endianness:t),this.position+=2*e,r},DataStream.prototype.mapInt8Array=function(e){this._realloc(1*e);var t=new Int8Array(this._buffer,this.byteOffset+this.position,e);return this.position+=1*e,t},DataStream.prototype.mapUint32Array=function(e,t){this._realloc(4*e);var r=new Uint32Array(this._buffer,this.byteOffset+this.position,e);return DataStream.arrayToNative(r,null==t?this.endianness:t),this.position+=4*e,r},DataStream.prototype.mapUint16Array=function(e,t){this._realloc(2*e);var r=new Uint16Array(this._buffer,this.byteOffset+this.position,e);return DataStream.arrayToNative(r,null==t?this.endianness:t),this.position+=2*e,r},DataStream.prototype.mapUint8Array=function(e){this._realloc(1*e);var t=new Uint8Array(this._buffer,this.byteOffset+this.position,e);return this.position+=1*e,t},DataStream.prototype.mapFloat64Array=function(e,t){this._realloc(8*e);var r=new Float64Array(this._buffer,this.byteOffset+this.position,e);return DataStream.arrayToNative(r,null==t?this.endianness:t),this.position+=8*e,r},DataStream.prototype.mapFloat32Array=function(e,t){this._realloc(4*e);var r=new Float32Array(this._buffer,this.byteOffset+this.position,e);return DataStream.arrayToNative(r,null==t?this.endianness:t),this.position+=4*e,r},DataStream.prototype.readInt32Array=function(e,t){e=null==e?this.byteLength-this.position/4:e;var r=new Int32Array(e);return DataStream.memcpy(r.buffer,0,this.buffer,this.byteOffset+this.position,e*r.BYTES_PER_ELEMENT),DataStream.arrayToNative(r,null==t?this.endianness:t),this.position+=r.byteLength,r},DataStream.prototype.readInt16Array=function(e,t){e=null==e?this.byteLength-this.position/2:e;var r=new Int16Array(e);return DataStream.memcpy(r.buffer,0,this.buffer,this.byteOffset+this.position,e*r.BYTES_PER_ELEMENT),DataStream.arrayToNative(r,null==t?this.endianness:t),this.position+=r.byteLength,r},DataStream.prototype.readInt8Array=function(e){e=null==e?this.byteLength-this.position:e;var t=new Int8Array(e);return DataStream.memcpy(t.buffer,0,this.buffer,this.byteOffset+this.position,e*t.BYTES_PER_ELEMENT),this.position+=t.byteLength,t},DataStream.prototype.readUint32Array=function(e,t){e=null==e?this.byteLength-this.position/4:e;var r=new Uint32Array(e);return DataStream.memcpy(r.buffer,0,this.buffer,this.byteOffset+this.position,e*r.BYTES_PER_ELEMENT),DataStream.arrayToNative(r,null==t?this.endianness:t),this.position+=r.byteLength,r},DataStream.prototype.readUint16Array=function(e,t){e=null==e?this.byteLength-this.position/2:e;var r=new Uint16Array(e);return DataStream.memcpy(r.buffer,0,this.buffer,this.byteOffset+this.position,e*r.BYTES_PER_ELEMENT),DataStream.arrayToNative(r,null==t?this.endianness:t),this.position+=r.byteLength,r},DataStream.prototype.readUint8Array=function(e){e=null==e?this.byteLength-this.position:e;var t=new Uint8Array(e);return DataStream.memcpy(t.buffer,0,this.buffer,this.byteOffset+this.position,e*t.BYTES_PER_ELEMENT),this.position+=t.byteLength,t},DataStream.prototype.readFloat64Array=function(e,t){e=null==e?this.byteLength-this.position/8:e;var r=new Float64Array(e);return DataStream.memcpy(r.buffer,0,this.buffer,this.byteOffset+this.position,e*r.BYTES_PER_ELEMENT),DataStream.arrayToNative(r,null==t?this.endianness:t),this.position+=r.byteLength,r},DataStream.prototype.readFloat32Array=function(e,t){e=null==e?this.byteLength-this.position/4:e;var r=new Float32Array(e);return DataStream.memcpy(r.buffer,0,this.buffer,this.byteOffset+this.position,e*r.BYTES_PER_ELEMENT),DataStream.arrayToNative(r,null==t?this.endianness:t),this.position+=r.byteLength,r},DataStream.prototype.writeInt32Array=function(e,t){if(this._realloc(4*e.length),e instanceof Int32Array&&(this.byteOffset+this.position)%e.BYTES_PER_ELEMENT==0)DataStream.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,e.byteOffset,e.byteLength),this.mapInt32Array(e.length,t);else for(var r=0;r<e.length;r++)this.writeInt32(e[r],t)},DataStream.prototype.writeInt16Array=function(e,t){if(this._realloc(2*e.length),e instanceof Int16Array&&(this.byteOffset+this.position)%e.BYTES_PER_ELEMENT==0)DataStream.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,e.byteOffset,e.byteLength),this.mapInt16Array(e.length,t);else for(var r=0;r<e.length;r++)this.writeInt16(e[r],t)},DataStream.prototype.writeInt8Array=function(e){if(this._realloc(1*e.length),e instanceof Int8Array&&(this.byteOffset+this.position)%e.BYTES_PER_ELEMENT==0)DataStream.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,e.byteOffset,e.byteLength),this.mapInt8Array(e.length);else for(var t=0;t<e.length;t++)this.writeInt8(e[t])},DataStream.prototype.writeUint32Array=function(e,t){if(this._realloc(4*e.length),e instanceof Uint32Array&&(this.byteOffset+this.position)%e.BYTES_PER_ELEMENT==0)DataStream.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,e.byteOffset,e.byteLength),this.mapUint32Array(e.length,t);else for(var r=0;r<e.length;r++)this.writeUint32(e[r],t)},DataStream.prototype.writeUint16Array=function(e,t){if(this._realloc(2*e.length),e instanceof Uint16Array&&(this.byteOffset+this.position)%e.BYTES_PER_ELEMENT==0)DataStream.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,e.byteOffset,e.byteLength),this.mapUint16Array(e.length,t);else for(var r=0;r<e.length;r++)this.writeUint16(e[r],t)},DataStream.prototype.writeUint8Array=function(e){if(this._realloc(1*e.length),e instanceof Uint8Array&&(this.byteOffset+this.position)%e.BYTES_PER_ELEMENT==0)DataStream.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,e.byteOffset,e.byteLength),this.mapUint8Array(e.length);else for(var t=0;t<e.length;t++)this.writeUint8(e[t])},DataStream.prototype.writeFloat64Array=function(e,t){if(this._realloc(8*e.length),e instanceof Float64Array&&(this.byteOffset+this.position)%e.BYTES_PER_ELEMENT==0)DataStream.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,e.byteOffset,e.byteLength),this.mapFloat64Array(e.length,t);else for(var r=0;r<e.length;r++)this.writeFloat64(e[r],t)},DataStream.prototype.writeFloat32Array=function(e,t){if(this._realloc(4*e.length),e instanceof Float32Array&&(this.byteOffset+this.position)%e.BYTES_PER_ELEMENT==0)DataStream.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,e.byteOffset,e.byteLength),this.mapFloat32Array(e.length,t);else for(var r=0;r<e.length;r++)this.writeFloat32(e[r],t)},DataStream.prototype.readInt32=function(e){var t=this._dataView.getInt32(this.position,null==e?this.endianness:e);return this.position+=4,t},DataStream.prototype.readInt16=function(e){var t=this._dataView.getInt16(this.position,null==e?this.endianness:e);return this.position+=2,t},DataStream.prototype.readInt8=function(){var e=this._dataView.getInt8(this.position);return this.position+=1,e},DataStream.prototype.readUint32=function(e){var t=this._dataView.getUint32(this.position,null==e?this.endianness:e);return this.position+=4,t},DataStream.prototype.readUint16=function(e){var t=this._dataView.getUint16(this.position,null==e?this.endianness:e);return this.position+=2,t},DataStream.prototype.readUint8=function(){var e=this._dataView.getUint8(this.position);return this.position+=1,e},DataStream.prototype.readFloat32=function(e){var t=this._dataView.getFloat32(this.position,null==e?this.endianness:e);return this.position+=4,t},DataStream.prototype.readFloat64=function(e){var t=this._dataView.getFloat64(this.position,null==e?this.endianness:e);return this.position+=8,t},DataStream.prototype.writeInt32=function(e,t){this._realloc(4),this._dataView.setInt32(this.position,e,null==t?this.endianness:t),this.position+=4},DataStream.prototype.writeInt16=function(e,t){this._realloc(2),this._dataView.setInt16(this.position,e,null==t?this.endianness:t),this.position+=2},DataStream.prototype.writeInt8=function(e){this._realloc(1),this._dataView.setInt8(this.position,e),this.position+=1},DataStream.prototype.writeUint32=function(e,t){this._realloc(4),this._dataView.setUint32(this.position,e,null==t?this.endianness:t),this.position+=4},DataStream.prototype.writeUint16=function(e,t){this._realloc(2),this._dataView.setUint16(this.position,e,null==t?this.endianness:t),this.position+=2},DataStream.prototype.writeUint8=function(e){this._realloc(1),this._dataView.setUint8(this.position,e),this.position+=1},DataStream.prototype.writeFloat32=function(e,t){this._realloc(4),this._dataView.setFloat32(this.position,e,null==t?this.endianness:t),this.position+=4},DataStream.prototype.writeFloat64=function(e,t){this._realloc(8),this._dataView.setFloat64(this.position,e,null==t?this.endianness:t),this.position+=8},DataStream.endianness=new Int8Array(new Int16Array([1]).buffer)[0]>0,DataStream.memcpy=function(e,t,r,n,s){var i=new Uint8Array(e,t,s),a=new Uint8Array(r,n,s);i.set(a)},DataStream.arrayToNative=function(e,t){return t==this.endianness?e:this.flipArrayEndianness(e)},DataStream.nativeToEndian=function(e,t){return this.endianness==t?e:this.flipArrayEndianness(e)},DataStream.flipArrayEndianness=function(e){for(var t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),r=0;r<e.byteLength;r+=e.BYTES_PER_ELEMENT)for(var n=r+e.BYTES_PER_ELEMENT-1,s=r;n>s;n--,s++){var i=t[s];t[s]=t[n],t[n]=i}return e},DataStream.createStringFromArray=function(e){for(var t=[],r=0;r<e.length;r+=32768)t.push(String.fromCharCode.apply(null,e.subarray(r,r+32768)));return t.join("")},DataStream.prototype.failurePosition=0,DataStream.prototype.readStruct=function(e){for(var t,r,n={},s=this.position,i=0;i<e.length;i+=2){if(t=e[i+1],null==(r=this.readType(t,n)))return 0==this.failurePosition&&(this.failurePosition=this.position),this.position=s,null;n[e[i]]=r}return n},DataStream.prototype.readUCS2String=function(e,t){return DataStream.createStringFromArray(this.readUint16Array(e,t))},DataStream.prototype.writeUCS2String=function(e,t,r){null==r&&(r=e.length);for(var n=0;n<e.length&&n<r;n++)this.writeUint16(e.charCodeAt(n),t);for(;n<r;n++)this.writeUint16(0)},DataStream.prototype.readString=function(e,t){return null==t||"ASCII"==t?DataStream.createStringFromArray(this.mapUint8Array(null==e?this.byteLength-this.position:e)):new TextDecoder(t).decode(this.mapUint8Array(e))},DataStream.prototype.writeString=function(e,t,r){if(null==t||"ASCII"==t)if(null!=r){var n=0,s=Math.min(e.length,r);for(n=0;n<s;n++)this.writeUint8(e.charCodeAt(n));for(;n<r;n++)this.writeUint8(0)}else for(n=0;n<e.length;n++)this.writeUint8(e.charCodeAt(n));else this.writeUint8Array(new TextEncoder(t).encode(e.substring(0,r)))},DataStream.prototype.readCString=function(e){var t=this.byteLength-this.position,r=new Uint8Array(this._buffer,this._byteOffset+this.position),n=t;null!=e&&(n=Math.min(e,t));for(var s=0;s<n&&0!=r[s];s++);var i=DataStream.createStringFromArray(this.mapUint8Array(s));return null!=e?this.position+=n-s:s!=t&&(this.position+=1),i},DataStream.prototype.writeCString=function(e,t){if(null!=t){var r=0,n=Math.min(e.length,t);for(r=0;r<n;r++)this.writeUint8(e.charCodeAt(r));for(;r<t;r++)this.writeUint8(0)}else{for(r=0;r<e.length;r++)this.writeUint8(e.charCodeAt(r));this.writeUint8(0)}},DataStream.prototype.readType=function(e,t){if("function"==typeof e)return e(this,t);if(!("object"!=typeof e||e instanceof Array))return e.get(this,t);if(e instanceof Array&&3!=e.length)return this.readStruct(e,t);var r=null,n=null,s="ASCII",i=this.position;if("string"==typeof e&&/:/.test(e)){e=(a=e.split(":"))[0],n=null!=t[o=a[1]]?parseInt(t[o]):parseInt(a[1])}if("string"==typeof e&&/,/.test(e)){var a=e.split(",");e=a[0],s=parseInt(a[1])}switch(e){case"uint8":r=this.readUint8();break;case"int8":r=this.readInt8();break;case"uint16":r=this.readUint16(this.endianness);break;case"int16":r=this.readInt16(this.endianness);break;case"uint32":r=this.readUint32(this.endianness);break;case"int32":r=this.readInt32(this.endianness);break;case"float32":r=this.readFloat32(this.endianness);break;case"float64":r=this.readFloat64(this.endianness);break;case"uint16be":r=this.readUint16(DataStream.BIG_ENDIAN);break;case"int16be":r=this.readInt16(DataStream.BIG_ENDIAN);break;case"uint32be":r=this.readUint32(DataStream.BIG_ENDIAN);break;case"int32be":r=this.readInt32(DataStream.BIG_ENDIAN);break;case"float32be":r=this.readFloat32(DataStream.BIG_ENDIAN);break;case"float64be":r=this.readFloat64(DataStream.BIG_ENDIAN);break;case"uint16le":r=this.readUint16(DataStream.LITTLE_ENDIAN);break;case"int16le":r=this.readInt16(DataStream.LITTLE_ENDIAN);break;case"uint32le":r=this.readUint32(DataStream.LITTLE_ENDIAN);break;case"int32le":r=this.readInt32(DataStream.LITTLE_ENDIAN);break;case"float32le":r=this.readFloat32(DataStream.LITTLE_ENDIAN);break;case"float64le":r=this.readFloat64(DataStream.LITTLE_ENDIAN);break;case"cstring":r=this.readCString(n);break;case"string":r=this.readString(n,s);break;case"u16string":r=this.readUCS2String(n,this.endianness);break;case"u16stringle":r=this.readUCS2String(n,DataStream.LITTLE_ENDIAN);break;case"u16stringbe":r=this.readUCS2String(n,DataStream.BIG_ENDIAN);break;default:if(3==e.length){var o,u=e[1],l=0;if(l="function"==typeof(o=e[2])?o(t,this,e):"string"==typeof o&&null!=t[o]?parseInt(t[o]):parseInt(o),"string"==typeof u){var c=u.replace(/(le|be)$/,""),f=null;switch(/le$/.test(u)?f=DataStream.LITTLE_ENDIAN:/be$/.test(u)&&(f=DataStream.BIG_ENDIAN),"*"==o&&(l=null),c){case"uint8":r=this.readUint8Array(l);break;case"uint16":r=this.readUint16Array(l,f);break;case"uint32":r=this.readUint32Array(l,f);break;case"int8":r=this.readInt8Array(l);break;case"int16":r=this.readInt16Array(l,f);break;case"int32":r=this.readInt32Array(l,f);break;case"float32":r=this.readFloat32Array(l,f);break;case"float64":r=this.readFloat64Array(l,f);break;case"cstring":case"utf16string":case"string":if(null==l)for(r=[];!this.isEof();){if(null==(b=this.readType(u,t)))break;r.push(b)}else{r=new Array(l);for(_=0;_<l;_++)r[_]=this.readType(u,t)}}}else if("*"==o)for(r=[],this.buffer;;){var h=this.position;try{var d=this.readType(u,t);if(null==d){this.position=h;break}r.push(d)}catch(e){this.position=h;break}}else{r=new Array(l);for(var _=0;_<l;_++){var b=this.readType(u,t);if(null==b)return null;r[_]=b}}break}}return null!=n&&(this.position=i+n),r},DataStream.prototype.writeStruct=function(e,t){for(var r=0;r<e.length;r+=2){var n=e[r+1];this.writeType(n,t[e[r]],t)}},DataStream.prototype.writeType=function(e,t,r){if("function"==typeof e)return e(this,t);if("object"==typeof e&&!(e instanceof Array))return e.set(this,t,r);var n=null,s="ASCII",i=this.position;if("string"==typeof e&&/:/.test(e)){e=(a=e.split(":"))[0],n=parseInt(a[1])}if("string"==typeof e&&/,/.test(e)){var a=e.split(",");e=a[0],s=parseInt(a[1])}switch(e){case"uint8":this.writeUint8(t);break;case"int8":this.writeInt8(t);break;case"uint16":this.writeUint16(t,this.endianness);break;case"int16":this.writeInt16(t,this.endianness);break;case"uint32":this.writeUint32(t,this.endianness);break;case"int32":this.writeInt32(t,this.endianness);break;case"float32":this.writeFloat32(t,this.endianness);break;case"float64":this.writeFloat64(t,this.endianness);break;case"uint16be":this.writeUint16(t,DataStream.BIG_ENDIAN);break;case"int16be":this.writeInt16(t,DataStream.BIG_ENDIAN);break;case"uint32be":this.writeUint32(t,DataStream.BIG_ENDIAN);break;case"int32be":this.writeInt32(t,DataStream.BIG_ENDIAN);break;case"float32be":this.writeFloat32(t,DataStream.BIG_ENDIAN);break;case"float64be":this.writeFloat64(t,DataStream.BIG_ENDIAN);break;case"uint16le":this.writeUint16(t,DataStream.LITTLE_ENDIAN);break;case"int16le":this.writeInt16(t,DataStream.LITTLE_ENDIAN);break;case"uint32le":this.writeUint32(t,DataStream.LITTLE_ENDIAN);break;case"int32le":this.writeInt32(t,DataStream.LITTLE_ENDIAN);break;case"float32le":this.writeFloat32(t,DataStream.LITTLE_ENDIAN);break;case"float64le":this.writeFloat64(t,DataStream.LITTLE_ENDIAN);break;case"cstring":this.writeCString(t,n);break;case"string":this.writeString(t,s,n);break;case"u16string":this.writeUCS2String(t,this.endianness,n);break;case"u16stringle":this.writeUCS2String(t,DataStream.LITTLE_ENDIAN,n);break;case"u16stringbe":this.writeUCS2String(t,DataStream.BIG_ENDIAN,n);break;default:if(3==e.length){for(var o=e[1],u=0;u<t.length;u++)this.writeType(o,t[u]);break}this.writeStruct(e,t)}null!=n&&(this.position=i,this._realloc(n),this.position=i+n)},"function"==typeof define&&define.amd&&define("DataStream",[],function(){return DataStream}),"object"==typeof module&&module&&module.exports&&(module.exports=DataStream),function(e){"use strict";function t(e,t,r){return t<=e&&e<=r}function r(e,t){return Math.floor(e/t)}function n(e,t){if(e)throw new Error("EncodingError");return t||65533}function s(e){throw new Error("EncodingError")}function i(e){if(e=String(e).trim().toLowerCase(),Object.prototype.hasOwnProperty.call(m,e))return m[e];throw new Error("EncodingError: Unknown encoding: "+e)}function a(e,t){return(t||[])[e]||null}function o(e,t){var r=t.indexOf(e);return-1===r?null:r}function u(e,r){var s=r.fatal,i=0,o=0,u=0;this.decode=function(r){var l=r.get();if(l===_&&0===i&&0===o&&0===u)return b;l!==_||0===i&&0===o&&0===u||(i=0,o=0,u=0,n(s)),r.offset(1);var c;if(0!==u)return c=null,t(l,48,57)&&(c=function(e){if(e>39419&&e<189e3||e>1237575)return null;var t,r=0,n=0,s=y.gb18030;for(t=0;t<s.length;++t){var i=s[t];if(!(i[0]<=e))break;r=i[0],n=i[1]}return n+e-r}(10*(126*(10*(i-129)+(o-48))+(u-129))+l-48)),i=0,o=0,u=0,null===c?(r.offset(-3),n(s)):c;if(0!==o)return t(l,129,254)?(u=l,null):(r.offset(-2),i=0,o=0,n(s));if(0!==i){if(t(l,48,57)&&e)return o=l,null;var f=i,h=null;i=0;var d=l<127?64:65;return(t(l,64,126)||t(l,128,254))&&(h=190*(f-129)+(l-d)),c=null===h?null:a(h,y.gbk),null===h&&r.offset(-1),null===c?n(s):c}return t(l,0,127)?l:128===l?8364:t(l,129,254)?(i=l,null):n(s)}}function l(e,n){n.fatal;this.encode=function(n,i){var a=i.get();if(a===b)return _;if(i.offset(1),t(a,0,127))return n.emit(a);var u=o(a,y.gbk);if(null!==u){var l=r(u,190)+129,c=u%190,f=c<63?64:65;return n.emit(l,c+f)}if(null===u&&!e)return s();var h=r(r(r(u=function(e){var t,r=0,n=0,s=y.gb18030;for(t=0;t<s.length;++t){var i=s[t];if(!(i[1]<=e))break;r=i[1],n=i[0]}return n+e-r}(a),10),126),10),d=r(r(u-=10*h*126*10,10),126),p=r(u-=10*d*126,10),m=u-10*p;return n.emit(h+129,d+48,p+129,m+48)}}function c(e,r){var s=r.fatal,i=null,a=null;this.decode=function(r){var o=r.get();if(o===_&&null===i&&null===a)return b;if(o===_&&(null!==i||null!==a))return n(s);if(r.offset(1),null===i)return i=o,null;var u;if(u=e?(i<<8)+o:(o<<8)+i,i=null,null!==a){var l=a;return a=null,t(u,56320,57343)?65536+1024*(l-55296)+(u-56320):(r.offset(-2),n(s))}return t(u,55296,56319)?(a=u,null):t(u,56320,57343)?n(s):u}}function f(e,n){n.fatal;this.encode=function(n,i){function a(t){var r=t>>8,s=255&t;return e?n.emit(r,s):n.emit(s,r)}var o=i.get();if(o===b)return _;if(i.offset(1),t(o,55296,57343)&&s(),o<=65535)return a(o);var u=(o-65536)%1024+56320;return a(r(o-65536,1024)+55296),a(u)}}function h(t,r){return this&&this!==e?(t=t?String(t):g,r=Object(r),this._encoding=i(t),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(r.fatal)},Object.defineProperty?Object.defineProperty(this,"encoding",{get:function(){return this._encoding.name}}):this.encoding=this._encoding.name,this):new h(t,r)}function d(t,r){return this&&this!==e?(t=t?String(t):g,r=Object(r),this._encoding=i(t),this._streaming=!1,this._decoder=null,this._options={fatal:Boolean(r.fatal)},Object.defineProperty?Object.defineProperty(this,"encoding",{get:function(){return this._encoding.name}}):this.encoding=this._encoding.name,this):new d(t,r)}var _=-1,b=-1,p={},m={};[{encodings:[{labels:["unicode-1-1-utf-8","utf-8","utf8"],name:"utf-8"}],heading:"The Encoding"},{encodings:[{labels:["cp864","ibm864"],name:"ibm864"},{labels:["cp866","ibm866"],name:"ibm866"},{labels:["csisolatin2","iso-8859-2","iso-ir-101","iso8859-2","iso_8859-2","l2","latin2"],name:"iso-8859-2"},{labels:["csisolatin3","iso-8859-3","iso_8859-3","iso-ir-109","l3","latin3"],name:"iso-8859-3"},{labels:["csisolatin4","iso-8859-4","iso_8859-4","iso-ir-110","l4","latin4"],name:"iso-8859-4"},{labels:["csisolatincyrillic","cyrillic","iso-8859-5","iso_8859-5","iso-ir-144"],name:"iso-8859-5"},{labels:["arabic","csisolatinarabic","ecma-114","iso-8859-6","iso_8859-6","iso-ir-127"],name:"iso-8859-6"},{labels:["csisolatingreek","ecma-118","elot_928","greek","greek8","iso-8859-7","iso_8859-7","iso-ir-126"],name:"iso-8859-7"},{labels:["csisolatinhebrew","hebrew","iso-8859-8","iso-8859-8-i","iso-ir-138","iso_8859-8","visual"],name:"iso-8859-8"},{labels:["csisolatin6","iso-8859-10","iso-ir-157","iso8859-10","l6","latin6"],name:"iso-8859-10"},{labels:["iso-8859-13"],name:"iso-8859-13"},{labels:["iso-8859-14","iso8859-14"],name:"iso-8859-14"},{labels:["iso-8859-15","iso_8859-15"],name:"iso-8859-15"},{labels:["iso-8859-16"],name:"iso-8859-16"},{labels:["koi8-r","koi8_r"],name:"koi8-r"},{labels:["koi8-u"],name:"koi8-u"},{labels:["csmacintosh","mac","macintosh","x-mac-roman"],name:"macintosh"},{labels:["iso-8859-11","tis-620","windows-874"],name:"windows-874"},{labels:["windows-1250","x-cp1250"],name:"windows-1250"},{labels:["windows-1251","x-cp1251"],name:"windows-1251"},{labels:["ascii","ansi_x3.4-1968","csisolatin1","iso-8859-1","iso8859-1","iso_8859-1","l1","latin1","us-ascii","windows-1252"],name:"windows-1252"},{labels:["cp1253","windows-1253"],name:"windows-1253"},{labels:["csisolatin5","iso-8859-9","iso-ir-148","l5","latin5","windows-1254"],name:"windows-1254"},{labels:["cp1255","windows-1255"],name:"windows-1255"},{labels:["cp1256","windows-1256"],name:"windows-1256"},{labels:["windows-1257"],name:"windows-1257"},{labels:["cp1258","windows-1258"],name:"windows-1258"},{labels:["x-mac-cyrillic","x-mac-ukrainian"],name:"x-mac-cyrillic"}],heading:"Legacy single-byte encodings"},{encodings:[{labels:["chinese","csgb2312","csiso58gb231280","gb2312","gbk","gb_2312","gb_2312-80","iso-ir-58","x-gbk"],name:"gbk"},{labels:["gb18030"],name:"gb18030"},{labels:["hz-gb-2312"],name:"hz-gb-2312"}],heading:"Legacy multi-byte Chinese (simplified) encodings"},{encodings:[{labels:["big5","big5-hkscs","cn-big5","csbig5","x-x-big5"],name:"big5"}],heading:"Legacy multi-byte Chinese (traditional) encodings"},{encodings:[{labels:["cseucpkdfmtjapanese","euc-jp","x-euc-jp"],name:"euc-jp"},{labels:["csiso2022jp","iso-2022-jp"],name:"iso-2022-jp"},{labels:["csshiftjis","ms_kanji","shift-jis","shift_jis","sjis","windows-31j","x-sjis"],name:"shift_jis"}],heading:"Legacy multi-byte Japanese encodings"},{encodings:[{labels:["cseuckr","csksc56011987","euc-kr","iso-ir-149","korean","ks_c_5601-1987","ks_c_5601-1989","ksc5601","ksc_5601","windows-949"],name:"euc-kr"},{labels:["csiso2022kr","iso-2022-kr"],name:"iso-2022-kr"}],heading:"Legacy multi-byte Korean encodings"},{encodings:[{labels:["utf-16","utf-16le"],name:"utf-16"},{labels:["utf-16be"],name:"utf-16be"}],heading:"Legacy utf-16 encodings"}].forEach(function(e){e.encodings.forEach(function(e){p[e.name]=e,e.labels.forEach(function(t){m[t]=e})})});var y=e["encoding-indexes"]||{};p["utf-8"].getEncoder=function(e){return new function(e){e.fatal,this.encode=function(e,n){var i=n.get();if(i===b)return _;if(n.offset(1),t(i,55296,57343))return s();if(t(i,0,127))return e.emit(i);var a,o;t(i,128,2047)?(a=1,o=192):t(i,2048,65535)?(a=2,o=224):t(i,65536,1114111)&&(a=3,o=240);for(var u=e.emit(r(i,Math.pow(64,a))+o);a>0;){var l=r(i,Math.pow(64,a-1));u=e.emit(128+l%64),a-=1}return u}}(e)},p["utf-8"].getDecoder=function(e){return new function(e){var r=e.fatal,s=0,i=0,a=0,o=0;this.decode=function(e){var u=e.get();if(u===_)return 0!==i?n(r):b;if(e.offset(1),0===i){if(t(u,0,127))return u;if(t(u,194,223))i=1,o=128,s=u-192;else if(t(u,224,239))i=2,o=2048,s=u-224;else{if(!t(u,240,244))return n(r);i=3,o=65536,s=u-240}return s*=Math.pow(64,i),null}if(!t(u,128,191))return s=0,i=0,a=0,o=0,e.offset(-1),n(r);if(a+=1,s+=(u-128)*Math.pow(64,i-a),a!==i)return null;var l=s,c=o;return s=0,i=0,a=0,o=0,t(l,c,1114111)&&!t(l,55296,57343)?l:n(r)}}(e)},["ibm864","ibm866","iso-8859-2","iso-8859-3","iso-8859-4","iso-8859-5","iso-8859-6","iso-8859-7","iso-8859-8","iso-8859-10","iso-8859-13","iso-8859-14","iso-8859-15","iso-8859-16","koi8-r","koi8-u","macintosh","windows-874","windows-1250","windows-1251","windows-1252","windows-1253","windows-1254","windows-1255","windows-1256","windows-1257","windows-1258","x-mac-cyrillic"].forEach(function(e){var r=p[e],i=y[e];r.getDecoder=function(e){return new function(e,r){var s=r.fatal;this.decode=function(r){var i=r.get();if(i===_)return b;if(r.offset(1),t(i,0,127))return i;var a=e[i-128];return null===a?n(s):a}}(i,e)},r.getEncoder=function(e){return new function(e,r){r.fatal,this.encode=function(r,n){var i=n.get();if(i===b)return _;if(n.offset(1),t(i,0,127))return r.emit(i);var a=o(i,e);return null===a&&s(),r.emit(a+128)}}(i,e)}}),p.gbk.getEncoder=function(e){return new l(!1,e)},p.gbk.getDecoder=function(e){return new u(!1,e)},p.gb18030.getEncoder=function(e){return new l(!0,e)},p.gb18030.getDecoder=function(e){return new u(!0,e)},p["hz-gb-2312"].getEncoder=function(e){return new function(e){e.fatal;var n=!1;this.encode=function(e,i){var a=i.get();if(a===b)return _;if(i.offset(1),t(a,0,127)&&n)return i.offset(-1),n=!1,e.emit(126,125);if(126===a)return e.emit(126,126);if(t(a,0,127))return e.emit(a);if(!n)return i.offset(-1),n=!0,e.emit(126,123);var u=o(a,y.gbk);if(null===u)return s();var l=r(u,190)+1,c=u%190-63;return t(l,33,126)&&t(c,33,126)?e.emit(l,c):s()}}(e)},p["hz-gb-2312"].getDecoder=function(e){return new function(e){var r=e.fatal,s=!1,i=0;this.decode=function(e){var o=e.get();if(o===_&&0===i)return b;if(o===_&&0!==i)return i=0,n(r);if(e.offset(1),126===i)return i=0,123===o?(s=!0,null):125===o?(s=!1,null):126===o?126:10===o?null:(e.offset(-1),n(r));if(0!==i){var u=i;i=0;var l=null;return t(o,33,126)&&(l=a(190*(u-1)+(o+63),y.gbk)),10===o&&(s=!1),null===l?n(r):l}return 126===o?(i=126,null):s?t(o,32,127)?(i=o,null):(10===o&&(s=!1),n(r)):t(o,0,127)?o:n(r)}}(e)},p.big5.getEncoder=function(e){return new function(e){e.fatal,this.encode=function(e,n){var i=n.get();if(i===b)return _;if(n.offset(1),t(i,0,127))return e.emit(i);var a=o(i,y.big5);if(null===a)return s();var u=r(a,157)+129,l=a%157,c=l<63?64:98;return e.emit(u,l+c)}}(e)},p.big5.getDecoder=function(e){return new function(e){var r=e.fatal,s=0,i=null;this.decode=function(e){if(null!==i){var o=i;return i=null,o}var u=e.get();if(u===_&&0===s)return b;if(u===_&&0!==s)return s=0,n(r);if(e.offset(1),0!==s){var l=s,c=null;s=0;var f=u<127?64:98;if((t(u,64,126)||t(u,161,254))&&(c=157*(l-129)+(u-f)),1133===c)return i=772,202;if(1135===c)return i=780,202;if(1164===c)return i=772,234;if(1166===c)return i=780,234;var h=null===c?null:a(c,y.big5);return null===c&&e.offset(-1),null===h?n(r):h}return t(u,0,127)?u:t(u,129,254)?(s=u,null):n(r)}}(e)},p["euc-jp"].getEncoder=function(e){return new function(e){e.fatal,this.encode=function(e,n){var i=n.get();if(i===b)return _;if(n.offset(1),t(i,0,127))return e.emit(i);if(165===i)return e.emit(92);if(8254===i)return e.emit(126);if(t(i,65377,65439))return e.emit(142,i-65377+161);var a=o(i,y.jis0208);if(null===a)return s();var u=r(a,94)+161,l=a%94+161;return e.emit(u,l)}}(e)},p["euc-jp"].getDecoder=function(e){return new function(e){var r=e.fatal,s=0,i=0;this.decode=function(e){var o=e.get();if(o===_)return 0===s&&0===i?b:(s=0,i=0,n(r));e.offset(1);var u,l;return 0!==i?(u=i,i=0,l=null,t(u,161,254)&&t(o,161,254)&&(l=a(94*(u-161)+o-161,y.jis0212)),t(o,161,254)||e.offset(-1),null===l?n(r):l):142===s&&t(o,161,223)?(s=0,65377+o-161):143===s&&t(o,161,254)?(s=0,i=o,null):0!==s?(u=s,s=0,l=null,t(u,161,254)&&t(o,161,254)&&(l=a(94*(u-161)+o-161,y.jis0208)),t(o,161,254)||e.offset(-1),null===l?n(r):l):t(o,0,127)?o:142===o||143===o||t(o,161,254)?(s=o,null):n(r)}}(e)},p["iso-2022-jp"].getEncoder=function(e){return new function(e){e.fatal;var n=0,i=1,a=2,u=n;this.encode=function(e,l){var c=l.get();if(c===b)return _;if(l.offset(1),(t(c,0,127)||165===c||8254===c)&&u!==n)return l.offset(-1),u=n,e.emit(27,40,66);if(t(c,0,127))return e.emit(c);if(165===c)return e.emit(92);if(8254===c)return e.emit(126);if(t(c,65377,65439)&&u!==a)return l.offset(-1),u=a,e.emit(27,40,73);if(t(c,65377,65439))return e.emit(c-65377-33);if(u!==i)return l.offset(-1),u=i,e.emit(27,36,66);var f=o(c,y.jis0208);if(null===f)return s();var h=r(f,94)+33,d=f%94+33;return e.emit(h,d)}}(e)},p["iso-2022-jp"].getDecoder=function(e){return new function(e){var r=e.fatal,s=0,i=1,o=2,u=3,l=4,c=5,f=6,h=s,d=!1,p=0;this.decode=function(e){var m=e.get();switch(m!==_&&e.offset(1),h){default:case s:return 27===m?(h=i,null):t(m,0,127)?m:m===_?b:n(r);case i:return 36===m||40===m?(p=m,h=o,null):(m!==_&&e.offset(-1),h=s,n(r));case o:var g=p;return p=0,36!==g||64!==m&&66!==m?36===g&&40===m?(h=u,null):40!==g||66!==m&&74!==m?40===g&&73===m?(h=f,null):(m===_?e.offset(-1):e.offset(-2),h=s,n(r)):(h=s,null):(d=!1,h=l,null);case u:return 68===m?(d=!0,h=l,null):(m===_?e.offset(-2):e.offset(-3),h=s,n(r));case l:return 10===m?(h=s,n(r,10)):27===m?(h=i,null):m===_?b:(p=m,h=c,null);case c:if(h=l,m===_)return n(r);var v=null,S=94*(p-33)+m-33;return t(p,33,126)&&t(m,33,126)&&(v=!1===d?a(S,y.jis0208):a(S,y.jis0212)),null===v?n(r):v;case f:return 27===m?(h=i,null):t(m,33,95)?65377+m-33:m===_?b:n(r)}}}(e)},p.shift_jis.getEncoder=function(e){return new function(e){e.fatal,this.encode=function(e,n){var i=n.get();if(i===b)return _;if(n.offset(1),t(i,0,128))return e.emit(i);if(165===i)return e.emit(92);if(8254===i)return e.emit(126);if(t(i,65377,65439))return e.emit(i-65377+161);var a=o(i,y.jis0208);if(null===a)return s();var u=r(a,188),l=u<31?129:193,c=a%188,f=c<63?64:65;return e.emit(u+l,c+f)}}(e)},p.shift_jis.getDecoder=function(e){return new function(e){var r=e.fatal,s=0;this.decode=function(e){var i=e.get();if(i===_&&0===s)return b;if(i===_&&0!==s)return s=0,n(r);if(e.offset(1),0!==s){var o=s;if(s=0,t(i,64,126)||t(i,128,252)){var u=a(188*(o-(o<160?129:193))+i-(i<127?64:65),y.jis0208);return null===u?n(r):u}return e.offset(-1),n(r)}return t(i,0,128)?i:t(i,161,223)?65377+i-161:t(i,129,159)||t(i,224,252)?(s=i,null):n(r)}}(e)},p["euc-kr"].getEncoder=function(e){return new function(e){e.fatal,this.encode=function(e,n){var i=n.get();if(i===b)return _;if(n.offset(1),t(i,0,127))return e.emit(i);var a=o(i,y["euc-kr"]);if(null===a)return s();var u,l;if(a<12460){u=r(a,178)+129;var c=(l=a%178)<26?65:l<52?71:77;return e.emit(u,l+c)}return a-=12460,u=r(a,94)+199,l=a%94+161,e.emit(u,l)}}(e)},p["euc-kr"].getDecoder=function(e){return new function(e){var r=e.fatal,s=0;this.decode=function(e){var i=e.get();if(i===_&&0===s)return b;if(i===_&&0!==s)return s=0,n(r);if(e.offset(1),0!==s){var o=s,u=null;if(s=0,t(o,129,198)){var l=178*(o-129);t(i,65,90)?u=l+i-65:t(i,97,122)?u=l+26+i-97:t(i,129,254)&&(u=l+26+26+i-129)}t(o,199,253)&&t(i,161,254)&&(u=12460+94*(o-199)+(i-161));var c=null===u?null:a(u,y["euc-kr"]);return null===u&&e.offset(-1),null===c?n(r):c}return t(i,0,127)?i:t(i,129,253)?(s=i,null):n(r)}}(e)},p["iso-2022-kr"].getEncoder=function(e){return new function(e){e.fatal;var n=0,i=1,a=!1,u=n;this.encode=function(e,l){var c=l.get();if(c===b)return _;if(a||(a=!0,e.emit(27,36,41,67)),l.offset(1),t(c,0,127)&&u!==n)return l.offset(-1),u=n,e.emit(15);if(t(c,0,127))return e.emit(c);if(u!==i)return l.offset(-1),u=i,e.emit(14);var f=o(c,y["euc-kr"]);if(null===f)return s();var h,d;return f<12460?(h=r(f,178)+1,d=f%178-26-26+1,t(h,33,70)&&t(d,33,126)?e.emit(h,d):s()):(f-=12460,h=r(f,94)+71,d=f%94+33,t(h,71,126)&&t(d,33,126)?e.emit(h,d):s())}}(e)},p["iso-2022-kr"].getDecoder=function(e){return new function(e){var r=e.fatal,s=0,i=1,o=2,u=3,l=4,c=5,f=s,h=0;this.decode=function(e){var d=e.get();switch(d!==_&&e.offset(1),f){default:case s:return 14===d?(f=l,null):15===d?null:27===d?(f=i,null):t(d,0,127)?d:d===_?b:n(r);case i:return 36===d?(f=o,null):(d!==_&&e.offset(-1),f=s,n(r));case o:return 41===d?(f=u,null):(d===_?e.offset(-1):e.offset(-2),f=s,n(r));case u:return 67===d?(f=s,null):(d===_?e.offset(-2):e.offset(-3),f=s,n(r));case l:return 10===d?(f=s,n(r,10)):14===d?null:15===d?(f=s,null):d===_?b:(h=d,f=c,null);case c:if(f=l,d===_)return n(r);var p=null;return t(h,33,70)&&t(d,33,126)?p=a(178*(h-1)+26+26+d-1,y["euc-kr"]):t(h,71,126)&&t(d,33,126)&&(p=a(12460+94*(h-71)+(d-33),y["euc-kr"])),null!==p?p:n(r)}}}(e)},p["utf-16"].getEncoder=function(e){return new f(!1,e)},p["utf-16"].getDecoder=function(e){return new c(!1,e)},p["utf-16be"].getEncoder=function(e){return new f(!0,e)},p["utf-16be"].getDecoder=function(e){return new c(!0,e)};var g="utf-8";h.prototype={encode:function(e,r){e=e?String(e):"",r=Object(r),this._streaming||(this._encoder=this._encoding.getEncoder(this._options)),this._streaming=Boolean(r.stream);for(var n=[],s=new function(e){var t=0;this.emit=function(r){var n,s=_;for(n=0;n<arguments.length;++n)s=Number(arguments[n]),e[t++]=s;return s}}(n),i=new function(e){var r=0,n=function(){for(var r=[],n=0,s=e.length;n<e.length;){var i=e.charCodeAt(n);if(t(i,55296,57343))if(t(i,56320,57343))r.push(65533);else if(n===s-1)r.push(65533);else{var a=e.charCodeAt(n+1);if(t(a,56320,57343)){var o=1023&i,u=1023&a;n+=1,r.push(65536+(o<<10)+u)}else r.push(65533)}else r.push(i);n+=1}return r}();this.offset=function(e){if((r+=e)<0)throw new Error("Seeking past start of the buffer");if(r>n.length)throw new Error("Seeking past EOF")},this.get=function(){return r>=n.length?b:n[r]}}(e);i.get()!==b;)this._encoder.encode(s,i);if(!this._streaming){var a;do{a=this._encoder.encode(s,i)}while(a!==_);this._encoder=null}return new Uint8Array(n)}},d.prototype={decode:function(e,t){if(e&&!("buffer"in e&&"byteOffset"in e&&"byteLength"in e))throw new TypeError("Expected ArrayBufferView");e||(e=new Uint8Array(0)),t=Object(t),this._streaming||(this._decoder=this._encoding.getDecoder(this._options)),this._streaming=Boolean(t.stream);var r=new function(e){var t=0;this.get=function(){return t>=e.length?_:Number(e[t])},this.offset=function(r){if((t+=r)<0)throw new Error("Seeking past start of the buffer");if(t>e.length)throw new Error("Seeking past EOF")},this.match=function(r){if(r.length>t+e.length)return!1;var n;for(n=0;n<r.length;n+=1)if(Number(e[t+n])!==r[n])return!1;return!0}}(new Uint8Array(e.buffer,e.byteOffset,e.byteLength));if(i(function(e,t){return t.match([255,254])?(t.offset(2),"utf-16"):t.match([254,255])?(t.offset(2),"utf-16be"):t.match([239,187,191])?(t.offset(3),"utf-8"):e}(this._encoding.name,r))!==this._encoding)throw new Error("BOM mismatch");for(var n,s=new function(){var e="";this.string=function(){return e},this.emit=function(t){t<=65535?e+=String.fromCharCode(t):(t-=65536,e+=String.fromCharCode(55296+(t>>10&1023)),e+=String.fromCharCode(56320+(1023&t)))}};r.get()!==_;)null!==(n=this._decoder.decode(r))&&n!==b&&s.emit(n);if(!this._streaming){do{null!==(n=this._decoder.decode(r))&&n!==b&&s.emit(n)}while(n!==b);this._decoder=null}return s.string()}},e.TextEncoder=e.TextEncoder||h,e.TextDecoder=e.TextDecoder||d}(this);var MD5=function(){this.hexcase=0,this.b64pad=""};MD5.prototype={},MD5.prototype.hex_md5=function(e){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(e)))},MD5.prototype.b64_md5=function(e){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(e)))},MD5.prototype.any_md5=function(e,t){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(e)),t)},MD5.prototype.hex_hmac_md5=function(e,t){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},MD5.prototype.b64_hmac_md5=function(e,t){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},MD5.prototype.any_hmac_md5=function(e,t,r){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)),r)},MD5.prototype.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},MD5.prototype.rstr_md5=function(e){return this.binl2rstr(this.binl_md5(this.rstr2binl(e),8*e.length))},MD5.prototype.rstr_hmac_md5=function(e,t){var r=this.rstr2binl(e);r.length>16&&(r=this.binl_md5(r,8*e.length));for(var n=Array(16),s=Array(16),i=0;i<16;i++)n[i]=909522486^r[i],s[i]=1549556828^r[i];var a=this.binl_md5(n.concat(this.rstr2binl(t)),512+8*t.length);return this.binl2rstr(this.binl_md5(s.concat(a),640))},MD5.prototype.rstr2hex=function(e){try{this.hexcase}catch(e){this.hexcase=0}for(var t,r=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",n="",s=0;s<e.length;s++)t=e.charCodeAt(s),n+=r.charAt(t>>>4&15)+r.charAt(15&t);return n},MD5.prototype.rstr2b64=function(e){try{this.b64pad}catch(e){this.b64pad=""}for(var t="",r=e.length,n=0;n<r;n+=3)for(var s=e.charCodeAt(n)<<16|(n+1<r?e.charCodeAt(n+1)<<8:0)|(n+2<r?e.charCodeAt(n+2):0),i=0;i<4;i++)8*n+6*i>8*e.length?t+=this.b64pad:t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(s>>>6*(3-i)&63);return t},MD5.prototype.rstr2any=function(e,t){var r,n,s,i,a,o=t.length,u=Array(Math.ceil(e.length/2));for(r=0;r<u.length;r++)u[r]=e.charCodeAt(2*r)<<8|e.charCodeAt(2*r+1);var l=Math.ceil(8*e.length/(Math.log(t.length)/Math.log(2))),c=Array(l);for(n=0;n<l;n++){for(a=Array(),i=0,r=0;r<u.length;r++)i=(i<<16)+u[r],i-=(s=Math.floor(i/o))*o,(a.length>0||s>0)&&(a[a.length]=s);c[n]=i,u=a}var f="";for(r=c.length-1;r>=0;r--)f+=t.charAt(c[r]);return f},MD5.prototype.str2rstr_utf8=function(e){for(var t,r,n="",s=-1;++s<e.length;)t=e.charCodeAt(s),r=s+1<e.length?e.charCodeAt(s+1):0,55296<=t&&t<=56319&&56320<=r&&r<=57343&&(t=65536+((1023&t)<<10)+(1023&r),s++),t<=127?n+=String.fromCharCode(t):t<=2047?n+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?n+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(n+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return n},MD5.prototype.str2rstr_utf16le=function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(255&e.charCodeAt(r),e.charCodeAt(r)>>>8&255);return t},MD5.prototype.str2rstr_utf16be=function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e.charCodeAt(r)>>>8&255,255&e.charCodeAt(r));return t},MD5.prototype.rstr2binl=function(e){for(var t=Array(e.length>>2),r=0;r<t.length;r++)t[r]=0;for(r=0;r<8*e.length;r+=8)t[r>>5]|=(255&e.charCodeAt(r/8))<<r%32;return t},MD5.prototype.binl2rstr=function(e){for(var t="",r=0;r<32*e.length;r+=8)t+=String.fromCharCode(e[r>>5]>>>r%32&255);return t},MD5.prototype.binl_md5=function(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var r=1732584193,n=-271733879,s=-1732584194,i=271733878,a=0;a<e.length;a+=16){var o=r,u=n,l=s,c=i;r=this.md5_ff(r,n,s,i,e[a+0],7,-680876936),i=this.md5_ff(i,r,n,s,e[a+1],12,-389564586),s=this.md5_ff(s,i,r,n,e[a+2],17,606105819),n=this.md5_ff(n,s,i,r,e[a+3],22,-1044525330),r=this.md5_ff(r,n,s,i,e[a+4],7,-176418897),i=this.md5_ff(i,r,n,s,e[a+5],12,1200080426),s=this.md5_ff(s,i,r,n,e[a+6],17,-1473231341),n=this.md5_ff(n,s,i,r,e[a+7],22,-45705983),r=this.md5_ff(r,n,s,i,e[a+8],7,1770035416),i=this.md5_ff(i,r,n,s,e[a+9],12,-1958414417),s=this.md5_ff(s,i,r,n,e[a+10],17,-42063),n=this.md5_ff(n,s,i,r,e[a+11],22,-1990404162),r=this.md5_ff(r,n,s,i,e[a+12],7,1804603682),i=this.md5_ff(i,r,n,s,e[a+13],12,-40341101),s=this.md5_ff(s,i,r,n,e[a+14],17,-1502002290),n=this.md5_ff(n,s,i,r,e[a+15],22,1236535329),r=this.md5_gg(r,n,s,i,e[a+1],5,-165796510),i=this.md5_gg(i,r,n,s,e[a+6],9,-1069501632),s=this.md5_gg(s,i,r,n,e[a+11],14,643717713),n=this.md5_gg(n,s,i,r,e[a+0],20,-373897302),r=this.md5_gg(r,n,s,i,e[a+5],5,-701558691),i=this.md5_gg(i,r,n,s,e[a+10],9,38016083),s=this.md5_gg(s,i,r,n,e[a+15],14,-660478335),n=this.md5_gg(n,s,i,r,e[a+4],20,-405537848),r=this.md5_gg(r,n,s,i,e[a+9],5,568446438),i=this.md5_gg(i,r,n,s,e[a+14],9,-1019803690),s=this.md5_gg(s,i,r,n,e[a+3],14,-187363961),n=this.md5_gg(n,s,i,r,e[a+8],20,1163531501),r=this.md5_gg(r,n,s,i,e[a+13],5,-1444681467),i=this.md5_gg(i,r,n,s,e[a+2],9,-51403784),s=this.md5_gg(s,i,r,n,e[a+7],14,1735328473),n=this.md5_gg(n,s,i,r,e[a+12],20,-1926607734),r=this.md5_hh(r,n,s,i,e[a+5],4,-378558),i=this.md5_hh(i,r,n,s,e[a+8],11,-2022574463),s=this.md5_hh(s,i,r,n,e[a+11],16,1839030562),n=this.md5_hh(n,s,i,r,e[a+14],23,-35309556),r=this.md5_hh(r,n,s,i,e[a+1],4,-1530992060),i=this.md5_hh(i,r,n,s,e[a+4],11,1272893353),s=this.md5_hh(s,i,r,n,e[a+7],16,-155497632),n=this.md5_hh(n,s,i,r,e[a+10],23,-1094730640),r=this.md5_hh(r,n,s,i,e[a+13],4,681279174),i=this.md5_hh(i,r,n,s,e[a+0],11,-358537222),s=this.md5_hh(s,i,r,n,e[a+3],16,-722521979),n=this.md5_hh(n,s,i,r,e[a+6],23,76029189),r=this.md5_hh(r,n,s,i,e[a+9],4,-640364487),i=this.md5_hh(i,r,n,s,e[a+12],11,-421815835),s=this.md5_hh(s,i,r,n,e[a+15],16,530742520),n=this.md5_hh(n,s,i,r,e[a+2],23,-995338651),r=this.md5_ii(r,n,s,i,e[a+0],6,-198630844),i=this.md5_ii(i,r,n,s,e[a+7],10,1126891415),s=this.md5_ii(s,i,r,n,e[a+14],15,-1416354905),n=this.md5_ii(n,s,i,r,e[a+5],21,-57434055),r=this.md5_ii(r,n,s,i,e[a+12],6,1700485571),i=this.md5_ii(i,r,n,s,e[a+3],10,-1894986606),s=this.md5_ii(s,i,r,n,e[a+10],15,-1051523),n=this.md5_ii(n,s,i,r,e[a+1],21,-2054922799),r=this.md5_ii(r,n,s,i,e[a+8],6,1873313359),i=this.md5_ii(i,r,n,s,e[a+15],10,-30611744),s=this.md5_ii(s,i,r,n,e[a+6],15,-1560198380),n=this.md5_ii(n,s,i,r,e[a+13],21,1309151649),r=this.md5_ii(r,n,s,i,e[a+4],6,-145523070),i=this.md5_ii(i,r,n,s,e[a+11],10,-1120210379),s=this.md5_ii(s,i,r,n,e[a+2],15,718787259),n=this.md5_ii(n,s,i,r,e[a+9],21,-343485551),r=this.safe_add(r,o),n=this.safe_add(n,u),s=this.safe_add(s,l),i=this.safe_add(i,c)}return Array(r,n,s,i)},MD5.prototype.md5_cmn=function(e,t,r,n,s,i){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(t,e),this.safe_add(n,i)),s),r)},MD5.prototype.md5_ff=function(e,t,r,n,s,i,a){return this.md5_cmn(t&r|~t&n,e,t,s,i,a)},MD5.prototype.md5_gg=function(e,t,r,n,s,i,a){return this.md5_cmn(t&n|r&~n,e,t,s,i,a)},MD5.prototype.md5_hh=function(e,t,r,n,s,i,a){return this.md5_cmn(t^r^n,e,t,s,i,a)},MD5.prototype.md5_ii=function(e,t,r,n,s,i,a){return this.md5_cmn(r^(t|~n),e,t,s,i,a)},MD5.prototype.safe_add=function(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r},MD5.prototype.bit_rol=function(e,t){return e<<t|e>>>32-t},function(){"use strict";function e(e){throw e}function t(e,t){var r=e.split("."),n=y;!(r[0]in n)&&n.execScript&&n.execScript("var "+r[0]);for(var s;r.length&&(s=r.shift());)r.length||t===p?n=n[s]?n[s]:n[s]={}:n[s]=t}function r(t,r){this.index="number"==typeof r?r:0,this.i=0,this.buffer=t instanceof(g?Uint8Array:Array)?t:new(g?Uint8Array:Array)(32768),2*this.buffer.length<=this.index&&e(Error("invalid index")),this.buffer.length<=this.index&&this.f()}function n(e){this.buffer=new(g?Uint16Array:Array)(2*e),this.length=0}function s(e){var t,r,n,s,i,a,o,u,l,c,f=e.length,h=0,d=Number.POSITIVE_INFINITY;for(u=0;u<f;++u)e[u]>h&&(h=e[u]),e[u]<d&&(d=e[u]);for(t=1<<h,r=new(g?Uint32Array:Array)(t),n=1,s=0,i=2;n<=h;){for(u=0;u<f;++u)if(e[u]===n){for(a=0,o=s,l=0;l<n;++l)a=a<<1|1&o,o>>=1;for(c=n<<16|u,l=a;l<t;l+=i)r[l]=c;++s}++n,s<<=1,i<<=1}return[r,h,d]}function i(e,t){this.h=j,this.w=0,this.input=g&&e instanceof Array?new Uint8Array(e):e,this.b=0,t&&(t.lazy&&(this.w=t.lazy),"number"==typeof t.compressionType&&(this.h=t.compressionType),t.outputBuffer&&(this.a=g&&t.outputBuffer instanceof Array?new Uint8Array(t.outputBuffer):t.outputBuffer),"number"==typeof t.outputIndex&&(this.b=t.outputIndex)),this.a||(this.a=new(g?Uint8Array:Array)(32768))}function a(t,r){function n(t,r){var n,s=t.H,i=[],a=0;n=C[t.length],i[a++]=65535&n,i[a++]=n>>16&255,i[a++]=n>>24;var o;switch(m){case 1===s:o=[0,s-1,0];break;case 2===s:o=[1,s-2,0];break;case 3===s:o=[2,s-3,0];break;case 4===s:o=[3,s-4,0];break;case 6>=s:o=[4,s-5,1];break;case 8>=s:o=[5,s-7,1];break;case 12>=s:o=[6,s-9,2];break;case 16>=s:o=[7,s-13,2];break;case 24>=s:o=[8,s-17,3];break;case 32>=s:o=[9,s-25,3];break;case 48>=s:o=[10,s-33,4];break;case 64>=s:o=[11,s-49,4];break;case 96>=s:o=[12,s-65,5];break;case 128>=s:o=[13,s-97,5];break;case 192>=s:o=[14,s-129,6];break;case 256>=s:o=[15,s-193,6];break;case 384>=s:o=[16,s-257,7];break;case 512>=s:o=[17,s-385,7];break;case 768>=s:o=[18,s-513,8];break;case 1024>=s:o=[19,s-769,8];break;case 1536>=s:o=[20,s-1025,9];break;case 2048>=s:o=[21,s-1537,9];break;case 3072>=s:o=[22,s-2049,10];break;case 4096>=s:o=[23,s-3073,10];break;case 6144>=s:o=[24,s-4097,11];break;case 8192>=s:o=[25,s-6145,11];break;case 12288>=s:o=[26,s-8193,12];break;case 16384>=s:o=[27,s-12289,12];break;case 24576>=s:o=[28,s-16385,13];break;case 32768>=s:o=[29,s-24577,13];break;default:e("invalid distance")}n=o,i[a++]=n[0],i[a++]=n[1],i[a++]=n[2];var u,l;for(u=0,l=i.length;u<l;++u)_[b++]=i[u];v[i[0]]++,S[i[3]]++,y=t.length+r-1,f=null}var s,i,a,o,u,l,c,f,h,d={},_=g?new Uint16Array(2*r.length):[],b=0,y=0,v=new(g?Uint32Array:Array)(286),S=new(g?Uint32Array:Array)(30),R=t.w;if(!g){for(a=0;285>=a;)v[a++]=0;for(a=0;29>=a;)S[a++]=0}for(v[256]=1,s=0,i=r.length;s<i;++s){for(a=u=0,o=3;a<o&&s+a!==i;++a)u=u<<8|r[s+a];if(d[u]===p&&(d[u]=[]),l=d[u],!(0<y--)){for(;0<l.length&&32768<s-l[0];)l.shift();if(s+3>=i){for(f&&n(f,-1),a=0,o=i-s;a<o;++a)h=r[s+a],_[b++]=h,++v[h];break}0<l.length?(c=function(e,t,r){var n,s,i,a,o,u,l=0,c=e.length;a=0,u=r.length;e:for(;a<u;a++){if(n=r[u-a-1],i=3,3<l){for(o=l;3<o;o--)if(e[n+o-1]!==e[t+o-1])continue e;i=l}for(;258>i&&t+i<c&&e[n+i]===e[t+i];)++i;if(i>l&&(s=n,l=i),258===i)break}return new function(e,t){this.length=e,this.H=t}(l,t-s)}(r,s,l),f?f.length<c.length?(h=r[s-1],_[b++]=h,++v[h],n(c,0)):n(f,-1):c.length<R?f=c:n(c,0)):f?n(f,-1):(h=r[s],_[b++]=h,++v[h])}l.push(s)}return _[b++]=256,v[256]++,t.M=v,t.L=S,g?_.subarray(0,b):_}function o(e,t){var r,s,i,a,o,u=e.length,l=new n(572),c=new(g?Uint8Array:Array)(u);if(!g)for(a=0;a<u;a++)c[a]=0;for(a=0;a<u;++a)0<e[a]&&l.push(a,e[a]);if(r=Array(l.length/2),s=new(g?Uint32Array:Array)(l.length/2),1===r.length)return c[l.pop().index]=1,c;for(a=0,o=l.length/2;a<o;++a)r[a]=l.pop(),s[a]=r[a].value;for(i=function(e,t,r){function n(e){var r=d[e][_[e]];r===t?(n(e+1),n(e+1)):--f[r],++_[e]}var s,i,a,o,u,l=new(g?Uint16Array:Array)(r),c=new(g?Uint8Array:Array)(r),f=new(g?Uint8Array:Array)(t),h=Array(r),d=Array(r),_=Array(r),b=(1<<r)-t,p=1<<r-1;for(l[r-1]=t,i=0;i<r;++i)b<p?c[i]=0:(c[i]=1,b-=p),b<<=1,l[r-2-i]=(l[r-1-i]/2|0)+t;for(l[0]=c[0],h[0]=Array(l[0]),d[0]=Array(l[0]),i=1;i<r;++i)l[i]>2*l[i-1]+c[i]&&(l[i]=2*l[i-1]+c[i]),h[i]=Array(l[i]),d[i]=Array(l[i]);for(s=0;s<t;++s)f[s]=r;for(a=0;a<l[r-1];++a)h[r-1][a]=e[a],d[r-1][a]=a;for(s=0;s<r;++s)_[s]=0;for(1===c[r-1]&&(--f[0],++_[r-1]),i=r-2;0<=i;--i){for(o=s=0,u=_[i+1],a=0;a<l[i];a++)(o=h[i+1][u]+h[i+1][u+1])>e[s]?(h[i][a]=o,d[i][a]=t,u+=2):(h[i][a]=e[s],d[i][a]=s,++s);_[i]=0,1===c[i]&&n(i)}return f}(s,s.length,t),a=0,o=r.length;a<o;++a)c[r[a].index]=i[a];return c}function u(e){var t,r,n,s,i=new(g?Uint16Array:Array)(e.length),a=[],o=[],u=0;for(t=0,r=e.length;t<r;t++)a[e[t]]=1+(0|a[e[t]]);for(t=1,r=16;t<=r;t++)o[t]=u,u+=0|a[t],u<<=1;for(t=0,r=e.length;t<r;t++)for(u=o[e[t]],o[e[t]]+=1,n=i[t]=0,s=e[t];n<s;n++)i[t]=i[t]<<1|1&u,u>>>=1;return i}function l(t,r){switch(this.l=[],this.m=32768,this.e=this.g=this.c=this.q=0,this.input=g?new Uint8Array(t):t,this.s=!1,this.n=U,this.C=!1,!r&&(r={})||(r.index&&(this.c=r.index),r.bufferSize&&(this.m=r.bufferSize),r.bufferType&&(this.n=r.bufferType),r.resize&&(this.C=r.resize)),this.n){case w:this.b=32768,this.a=new(g?Uint8Array:Array)(32768+this.m+258);break;case U:this.b=0,this.a=new(g?Uint8Array:Array)(this.m),this.f=this.K,this.t=this.I,this.o=this.J;break;default:e(Error("invalid inflate mode"))}}function c(t,r){for(var n,s=t.g,i=t.e,a=t.input,o=t.c,u=a.length;i<r;)o>=u&&e(Error("input buffer is broken")),s|=a[o++]<<i,i+=8;return n=s&(1<<r)-1,t.g=s>>>r,t.e=i-r,t.c=o,n}function f(e,t){for(var r,n,s=e.g,i=e.e,a=e.input,o=e.c,u=a.length,l=t[0],c=t[1];i<c&&!(o>=u);)s|=a[o++]<<i,i+=8;return r=l[s&(1<<c)-1],n=r>>>16,e.g=s>>n,e.e=i-n,e.c=o,65535&r}function h(e){if("string"==typeof e){var t,r,n=e.split("");for(t=0,r=n.length;t<r;t++)n[t]=(255&n[t].charCodeAt(0))>>>0;e=n}for(var s,i=1,a=0,o=e.length,u=0;0<o;){o-=s=1024<o?1024:o;do{i+=e[u++],a+=i}while(--s);i%=65521,a%=65521}return(a<<16|i)>>>0}function d(t,r){var n,s;switch(this.input=t,this.c=0,!r&&(r={})||(r.index&&(this.c=r.index),r.verify&&(this.N=r.verify)),n=t[this.c++],s=t[this.c++],15&n){case $:this.method=$;break;default:e(Error("unsupported compression method"))}0!=((n<<8)+s)%31&&e(Error("invalid fcheck flag:"+((n<<8)+s)%31)),32&s&&e(Error("fdict flag is not supported")),this.B=new l(t,{index:this.c,bufferSize:r.bufferSize,bufferType:r.bufferType,resize:r.resize})}function _(e,t){this.input=e,this.a=new(g?Uint8Array:Array)(32768),this.h=ee.k;var r,n={};!t&&(t={})||"number"!=typeof t.compressionType||(this.h=t.compressionType);for(r in t)n[r]=t[r];n.outputBuffer=this.a,this.A=new i(this.input,n)}function b(e,r){var n,s,i,a;if(Object.keys)n=Object.keys(r);else for(s in n=[],i=0,r)n[i++]=s;for(i=0,a=n.length;i<a;++i)s=n[i],t(e+"."+s,r[s])}var p=void 0,m=!0,y=this,g="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView;r.prototype.f=function(){var e,t=this.buffer,r=t.length,n=new(g?Uint8Array:Array)(r<<1);if(g)n.set(t);else for(e=0;e<r;++e)n[e]=t[e];return this.buffer=n},r.prototype.d=function(e,t,r){var n,s=this.buffer,i=this.index,a=this.i,o=s[i];if(r&&1<t&&(e=8<t?(A[255&e]<<24|A[e>>>8&255]<<16|A[e>>>16&255]<<8|A[e>>>24&255])>>32-t:A[e]>>8-t),8>t+a)o=o<<t|e,a+=t;else for(n=0;n<t;++n)o=o<<1|e>>t-n-1&1,8==++a&&(a=0,s[i++]=A[o],o=0,i===s.length&&(s=this.f()));s[i]=o,this.buffer=s,this.i=a,this.index=i},r.prototype.finish=function(){var e,t=this.buffer,r=this.index;return 0<this.i&&(t[r]<<=8-this.i,t[r]=A[t[r]],r++),g?e=t.subarray(0,r):(t.length=r,e=t),e};var v,S=new(g?Uint8Array:Array)(256);for(v=0;256>v;++v){for(var R=O=v,E=7,O=O>>>1;O;O>>>=1)R<<=1,R|=1&O,--E;S[v]=(R<<E&255)>>>0}var A=S;n.prototype.getParent=function(e){return 2*((e-2)/4|0)},n.prototype.push=function(e,t){var r,n,s,i=this.buffer;for(r=this.length,i[this.length++]=t,i[this.length++]=e;0<r&&(n=this.getParent(r),i[r]>i[n]);)s=i[r],i[r]=i[n],i[n]=s,s=i[r+1],i[r+1]=i[n+1],i[n+1]=s,r=n;return this.length},n.prototype.pop=function(){var e,t,r,n,s,i=this.buffer;for(t=i[0],e=i[1],this.length-=2,i[0]=i[this.length],i[1]=i[this.length+1],s=0;!((n=2*s+2)>=this.length)&&(n+2<this.length&&i[n+2]>i[n]&&(n+=2),i[n]>i[s]);)r=i[s],i[s]=i[n],i[n]=r,r=i[s+1],i[s+1]=i[n+1],i[n+1]=r,s=n;return{index:e,value:t,length:this.length}};var k,j=2,M={NONE:0,r:1,k:j,O:3},I=[];for(k=0;288>k;k++)switch(m){case 143>=k:I.push([k+48,8]);break;case 255>=k:I.push([k-144+400,9]);break;case 279>=k:I.push([k-256+0,7]);break;case 287>=k:I.push([k-280+192,8]);break;default:e("invalid literal: "+k)}i.prototype.j=function(){var t,n,s,i,l=this.input;switch(this.h){case 0:for(s=0,i=l.length;s<i;){var c=n=g?l.subarray(s,s+65535):l.slice(s,s+65535),f=(s+=n.length)===i,h=p,d=p,_=p,b=p,y=p,v=this.a,S=this.b;if(g){for(v=new Uint8Array(this.a.buffer);v.length<=S+c.length+5;)v=new Uint8Array(v.length<<1);v.set(this.a)}if(h=f?1:0,v[S++]=0|h,d=c.length,_=65536+~d&65535,v[S++]=255&d,v[S++]=d>>>8&255,v[S++]=255&_,v[S++]=_>>>8&255,g)v.set(c,S),S+=c.length,v=v.subarray(0,S);else{for(b=0,y=c.length;b<y;++b)v[S++]=c[b];v.length=S}this.b=S,this.a=v}break;case 1:var R=new r(g?new Uint8Array(this.a.buffer):this.a,this.b);R.d(1,1,m),R.d(1,2,m);var E,O,A,k=a(this,l);for(E=0,O=k.length;E<O;E++)if(A=k[E],r.prototype.d.apply(R,I[A]),256<A)R.d(k[++E],k[++E],m),R.d(k[++E],5),R.d(k[++E],k[++E],m);else if(256===A)break;this.a=R.finish(),this.b=this.a.length;break;case j:var M,T,C,w,U,D,B,F,N,L,P,q,Y,x,V,K=new r(g?new Uint8Array(this.a.buffer):this.a,this.b),G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],z=Array(19);for(M=j,K.d(1,1,m),K.d(M,2,m),T=a(this,l),B=u(D=o(this.M,15)),N=u(F=o(this.L,7)),C=286;257<C&&0===D[C-1];C--);for(w=30;1<w&&0===F[w-1];w--);var H,J,X,W,Q,Z,$=C,ee=w,te=new(g?Uint32Array:Array)($+ee),re=new(g?Uint32Array:Array)(316),ne=new(g?Uint8Array:Array)(19);for(H=J=0;H<$;H++)te[J++]=D[H];for(H=0;H<ee;H++)te[J++]=F[H];if(!g)for(H=0,W=ne.length;H<W;++H)ne[H]=0;for(H=Q=0,W=te.length;H<W;H+=J){for(J=1;H+J<W&&te[H+J]===te[H];++J);if(X=J,0===te[H])if(3>X)for(;0<X--;)re[Q++]=0,ne[0]++;else for(;0<X;)(Z=138>X?X:138)>X-3&&Z<X&&(Z=X-3),10>=Z?(re[Q++]=17,re[Q++]=Z-3,ne[17]++):(re[Q++]=18,re[Q++]=Z-11,ne[18]++),X-=Z;else if(re[Q++]=te[H],ne[te[H]]++,3>--X)for(;0<X--;)re[Q++]=te[H],ne[te[H]]++;else for(;0<X;)(Z=6>X?X:6)>X-3&&Z<X&&(Z=X-3),re[Q++]=16,re[Q++]=Z-3,ne[16]++,X-=Z}for(t=g?re.subarray(0,Q):re.slice(0,Q),L=o(ne,7),x=0;19>x;x++)z[x]=L[G[x]];for(U=19;4<U&&0===z[U-1];U--);for(P=u(L),K.d(C-257,5,m),K.d(w-1,5,m),K.d(U-4,4,m),x=0;x<U;x++)K.d(z[x],3,m);for(x=0,V=t.length;x<V;x++)if(q=t[x],K.d(P[q],L[q],m),16<=q){switch(x++,q){case 16:Y=2;break;case 17:Y=3;break;case 18:Y=7;break;default:e("invalid code: "+q)}K.d(t[x],Y,m)}var se,ie,ae,oe,ue,le,ce,fe,he=[B,D],de=[N,F];for(ue=he[0],le=he[1],ce=de[0],fe=de[1],se=0,ie=T.length;se<ie;++se)if(ae=T[se],K.d(ue[ae],le[ae],m),256<ae)K.d(T[++se],T[++se],m),oe=T[++se],K.d(ce[oe],fe[oe],m),K.d(T[++se],T[++se],m);else if(256===ae)break;this.a=K.finish(),this.b=this.a.length;break;default:e("invalid compression type")}return this.a};var T=function(){function t(t){switch(m){case 3===t:return[257,t-3,0];case 4===t:return[258,t-4,0];case 5===t:return[259,t-5,0];case 6===t:return[260,t-6,0];case 7===t:return[261,t-7,0];case 8===t:return[262,t-8,0];case 9===t:return[263,t-9,0];case 10===t:return[264,t-10,0];case 12>=t:return[265,t-11,1];case 14>=t:return[266,t-13,1];case 16>=t:return[267,t-15,1];case 18>=t:return[268,t-17,1];case 22>=t:return[269,t-19,2];case 26>=t:return[270,t-23,2];case 30>=t:return[271,t-27,2];case 34>=t:return[272,t-31,2];case 42>=t:return[273,t-35,3];case 50>=t:return[274,t-43,3];case 58>=t:return[275,t-51,3];case 66>=t:return[276,t-59,3];case 82>=t:return[277,t-67,4];case 98>=t:return[278,t-83,4];case 114>=t:return[279,t-99,4];case 130>=t:return[280,t-115,4];case 162>=t:return[281,t-131,5];case 194>=t:return[282,t-163,5];case 226>=t:return[283,t-195,5];case 257>=t:return[284,t-227,5];case 258===t:return[285,t-258,0];default:e("invalid length: "+t)}}var r,n,s=[];for(r=3;258>=r;r++)n=t(r),s[r]=n[2]<<24|n[1]<<16|n[0];return s}(),C=g?new Uint32Array(T):T,w=0,U=1,D={F:w,D:U};l.prototype.p=function(){for(;!this.s;){var t=c(this,3);switch(1&t&&(this.s=m),t>>>=1){case 0:var r=this.input,n=this.c,i=this.a,a=this.b,o=r.length,u=p,l=p,h=i.length,d=p;switch(this.e=this.g=0,n+1>=o&&e(Error("invalid uncompressed block header: LEN")),u=r[n++]|r[n++]<<8,n+1>=o&&e(Error("invalid uncompressed block header: NLEN")),l=r[n++]|r[n++]<<8,u===~l&&e(Error("invalid uncompressed block header: length verify")),n+u>r.length&&e(Error("input buffer is broken")),this.n){case w:for(;a+u>i.length;){if(d=h-a,u-=d,g)i.set(r.subarray(n,n+d),a),a+=d,n+=d;else for(;d--;)i[a++]=r[n++];this.b=a,i=this.f(),a=this.b}break;case U:for(;a+u>i.length;)i=this.f({v:2});break;default:e(Error("invalid inflate mode"))}if(g)i.set(r.subarray(n,n+u),a),a+=u,n+=u;else for(;u--;)i[a++]=r[n++];this.c=n,this.b=a,this.a=i;break;case 1:this.o(W,Z);break;case 2:!function(e){function t(e,t,r){var n,s,i,a=this.z;for(i=0;i<e;)switch(n=f(this,t)){case 16:for(s=3+c(this,2);s--;)r[i++]=a;break;case 17:for(s=3+c(this,3);s--;)r[i++]=0;a=0;break;case 18:for(s=11+c(this,7);s--;)r[i++]=0;a=0;break;default:a=r[i++]=n}return this.z=a,r}var r,n,i,a,o=c(e,5)+257,u=c(e,5)+1,l=c(e,4)+4,h=new(g?Uint8Array:Array)(L.length);for(a=0;a<l;++a)h[L[a]]=c(e,3);if(!g)for(a=l,l=h.length;a<l;++a)h[L[a]]=0;r=s(h),n=new(g?Uint8Array:Array)(o),i=new(g?Uint8Array:Array)(u),e.z=0,e.o(s(t.call(e,o,r,n)),s(t.call(e,u,r,i)))}(this);break;default:e(Error("unknown BTYPE: "+t))}}return this.t()};var B,F,N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],L=g?new Uint16Array(N):N,P=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],q=g?new Uint16Array(P):P,Y=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],x=g?new Uint8Array(Y):Y,V=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],K=g?new Uint16Array(V):V,G=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],z=g?new Uint8Array(G):G,H=new(g?Uint8Array:Array)(288);for(B=0,F=H.length;B<F;++B)H[B]=143>=B?8:255>=B?9:279>=B?7:8;var J,X,W=s(H),Q=new(g?Uint8Array:Array)(30);for(J=0,X=Q.length;J<X;++J)Q[J]=5;var Z=s(Q);l.prototype.o=function(e,t){var r=this.a,n=this.b;this.u=e;for(var s,i,a,o,u=r.length-258;256!==(s=f(this,e));)if(256>s)n>=u&&(this.b=n,r=this.f(),n=this.b),r[n++]=s;else for(o=q[i=s-257],0<x[i]&&(o+=c(this,x[i])),s=f(this,t),a=K[s],0<z[s]&&(a+=c(this,z[s])),n>=u&&(this.b=n,r=this.f(),n=this.b);o--;)r[n]=r[n++-a];for(;8<=this.e;)this.e-=8,this.c--;this.b=n},l.prototype.J=function(e,t){var r=this.a,n=this.b;this.u=e;for(var s,i,a,o,u=r.length;256!==(s=f(this,e));)if(256>s)n>=u&&(r=this.f(),u=r.length),r[n++]=s;else for(o=q[i=s-257],0<x[i]&&(o+=c(this,x[i])),s=f(this,t),a=K[s],0<z[s]&&(a+=c(this,z[s])),n+o>u&&(r=this.f(),u=r.length);o--;)r[n]=r[n++-a];for(;8<=this.e;)this.e-=8,this.c--;this.b=n},l.prototype.f=function(){var e,t,r=new(g?Uint8Array:Array)(this.b-32768),n=this.b-32768,s=this.a;if(g)r.set(s.subarray(32768,r.length));else for(e=0,t=r.length;e<t;++e)r[e]=s[e+32768];if(this.l.push(r),this.q+=r.length,g)s.set(s.subarray(n,n+32768));else for(e=0;32768>e;++e)s[e]=s[n+e];return this.b=32768,s},l.prototype.K=function(e){var t,r,n,s,i=this.input.length/this.c+1|0,a=this.input,o=this.a;return e&&("number"==typeof e.v&&(i=e.v),"number"==typeof e.G&&(i+=e.G)),2>i?(r=(a.length-this.c)/this.u[2],s=r/2*258|0,n=s<o.length?o.length+s:o.length<<1):n=o.length*i,g?(t=new Uint8Array(n)).set(o):t=o,this.a=t},l.prototype.t=function(){var e,t,r,n,s,i=0,a=this.a,o=this.l,u=new(g?Uint8Array:Array)(this.q+(this.b-32768));if(0===o.length)return g?this.a.subarray(32768,this.b):this.a.slice(32768,this.b);for(t=0,r=o.length;t<r;++t)for(n=0,s=(e=o[t]).length;n<s;++n)u[i++]=e[n];for(t=32768,r=this.b;t<r;++t)u[i++]=a[t];return this.l=[],this.buffer=u},l.prototype.I=function(){var e,t=this.b;return g?this.C?(e=new Uint8Array(t)).set(this.a.subarray(0,t)):e=this.a.subarray(0,t):(this.a.length>t&&(this.a.length=t),e=this.a),this.buffer=e},d.prototype.p=function(){var t,r=this.input;return t=this.B.p(),this.c=this.B.c,this.N&&(r[this.c++]<<24|r[this.c++]<<16|r[this.c++]<<8|r[this.c++])>>>0!==h(t)&&e(Error("invalid adler-32 checksum")),t};var $=8,ee=M;_.prototype.j=function(){var t,r,n,s,i,a,o,u=0;switch(o=this.a,t=$){case $:r=Math.LOG2E*Math.log(32768)-8;break;default:e(Error("invalid compression method"))}switch(n=r<<4|t,o[u++]=n,t){case $:switch(this.h){case ee.NONE:i=0;break;case ee.r:i=1;break;case ee.k:i=2;break;default:e(Error("unsupported compression type"))}break;default:e(Error("invalid compression method"))}return s=i<<6|0,o[u++]=s|31-(256*n+s)%31,a=h(this.input),this.A.b=u,o=this.A.j(),u=o.length,g&&((o=new Uint8Array(o.buffer)).length<=u+4&&(this.a=new Uint8Array(o.length+4),this.a.set(o),o=this.a),o=o.subarray(0,u+4)),o[u++]=a>>24&255,o[u++]=a>>16&255,o[u++]=a>>8&255,o[u++]=255&a,o},t("Zlib.Inflate",d),t("Zlib.Inflate.prototype.decompress",d.prototype.p),b("Zlib.Inflate.BufferType",{ADAPTIVE:D.D,BLOCK:D.F}),t("Zlib.Deflate",_),t("Zlib.Deflate.compress",function(e,t){return new _(e,t).j()}),t("Zlib.Deflate.prototype.compress",_.prototype.j),b("Zlib.Deflate.CompressionType",{NONE:ee.NONE,FIXED:ee.r,DYNAMIC:ee.k})}.call(this);